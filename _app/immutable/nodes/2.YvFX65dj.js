var jf=Object.defineProperty;var kc=r=>{throw TypeError(r)};var Zf=(r,t,e)=>t in r?jf(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var A=(r,t,e)=>Zf(r,typeof t!="symbol"?t+"":t,e),Xo=(r,t,e)=>t.has(r)||kc("Cannot "+e);var l=(r,t,e)=>(Xo(r,t,"read from private field"),e?e.call(r):t.get(r)),E=(r,t,e)=>t.has(r)?kc("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(r):t.set(r,e),d=(r,t,e,n)=>(Xo(r,t,"write to private field"),n?n.call(r,e):t.set(r,e),e),N=(r,t,e)=>(Xo(r,t,"access private method"),e);var ai=(r,t,e,n)=>({set _(s){d(r,t,s,e)},get _(){return l(r,t,n)}});import{s as ql,n as Ws,x as ya,r as Wf,o as Yf}from"../chunks/scheduler.W2pu3yam.js";import{S as $l,i as tu,e as z,b as Ht,s as ht,c as K,d as pt,f as Qt,g as _,h as dt,y as ie,o as G,j as Vt,k as S,l as wn,u as Xf,z as qf,v as $f,w as th,A as Tc,B as Xr,t as eh,a as nh,x as rh,H as sh,C as ih,D as oh,E as ah,p as ch}from"../chunks/index.Du0frybT.js";function Oc(r){return(r==null?void 0:r.length)!==void 0?r:Array.from(r)}const lh="6.13.2";function uh(r,t,e){const n=t.split("|").map(i=>i.trim());for(let i=0;i<n.length;i++)switch(t){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof r===t)return}const s=new Error(`invalid value for type ${t}`);throw s.code="INVALID_ARGUMENT",s.argument=`value.${e}`,s.value=r,s}async function Zt(r){const t=Object.keys(r);return(await Promise.all(t.map(n=>Promise.resolve(r[n])))).reduce((n,s,i)=>(n[t[i]]=s,n),{})}function H(r,t,e){for(let n in t){let s=t[n];const i=e?e[n]:null;i&&uh(s,i,n),Object.defineProperty(r,n,{enumerable:!0,value:s,writable:!1})}}function qr(r){if(r==null)return"null";if(Array.isArray(r))return"[ "+r.map(qr).join(", ")+" ]";if(r instanceof Uint8Array){const t="0123456789abcdef";let e="0x";for(let n=0;n<r.length;n++)e+=t[r[n]>>4],e+=t[r[n]&15];return e}if(typeof r=="object"&&typeof r.toJSON=="function")return qr(r.toJSON());switch(typeof r){case"boolean":case"symbol":return r.toString();case"bigint":return BigInt(r).toString();case"number":return r.toString();case"string":return JSON.stringify(r);case"object":{const t=Object.keys(r);return t.sort(),"{ "+t.map(e=>`${qr(e)}: ${qr(r[e])}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function _t(r,t){return r&&r.code===t}function tc(r){return _t(r,"CALL_EXCEPTION")}function mt(r,t,e){let n=r;{const i=[];if(e){if("message"in e||"code"in e||"name"in e)throw new Error(`value will overwrite populated values: ${qr(e)}`);for(const o in e){if(o==="shortMessage")continue;const a=e[o];i.push(o+"="+qr(a))}}i.push(`code=${t}`),i.push(`version=${lh}`),i.length&&(r+=" ("+i.join(", ")+")")}let s;switch(t){case"INVALID_ARGUMENT":s=new TypeError(r);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":s=new RangeError(r);break;default:s=new Error(r)}return H(s,{code:t}),e&&Object.assign(s,e),s.shortMessage==null&&H(s,{shortMessage:n}),s}function v(r,t,e,n){if(!r)throw mt(t,e,n)}function y(r,t,e,n){v(r,t,"INVALID_ARGUMENT",{argument:e,value:n})}function eu(r,t,e){e==null&&(e=""),e&&(e=": "+e),v(r>=t,"missing arguemnt"+e,"MISSING_ARGUMENT",{count:r,expectedCount:t}),v(r<=t,"too many arguments"+e,"UNEXPECTED_ARGUMENT",{count:r,expectedCount:t})}["NFD","NFC","NFKD","NFKC"].reduce((r,t)=>{try{if("test".normalize(t)!=="test")throw new Error("bad");if(t==="NFD"&&"é".normalize("NFD")!=="é")throw new Error("broken");r.push(t)}catch{}return r},[]);function Hi(r,t,e){if(e==null&&(e=""),r!==t){let n=e,s="new";e&&(n+=".",s+=" "+e),v(!1,`private constructor; use ${n}from* methods`,"UNSUPPORTED_OPERATION",{operation:s})}}function nu(r,t,e){if(r instanceof Uint8Array)return e?new Uint8Array(r):r;if(typeof r=="string"&&r.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){const n=new Uint8Array((r.length-2)/2);let s=2;for(let i=0;i<n.length;i++)n[i]=parseInt(r.substring(s,s+2),16),s+=2;return n}y(!1,"invalid BytesLike value",t||"value",r)}function q(r,t){return nu(r,t,!1)}function Wt(r,t){return nu(r,t,!0)}function ct(r,t){return!(typeof r!="string"||!r.match(/^0x[0-9A-Fa-f]*$/)||typeof t=="number"&&r.length!==2+2*t||t===!0&&r.length%2!==0)}function ec(r){return ct(r,!0)||r instanceof Uint8Array}const Rc="0123456789abcdef";function U(r){const t=q(r);let e="0x";for(let n=0;n<t.length;n++){const s=t[n];e+=Rc[(s&240)>>4]+Rc[s&15]}return e}function Et(r){return"0x"+r.map(t=>U(t).substring(2)).join("")}function is(r){return ct(r,!0)?(r.length-2)/2:q(r).length}function yt(r,t,e){const n=q(r);return e!=null&&e>n.length&&v(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:n,length:n.length,offset:e}),U(n.slice(t??0,e??n.length))}function ru(r,t,e){const n=q(r);v(t>=n.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(n),length:t,offset:t+1});const s=new Uint8Array(t);return s.fill(0),e?s.set(n,t-n.length):s.set(n,0),U(s)}function Ur(r,t){return ru(r,t,!0)}function fh(r,t){return ru(r,t,!1)}const Lo=BigInt(0),Le=BigInt(1),$r=9007199254740991;function go(r,t){const e=Do(r,"value"),n=BigInt(j(t,"width"));if(v(e>>n===Lo,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:r}),e>>n-Le){const s=(Le<<n)-Le;return-((~e&s)+Le)}return e}function su(r,t){let e=L(r,"value");const n=BigInt(j(t,"width")),s=Le<<n-Le;if(e<Lo){e=-e,v(e<=s,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:r});const i=(Le<<n)-Le;return(~e&i)+Le}else v(e<s,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:r});return e}function cr(r,t){const e=Do(r,"value"),n=BigInt(j(t,"bits"));return e&(Le<<n)-Le}function L(r,t){switch(typeof r){case"bigint":return r;case"number":return y(Number.isInteger(r),"underflow",t||"value",r),y(r>=-$r&&r<=$r,"overflow",t||"value",r),BigInt(r);case"string":try{if(r==="")throw new Error("empty string");return r[0]==="-"&&r[1]!=="-"?-BigInt(r.substring(1)):BigInt(r)}catch(e){y(!1,`invalid BigNumberish string: ${e.message}`,t||"value",r)}}y(!1,"invalid BigNumberish value",t||"value",r)}function Do(r,t){const e=L(r,t);return v(e>=Lo,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:r}),e}const Sc="0123456789abcdef";function Mo(r){if(r instanceof Uint8Array){let t="0x0";for(const e of r)t+=Sc[e>>4],t+=Sc[e&15];return BigInt(t)}return L(r)}function j(r,t){switch(typeof r){case"bigint":return y(r>=-$r&&r<=$r,"overflow",t||"value",r),Number(r);case"number":return y(Number.isInteger(r),"underflow",t||"value",r),y(r>=-$r&&r<=$r,"overflow",t||"value",r),r;case"string":try{if(r==="")throw new Error("empty string");return j(BigInt(r),t)}catch(e){y(!1,`invalid numeric string: ${e.message}`,t||"value",r)}}y(!1,"invalid numeric value",t||"value",r)}function hh(r){return j(Mo(r))}function Wn(r,t){let n=Do(r,"value").toString(16);if(t==null)n.length%2&&(n="0"+n);else{const s=j(t,"width");for(v(s*2>=n.length,`value exceeds width (${s} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:r});n.length<s*2;)n="0"+n}return"0x"+n}function Yt(r){const t=Do(r,"value");if(t===Lo)return new Uint8Array([]);let e=t.toString(16);e.length%2&&(e="0"+e);const n=new Uint8Array(e.length/2);for(let s=0;s<n.length;s++){const i=s*2;n[s]=parseInt(e.substring(i,i+2),16)}return n}function ts(r){let t=U(ec(r)?r:Yt(r)).substring(2);for(;t.startsWith("0");)t=t.substring(1);return t===""&&(t="0"),"0x"+t}const Uc="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";BigInt(0);const Fc=BigInt(58);function dh(r){const t=q(r);let e=Mo(t),n="";for(;e;)n=Uc[Number(e%Fc)]+n,e/=Fc;for(let s=0;s<t.length&&!t[s];s++)n=Uc[0]+n;return n}function ph(r){r=atob(r);const t=new Uint8Array(r.length);for(let e=0;e<r.length;e++)t[e]=r.charCodeAt(e);return q(t)}function gh(r){const t=q(r);let e="";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return btoa(e)}var us;class iu{constructor(t,e,n){A(this,"filter");A(this,"emitter");E(this,us);d(this,us,e),H(this,{emitter:t,filter:n})}async removeListener(){l(this,us)!=null&&await this.emitter.off(this.filter,l(this,us))}}us=new WeakMap;function mh(r,t,e,n,s){y(!1,`invalid codepoint at offset ${t}; ${r}`,"bytes",e)}function ou(r,t,e,n,s){if(r==="BAD_PREFIX"||r==="UNEXPECTED_CONTINUE"){let i=0;for(let o=t+1;o<e.length&&e[o]>>6===2;o++)i++;return i}return r==="OVERRUN"?e.length-t-1:0}function yh(r,t,e,n,s){return r==="OVERLONG"?(y(typeof s=="number","invalid bad code point for replacement","badCodepoint",s),n.push(s),0):(n.push(65533),ou(r,t,e))}const wh=Object.freeze({error:mh,ignore:ou,replace:yh});function Ah(r,t){t==null&&(t=wh.error);const e=q(r,"bytes"),n=[];let s=0;for(;s<e.length;){const i=e[s++];if(!(i>>7)){n.push(i);continue}let o=null,a=null;if((i&224)===192)o=1,a=127;else if((i&240)===224)o=2,a=2047;else if((i&248)===240)o=3,a=65535;else{(i&192)===128?s+=t("UNEXPECTED_CONTINUE",s-1,e,n):s+=t("BAD_PREFIX",s-1,e,n);continue}if(s-1+o>=e.length){s+=t("OVERRUN",s-1,e,n);continue}let c=i&(1<<8-o-1)-1;for(let u=0;u<o;u++){let f=e[s];if((f&192)!=128){s+=t("MISSING_CONTINUE",s,e,n),c=null;break}c=c<<6|f&63,s++}if(c!==null){if(c>1114111){s+=t("OUT_OF_RANGE",s-1-o,e,n,c);continue}if(c>=55296&&c<=57343){s+=t("UTF16_SURROGATE",s-1-o,e,n,c);continue}if(c<=a){s+=t("OVERLONG",s-1-o,e,n,c);continue}n.push(c)}}return n}function En(r,t){y(typeof r=="string","invalid string value","str",r);let e=[];for(let n=0;n<r.length;n++){const s=r.charCodeAt(n);if(s<128)e.push(s);else if(s<2048)e.push(s>>6|192),e.push(s&63|128);else if((s&64512)==55296){n++;const i=r.charCodeAt(n);y(n<r.length&&(i&64512)===56320,"invalid surrogate pair","str",r);const o=65536+((s&1023)<<10)+(i&1023);e.push(o>>18|240),e.push(o>>12&63|128),e.push(o>>6&63|128),e.push(o&63|128)}else e.push(s>>12|224),e.push(s>>6&63|128),e.push(s&63|128)}return new Uint8Array(e)}function bh(r){return r.map(t=>t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10&1023)+55296,(t&1023)+56320))).join("")}function mo(r,t){return bh(Ah(r,t))}function au(r){async function t(e,n){v(n==null||!n.cancelled,"request cancelled before sending","CANCELLED");const s=e.url.split(":")[0].toLowerCase();v(s==="http"||s==="https",`unsupported protocol ${s}`,"UNSUPPORTED_OPERATION",{info:{protocol:s},operation:"request"}),v(s==="https"||!e.credentials||e.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let i=null;const o=new AbortController,a=setTimeout(()=>{i=mt("request timeout","TIMEOUT"),o.abort()},e.timeout);n&&n.addListener(()=>{i=mt("request cancelled","CANCELLED"),o.abort()});const c={method:e.method,headers:new Headers(Array.from(e)),body:e.body||void 0,signal:o.signal};let u;try{u=await fetch(e.url,c)}catch(g){throw clearTimeout(a),i||g}clearTimeout(a);const f={};u.headers.forEach((g,w)=>{f[w.toLowerCase()]=g});const h=await u.arrayBuffer(),p=h==null?null:new Uint8Array(h);return{statusCode:u.status,statusMessage:u.statusText,headers:f,body:p}}return t}const Eh=12,xh=250;let Lc=au();const vh=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),Nh=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let qo=!1;async function cu(r,t){try{const e=r.match(vh);if(!e)throw new Error("invalid data");return new Zn(200,"OK",{"content-type":e[1]||"text/plain"},e[2]?ph(e[3]):Ih(e[3]))}catch{return new Zn(599,"BAD REQUEST (invalid data: URI)",{},null,new Yn(r))}}function lu(r){async function t(e,n){try{const s=e.match(Nh);if(!s)throw new Error("invalid link");return new Yn(`${r}${s[2]}`)}catch{return new Zn(599,"BAD REQUEST (invalid IPFS URI)",{},null,new Yn(e))}}return t}const Wi={data:cu,ipfs:lu("https://gateway.ipfs.io/ipfs/")},uu=new WeakMap;var hr,On;class Ph{constructor(t){E(this,hr);E(this,On);d(this,hr,[]),d(this,On,!1),uu.set(t,()=>{if(!l(this,On)){d(this,On,!0);for(const e of l(this,hr))setTimeout(()=>{e()},0);d(this,hr,[])}})}addListener(t){v(!l(this,On),"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),l(this,hr).push(t)}get cancelled(){return l(this,On)}checkSignal(){v(!this.cancelled,"cancelled","CANCELLED",{})}}hr=new WeakMap,On=new WeakMap;function Yi(r){if(r==null)throw new Error("missing signal; should not happen");return r.checkSignal(),r}var fs,hs,Oe,on,ds,ps,Pt,fe,an,dr,pr,gr,Ve,Re,Rn,mr,fi;const ko=class ko{constructor(t){E(this,mr);E(this,fs);E(this,hs);E(this,Oe);E(this,on);E(this,ds);E(this,ps);E(this,Pt);E(this,fe);E(this,an);E(this,dr);E(this,pr);E(this,gr);E(this,Ve);E(this,Re);E(this,Rn);d(this,ps,String(t)),d(this,fs,!1),d(this,hs,!0),d(this,Oe,{}),d(this,on,""),d(this,ds,3e5),d(this,Re,{slotInterval:xh,maxAttempts:Eh}),d(this,Rn,null)}get url(){return l(this,ps)}set url(t){d(this,ps,String(t))}get body(){return l(this,Pt)==null?null:new Uint8Array(l(this,Pt))}set body(t){if(t==null)d(this,Pt,void 0),d(this,fe,void 0);else if(typeof t=="string")d(this,Pt,En(t)),d(this,fe,"text/plain");else if(t instanceof Uint8Array)d(this,Pt,t),d(this,fe,"application/octet-stream");else if(typeof t=="object")d(this,Pt,En(JSON.stringify(t))),d(this,fe,"application/json");else throw new Error("invalid body")}hasBody(){return l(this,Pt)!=null}get method(){return l(this,on)?l(this,on):this.hasBody()?"POST":"GET"}set method(t){t==null&&(t=""),d(this,on,String(t).toUpperCase())}get headers(){const t=Object.assign({},l(this,Oe));return l(this,an)&&(t.authorization=`Basic ${gh(En(l(this,an)))}`),this.allowGzip&&(t["accept-encoding"]="gzip"),t["content-type"]==null&&l(this,fe)&&(t["content-type"]=l(this,fe)),this.body&&(t["content-length"]=String(this.body.length)),t}getHeader(t){return this.headers[t.toLowerCase()]}setHeader(t,e){l(this,Oe)[String(t).toLowerCase()]=String(e)}clearHeaders(){d(this,Oe,{})}[Symbol.iterator](){const t=this.headers,e=Object.keys(t);let n=0;return{next:()=>{if(n<e.length){const s=e[n++];return{value:[s,t[s]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return l(this,an)||null}setCredentials(t,e){y(!t.match(/:/),"invalid basic authentication username","username","[REDACTED]"),d(this,an,`${t}:${e}`)}get allowGzip(){return l(this,hs)}set allowGzip(t){d(this,hs,!!t)}get allowInsecureAuthentication(){return!!l(this,fs)}set allowInsecureAuthentication(t){d(this,fs,!!t)}get timeout(){return l(this,ds)}set timeout(t){y(t>=0,"timeout must be non-zero","timeout",t),d(this,ds,t)}get preflightFunc(){return l(this,dr)||null}set preflightFunc(t){d(this,dr,t)}get processFunc(){return l(this,pr)||null}set processFunc(t){d(this,pr,t)}get retryFunc(){return l(this,gr)||null}set retryFunc(t){d(this,gr,t)}get getUrlFunc(){return l(this,Rn)||Lc}set getUrlFunc(t){d(this,Rn,t)}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${l(this,Pt)?U(l(this,Pt)):"null"}>`}setThrottleParams(t){t.slotInterval!=null&&(l(this,Re).slotInterval=t.slotInterval),t.maxAttempts!=null&&(l(this,Re).maxAttempts=t.maxAttempts)}send(){return v(l(this,Ve)==null,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),d(this,Ve,new Ph(this)),N(this,mr,fi).call(this,0,Dc()+this.timeout,0,this,new Zn(0,"",{},null,this))}cancel(){v(l(this,Ve)!=null,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const t=uu.get(this);if(!t)throw new Error("missing signal; should not happen");t()}redirect(t){const e=this.url.split(":")[0].toLowerCase(),n=t.split(":")[0].toLowerCase();v(this.method==="GET"&&(e!=="https"||n!=="http")&&t.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(t)})`});const s=new ko(t);return s.method="GET",s.allowGzip=this.allowGzip,s.timeout=this.timeout,d(s,Oe,Object.assign({},l(this,Oe))),l(this,Pt)&&d(s,Pt,new Uint8Array(l(this,Pt))),d(s,fe,l(this,fe)),s}clone(){const t=new ko(this.url);return d(t,on,l(this,on)),l(this,Pt)&&d(t,Pt,l(this,Pt)),d(t,fe,l(this,fe)),d(t,Oe,Object.assign({},l(this,Oe))),d(t,an,l(this,an)),this.allowGzip&&(t.allowGzip=!0),t.timeout=this.timeout,this.allowInsecureAuthentication&&(t.allowInsecureAuthentication=!0),d(t,dr,l(this,dr)),d(t,pr,l(this,pr)),d(t,gr,l(this,gr)),d(t,Re,Object.assign({},l(this,Re))),d(t,Rn,l(this,Rn)),t}static lockConfig(){qo=!0}static getGateway(t){return Wi[t.toLowerCase()]||null}static registerGateway(t,e){if(t=t.toLowerCase(),t==="http"||t==="https")throw new Error(`cannot intercept ${t}; use registerGetUrl`);if(qo)throw new Error("gateways locked");Wi[t]=e}static registerGetUrl(t){if(qo)throw new Error("gateways locked");Lc=t}static createGetUrlFunc(t){return au()}static createDataGateway(){return cu}static createIpfsGatewayFunc(t){return lu(t)}};fs=new WeakMap,hs=new WeakMap,Oe=new WeakMap,on=new WeakMap,ds=new WeakMap,ps=new WeakMap,Pt=new WeakMap,fe=new WeakMap,an=new WeakMap,dr=new WeakMap,pr=new WeakMap,gr=new WeakMap,Ve=new WeakMap,Re=new WeakMap,Rn=new WeakMap,mr=new WeakSet,fi=async function(t,e,n,s,i){var f,h,p;if(t>=l(this,Re).maxAttempts)return i.makeServerError("exceeded maximum retry limit");v(Dc()<=e,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:s}),n>0&&await Bh(n);let o=this.clone();const a=(o.url.split(":")[0]||"").toLowerCase();if(a in Wi){const g=await Wi[a](o.url,Yi(l(s,Ve)));if(g instanceof Zn){let w=g;if(this.processFunc){Yi(l(s,Ve));try{w=await this.processFunc(o,w)}catch(m){(m.throttle==null||typeof m.stall!="number")&&w.makeServerError("error in post-processing function",m).assertOk()}}return w}o=g}this.preflightFunc&&(o=await this.preflightFunc(o));const c=await this.getUrlFunc(o,Yi(l(s,Ve)));let u=new Zn(c.statusCode,c.statusMessage,c.headers,c.body,s);if(u.statusCode===301||u.statusCode===302){try{const g=u.headers.location||"";return N(f=o.redirect(g),mr,fi).call(f,t+1,e,0,s,u)}catch{}return u}else if(u.statusCode===429&&(this.retryFunc==null||await this.retryFunc(o,u,t))){const g=u.headers["retry-after"];let w=l(this,Re).slotInterval*Math.trunc(Math.random()*Math.pow(2,t));return typeof g=="string"&&g.match(/^[1-9][0-9]*$/)&&(w=parseInt(g)),N(h=o.clone(),mr,fi).call(h,t+1,e,w,s,u)}if(this.processFunc){Yi(l(s,Ve));try{u=await this.processFunc(o,u)}catch(g){(g.throttle==null||typeof g.stall!="number")&&u.makeServerError("error in post-processing function",g).assertOk();let w=l(this,Re).slotInterval*Math.trunc(Math.random()*Math.pow(2,t));return g.stall>=0&&(w=g.stall),N(p=o.clone(),mr,fi).call(p,t+1,e,w,s,u)}}return u};let Yn=ko;var Ci,ki,Ti,he,gs,yr;const xc=class xc{constructor(t,e,n,s,i){E(this,Ci);E(this,ki);E(this,Ti);E(this,he);E(this,gs);E(this,yr);d(this,Ci,t),d(this,ki,e),d(this,Ti,Object.keys(n).reduce((o,a)=>(o[a.toLowerCase()]=String(n[a]),o),{})),d(this,he,s==null?null:new Uint8Array(s)),d(this,gs,i||null),d(this,yr,{message:""})}toString(){return`<FetchResponse status=${this.statusCode} body=${l(this,he)?U(l(this,he)):"null"}>`}get statusCode(){return l(this,Ci)}get statusMessage(){return l(this,ki)}get headers(){return Object.assign({},l(this,Ti))}get body(){return l(this,he)==null?null:new Uint8Array(l(this,he))}get bodyText(){try{return l(this,he)==null?"":mo(l(this,he))}catch{v(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch{v(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const t=this.headers,e=Object.keys(t);let n=0;return{next:()=>{if(n<e.length){const s=e[n++];return{value:[s,t[s]],done:!1}}return{value:void 0,done:!0}}}}makeServerError(t,e){let n;t?n=`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${t})`:(t=`${this.statusCode} ${this.statusMessage}`,n=`CLIENT ESCALATED SERVER ERROR (${t})`);const s=new xc(599,n,this.headers,this.body,l(this,gs)||void 0);return d(s,yr,{message:t,error:e}),s}throwThrottleError(t,e){e==null?e=-1:y(Number.isInteger(e)&&e>=0,"invalid stall timeout","stall",e);const n=new Error(t||"throttling requests");throw H(n,{stall:e,throttle:!0}),n}getHeader(t){return this.headers[t.toLowerCase()]}hasBody(){return l(this,he)!=null}get request(){return l(this,gs)}ok(){return l(this,yr).message===""&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:t,error:e}=l(this,yr);t===""&&(t=`server response ${this.statusCode} ${this.statusMessage}`);let n=null;this.request&&(n=this.request.url);let s=null;try{l(this,he)&&(s=mo(l(this,he)))}catch{}v(!1,t,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:e,info:{requestUrl:n,responseBody:s,responseStatus:`${this.statusCode} ${this.statusMessage}`}})}};Ci=new WeakMap,ki=new WeakMap,Ti=new WeakMap,he=new WeakMap,gs=new WeakMap,yr=new WeakMap;let Zn=xc;function Dc(){return new Date().getTime()}function Ih(r){return En(r.replace(/%([0-9a-f][0-9a-f])/gi,(t,e)=>String.fromCharCode(parseInt(e,16))))}function Bh(r){return new Promise(t=>setTimeout(t,r))}const Ch=BigInt(-1),Ce=BigInt(0),es=BigInt(1),kh=BigInt(5),Jr={};let os="0000";for(;os.length<80;)os+=os;function er(r){let t=os;for(;t.length<r;)t+=t;return BigInt("1"+t.substring(0,r))}function ci(r,t,e){const n=BigInt(t.width);if(t.signed){const s=es<<n-es;v(e==null||r>=-s&&r<s,"overflow","NUMERIC_FAULT",{operation:e,fault:"overflow",value:r}),r>Ce?r=go(cr(r,n),n):r=-go(cr(-r,n),n)}else{const s=es<<n;v(e==null||r>=0&&r<s,"overflow","NUMERIC_FAULT",{operation:e,fault:"overflow",value:r}),r=(r%s+s)%s&s-es}return r}function $o(r){typeof r=="number"&&(r=`fixed128x${r}`);let t=!0,e=128,n=18;if(typeof r=="string"){if(r!=="fixed")if(r==="ufixed")t=!1;else{const i=r.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);y(i,"invalid fixed format","format",r),t=i[1]!=="u",e=parseInt(i[2]),n=parseInt(i[3])}}else if(r){const i=r,o=(a,c,u)=>i[a]==null?u:(y(typeof i[a]===c,"invalid fixed format ("+a+" not "+c+")","format."+a,i[a]),i[a]);t=o("signed","boolean",t),e=o("width","number",e),n=o("decimals","number",n)}y(e%8===0,"invalid FixedNumber width (not byte aligned)","format.width",e),y(n<=80,"invalid FixedNumber decimals (too large)","format.decimals",n);const s=(t?"":"u")+"fixed"+String(e)+"x"+String(n);return{signed:t,width:e,decimals:n,name:s}}function Th(r,t){let e="";r<Ce&&(e="-",r*=Ch);let n=r.toString();if(t===0)return e+n;for(;n.length<=t;)n=os+n;const s=n.length-t;for(n=n.substring(0,s)+"."+n.substring(s);n[0]==="0"&&n[1]!==".";)n=n.substring(1);for(;n[n.length-1]==="0"&&n[n.length-2]!==".";)n=n.substring(0,n.length-1);return e+n}var Se,rt,Kt,et,nr,tn,wa,Aa,ba,Ea;const Tn=class Tn{constructor(t,e,n){E(this,et);A(this,"format");E(this,Se);E(this,rt);E(this,Kt);A(this,"_value");Hi(t,Jr,"FixedNumber"),d(this,rt,e),d(this,Se,n);const s=Th(e,n.decimals);H(this,{format:n.name,_value:s}),d(this,Kt,er(n.decimals))}get signed(){return l(this,Se).signed}get width(){return l(this,Se).width}get decimals(){return l(this,Se).decimals}get value(){return l(this,rt)}addUnsafe(t){return N(this,et,wa).call(this,t)}add(t){return N(this,et,wa).call(this,t,"add")}subUnsafe(t){return N(this,et,Aa).call(this,t)}sub(t){return N(this,et,Aa).call(this,t,"sub")}mulUnsafe(t){return N(this,et,ba).call(this,t)}mul(t){return N(this,et,ba).call(this,t,"mul")}mulSignal(t){N(this,et,nr).call(this,t);const e=l(this,rt)*l(t,rt);return v(e%l(this,Kt)===Ce,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this}),N(this,et,tn).call(this,e/l(this,Kt),"mulSignal")}divUnsafe(t){return N(this,et,Ea).call(this,t)}div(t){return N(this,et,Ea).call(this,t,"div")}divSignal(t){v(l(t,rt)!==Ce,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),N(this,et,nr).call(this,t);const e=l(this,rt)*l(this,Kt);return v(e%l(t,rt)===Ce,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this}),N(this,et,tn).call(this,e/l(t,rt),"divSignal")}cmp(t){let e=this.value,n=t.value;const s=this.decimals-t.decimals;return s>0?n*=er(s):s<0&&(e*=er(-s)),e<n?-1:e>n?1:0}eq(t){return this.cmp(t)===0}lt(t){return this.cmp(t)<0}lte(t){return this.cmp(t)<=0}gt(t){return this.cmp(t)>0}gte(t){return this.cmp(t)>=0}floor(){let t=l(this,rt);return l(this,rt)<Ce&&(t-=l(this,Kt)-es),t=l(this,rt)/l(this,Kt)*l(this,Kt),N(this,et,tn).call(this,t,"floor")}ceiling(){let t=l(this,rt);return l(this,rt)>Ce&&(t+=l(this,Kt)-es),t=l(this,rt)/l(this,Kt)*l(this,Kt),N(this,et,tn).call(this,t,"ceiling")}round(t){if(t==null&&(t=0),t>=this.decimals)return this;const e=this.decimals-t,n=kh*er(e-1);let s=this.value+n;const i=er(e);return s=s/i*i,ci(s,l(this,Se),"round"),new Tn(Jr,s,l(this,Se))}isZero(){return l(this,rt)===Ce}isNegative(){return l(this,rt)<Ce}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(t){return Tn.fromString(this.toString(),t)}static fromValue(t,e,n){const s=e==null?0:j(e),i=$o(n);let o=L(t,"value");const a=s-i.decimals;if(a>0){const c=er(a);v(o%c===Ce,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:t}),o/=c}else a<0&&(o*=er(-a));return ci(o,i,"fromValue"),new Tn(Jr,o,i)}static fromString(t,e){const n=t.match(/^(-?)([0-9]*)\.?([0-9]*)$/);y(n&&n[2].length+n[3].length>0,"invalid FixedNumber string value","value",t);const s=$o(e);let i=n[2]||"0",o=n[3]||"";for(;o.length<s.decimals;)o+=os;v(o.substring(s.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:t}),o=o.substring(0,s.decimals);const a=BigInt(n[1]+i+o);return ci(a,s,"fromString"),new Tn(Jr,a,s)}static fromBytes(t,e){let n=Mo(q(t,"value"));const s=$o(e);return s.signed&&(n=go(n,s.width)),ci(n,s,"fromBytes"),new Tn(Jr,n,s)}};Se=new WeakMap,rt=new WeakMap,Kt=new WeakMap,et=new WeakSet,nr=function(t){y(this.format===t.format,"incompatible format; use fixedNumber.toFormat","other",t)},tn=function(t,e){return t=ci(t,l(this,Se),e),new Tn(Jr,t,l(this,Se))},wa=function(t,e){return N(this,et,nr).call(this,t),N(this,et,tn).call(this,l(this,rt)+l(t,rt),e)},Aa=function(t,e){return N(this,et,nr).call(this,t),N(this,et,tn).call(this,l(this,rt)-l(t,rt),e)},ba=function(t,e){return N(this,et,nr).call(this,t),N(this,et,tn).call(this,l(this,rt)*l(t,rt)/l(this,Kt),e)},Ea=function(t,e){return v(l(t,rt)!==Ce,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),N(this,et,nr).call(this,t),N(this,et,tn).call(this,l(this,rt)*l(this,Kt)/l(t,rt),e)};let yo=Tn;function Oh(r){let t=r.toString(16);for(;t.length<2;)t="0"+t;return"0x"+t}function Mc(r,t,e){let n=0;for(let s=0;s<e;s++)n=n*256+r[t+s];return n}function Gc(r,t,e,n){const s=[];for(;e<t+1+n;){const i=fu(r,e);s.push(i.result),e+=i.consumed,v(e<=t+1+n,"child data too short","BUFFER_OVERRUN",{buffer:r,length:n,offset:t})}return{consumed:1+n,result:s}}function fu(r,t){v(r.length!==0,"data too short","BUFFER_OVERRUN",{buffer:r,length:0,offset:1});const e=n=>{v(n<=r.length,"data short segment too short","BUFFER_OVERRUN",{buffer:r,length:r.length,offset:n})};if(r[t]>=248){const n=r[t]-247;e(t+1+n);const s=Mc(r,t+1,n);return e(t+1+n+s),Gc(r,t,t+1+n,n+s)}else if(r[t]>=192){const n=r[t]-192;return e(t+1+n),Gc(r,t,t+1,n)}else if(r[t]>=184){const n=r[t]-183;e(t+1+n);const s=Mc(r,t+1,n);e(t+1+n+s);const i=U(r.slice(t+1+n,t+1+n+s));return{consumed:1+n+s,result:i}}else if(r[t]>=128){const n=r[t]-128;e(t+1+n);const s=U(r.slice(t+1,t+1+n));return{consumed:1+n,result:s}}return{consumed:1,result:Oh(r[t])}}function Go(r){const t=q(r,"data"),e=fu(t,0);return y(e.consumed===t.length,"unexpected junk after rlp payload","data",r),e.result}function Hc(r){const t=[];for(;r;)t.unshift(r&255),r>>=8;return t}function hu(r){if(Array.isArray(r)){let n=[];if(r.forEach(function(i){n=n.concat(hu(i))}),n.length<=55)return n.unshift(192+n.length),n;const s=Hc(n.length);return s.unshift(247+s.length),s.concat(n)}const t=Array.prototype.slice.call(q(r,"object"));if(t.length===1&&t[0]<=127)return t;if(t.length<=55)return t.unshift(128+t.length),t;const e=Hc(t.length);return e.unshift(183+e.length),e.concat(t)}const Qc="0123456789abcdef";function Fr(r){let t="0x";for(const e of hu(r))t+=Qc[e>>4],t+=Qc[e&15];return t}function Rh(r,t){let e=18;return e=j(t,"unit"),yo.fromValue(r,e,{decimals:e,width:512}).toString()}function Sh(r,t){y(typeof r=="string","value must be a string","value",r);let e=18;return e=j(t,"unit"),yo.fromString(r,{decimals:e,width:512}).value}function Uh(r){return Rh(r,18)}function Vc(r){return Sh(r,18)}const Xt=32,xa=new Uint8Array(Xt),Fh=["then"],Xi={},du=new WeakMap;function sr(r){return du.get(r)}function _c(r,t){du.set(r,t)}function li(r,t){const e=new Error(`deferred error during ABI decoding triggered accessing ${r}`);throw e.error=t,e}function va(r,t,e){return r.indexOf(null)>=0?t.map((n,s)=>n instanceof Ys?va(sr(n),n,e):n):r.reduce((n,s,i)=>{let o=t.getValue(s);return s in n||(e&&o instanceof Ys&&(o=va(sr(o),o,e)),n[s]=o),n},{})}var ms;const ns=class ns extends Array{constructor(...e){const n=e[0];let s=e[1],i=(e[2]||[]).slice(),o=!0;n!==Xi&&(s=e,i=[],o=!1);super(s.length);E(this,ms);s.forEach((u,f)=>{this[f]=u});const a=i.reduce((u,f)=>(typeof f=="string"&&u.set(f,(u.get(f)||0)+1),u),new Map);if(_c(this,Object.freeze(s.map((u,f)=>{const h=i[f];return h!=null&&a.get(h)===1?h:null}))),d(this,ms,[]),l(this,ms)==null&&l(this,ms),!o)return;Object.freeze(this);const c=new Proxy(this,{get:(u,f,h)=>{if(typeof f=="string"){if(f.match(/^[0-9]+$/)){const g=j(f,"%index");if(g<0||g>=this.length)throw new RangeError("out of result range");const w=u[g];return w instanceof Error&&li(`index ${g}`,w),w}if(Fh.indexOf(f)>=0)return Reflect.get(u,f,h);const p=u[f];if(p instanceof Function)return function(...g){return p.apply(this===h?u:this,g)};if(!(f in u))return u.getValue.apply(this===h?u:this,[f])}return Reflect.get(u,f,h)}});return _c(c,sr(this)),c}toArray(e){const n=[];return this.forEach((s,i)=>{s instanceof Error&&li(`index ${i}`,s),e&&s instanceof ns&&(s=s.toArray(e)),n.push(s)}),n}toObject(e){const n=sr(this);return n.reduce((s,i,o)=>(v(i!=null,`value at index ${o} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),va(n,this,e)),{})}slice(e,n){e==null&&(e=0),e<0&&(e+=this.length,e<0&&(e=0)),n==null&&(n=this.length),n<0&&(n+=this.length,n<0&&(n=0)),n>this.length&&(n=this.length);const s=sr(this),i=[],o=[];for(let a=e;a<n;a++)i.push(this[a]),o.push(s[a]);return new ns(Xi,i,o)}filter(e,n){const s=sr(this),i=[],o=[];for(let a=0;a<this.length;a++){const c=this[a];c instanceof Error&&li(`index ${a}`,c),e.call(n,c,a,this)&&(i.push(c),o.push(s[a]))}return new ns(Xi,i,o)}map(e,n){const s=[];for(let i=0;i<this.length;i++){const o=this[i];o instanceof Error&&li(`index ${i}`,o),s.push(e.call(n,o,i,this))}return s}getValue(e){const n=sr(this).indexOf(e);if(n===-1)return;const s=this[n];return s instanceof Error&&li(`property ${JSON.stringify(e)}`,s.error),s}static fromItems(e,n){return new ns(Xi,e,n)}};ms=new WeakMap;let Ys=ns;function Jc(r){let t=Yt(r);return v(t.length<=Xt,"value out-of-bounds","BUFFER_OVERRUN",{buffer:t,length:Xt,offset:t.length}),t.length!==Xt&&(t=Wt(Et([xa.slice(t.length%Xt),t]))),t}class Nn{constructor(t,e,n,s){A(this,"name");A(this,"type");A(this,"localName");A(this,"dynamic");H(this,{name:t,type:e,localName:n,dynamic:s},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(t,e){y(!1,t,this.localName,e)}}var cn,wr,ys,so;class Na{constructor(){E(this,ys);E(this,cn);E(this,wr);d(this,cn,[]),d(this,wr,0)}get data(){return Et(l(this,cn))}get length(){return l(this,wr)}appendWriter(t){return N(this,ys,so).call(this,Wt(t.data))}writeBytes(t){let e=Wt(t);const n=e.length%Xt;return n&&(e=Wt(Et([e,xa.slice(n)]))),N(this,ys,so).call(this,e)}writeValue(t){return N(this,ys,so).call(this,Jc(t))}writeUpdatableValue(){const t=l(this,cn).length;return l(this,cn).push(xa),d(this,wr,l(this,wr)+Xt),e=>{l(this,cn)[t]=Jc(e)}}}cn=new WeakMap,wr=new WeakMap,ys=new WeakSet,so=function(t){return l(this,cn).push(t),d(this,wr,l(this,wr)+t.length),t.length};var ee,de,Ar,br,Sn,Hr,Ia,pu;const vc=class vc{constructor(t,e,n){E(this,Hr);A(this,"allowLoose");E(this,ee);E(this,de);E(this,Ar);E(this,br);E(this,Sn);H(this,{allowLoose:!!e}),d(this,ee,Wt(t)),d(this,Ar,0),d(this,br,null),d(this,Sn,n??1024),d(this,de,0)}get data(){return U(l(this,ee))}get dataLength(){return l(this,ee).length}get consumed(){return l(this,de)}get bytes(){return new Uint8Array(l(this,ee))}subReader(t){const e=new vc(l(this,ee).slice(l(this,de)+t),this.allowLoose,l(this,Sn));return d(e,br,this),e}readBytes(t,e){let n=N(this,Hr,pu).call(this,0,t,!!e);return N(this,Hr,Ia).call(this,t),d(this,de,l(this,de)+n.length),n.slice(0,t)}readValue(){return Mo(this.readBytes(Xt))}readIndex(){return hh(this.readBytes(Xt))}};ee=new WeakMap,de=new WeakMap,Ar=new WeakMap,br=new WeakMap,Sn=new WeakMap,Hr=new WeakSet,Ia=function(t){var e;if(l(this,br))return N(e=l(this,br),Hr,Ia).call(e,t);d(this,Ar,l(this,Ar)+t),v(l(this,Sn)<1||l(this,Ar)<=l(this,Sn)*this.dataLength,`compressed ABI data exceeds inflation ratio of ${l(this,Sn)} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:Wt(l(this,ee)),offset:l(this,de),length:t,info:{bytesRead:l(this,Ar),dataLength:this.dataLength}})},pu=function(t,e,n){let s=Math.ceil(e/Xt)*Xt;return l(this,de)+s>l(this,ee).length&&(this.allowLoose&&n&&l(this,de)+e<=l(this,ee).length?s=e:v(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:Wt(l(this,ee)),length:l(this,ee).length,offset:l(this,de)+s})),l(this,ee).slice(l(this,de),l(this,de)+s)};let Pa=vc;function wo(r){if(!Number.isSafeInteger(r)||r<0)throw new Error(`Wrong positive integer: ${r}`)}function nc(r,...t){if(!(r instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(r.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${r.length}`)}function Lh(r){if(typeof r!="function"||typeof r.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");wo(r.outputLen),wo(r.blockLen)}function Xs(r,t=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(t&&r.finished)throw new Error("Hash#digest() has already been called")}function gu(r,t){nc(r);const e=t.outputLen;if(r.length<e)throw new Error(`digestInto() expects output buffer of length at least ${e}`)}const ta=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const mu=r=>r instanceof Uint8Array,Dh=r=>new Uint32Array(r.buffer,r.byteOffset,Math.floor(r.byteLength/4)),ea=r=>new DataView(r.buffer,r.byteOffset,r.byteLength),Qe=(r,t)=>r<<32-t|r>>>t,Mh=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Mh)throw new Error("Non little-endian hardware is not supported");function Gh(r){if(typeof r!="string")throw new Error(`utf8ToBytes expected string, got ${typeof r}`);return new Uint8Array(new TextEncoder().encode(r))}function Ho(r){if(typeof r=="string"&&(r=Gh(r)),!mu(r))throw new Error(`expected Uint8Array, got ${typeof r}`);return r}function Hh(...r){const t=new Uint8Array(r.reduce((n,s)=>n+s.length,0));let e=0;return r.forEach(n=>{if(!mu(n))throw new Error("Uint8Array expected");t.set(n,e),e+=n.length}),t}class rc{clone(){return this._cloneInto()}}function sc(r){const t=n=>r().update(Ho(n)).digest(),e=r();return t.outputLen=e.outputLen,t.blockLen=e.blockLen,t.create=()=>r(),t}function Qh(r=32){if(ta&&typeof ta.getRandomValues=="function")return ta.getRandomValues(new Uint8Array(r));throw new Error("crypto.getRandomValues must be defined")}class yu extends rc{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,Lh(t);const n=Ho(e);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(n.length>s?t.create().update(n).digest():n);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=t.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(t){return Xs(this),this.iHash.update(t),this}digestInto(t){Xs(this),nc(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:n,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return t=t,t.finished=s,t.destroyed=i,t.blockLen=o,t.outputLen=a,t.oHash=e._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const wu=(r,t,e)=>new yu(r,t).update(e).digest();wu.create=(r,t)=>new yu(r,t);function Vh(r,t,e,n){if(typeof r.setBigUint64=="function")return r.setBigUint64(t,e,n);const s=BigInt(32),i=BigInt(4294967295),o=Number(e>>s&i),a=Number(e&i),c=n?4:0,u=n?0:4;r.setUint32(t+c,o,n),r.setUint32(t+u,a,n)}class Au extends rc{constructor(t,e,n,s){super(),this.blockLen=t,this.outputLen=e,this.padOffset=n,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=ea(this.buffer)}update(t){Xs(this);const{view:e,buffer:n,blockLen:s}=this;t=Ho(t);const i=t.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=ea(t);for(;s<=i-o;o+=s)this.process(c,o);continue}n.set(t.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Xs(this),gu(t,this),this.finished=!0;const{buffer:e,view:n,blockLen:s,isLE:i}=this;let{pos:o}=this;e[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(n,0),o=0);for(let h=o;h<s;h++)e[h]=0;Vh(n,s-8,BigInt(this.length*8),i),this.process(n,0);const a=ea(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,f=this.get();if(u>f.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<u;h++)a.setUint32(4*h,f[h],i)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const n=t.slice(0,e);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:n,length:s,finished:i,destroyed:o,pos:a}=this;return t.length=s,t.pos=a,t.finished=i,t.destroyed=o,s%e&&t.buffer.set(n),t}}const _h=(r,t,e)=>r&t^~r&e,Jh=(r,t,e)=>r&t^r&e^t&e,zh=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Pn=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),In=new Uint32Array(64);class Kh extends Au{constructor(){super(64,32,8,!1),this.A=Pn[0]|0,this.B=Pn[1]|0,this.C=Pn[2]|0,this.D=Pn[3]|0,this.E=Pn[4]|0,this.F=Pn[5]|0,this.G=Pn[6]|0,this.H=Pn[7]|0}get(){const{A:t,B:e,C:n,D:s,E:i,F:o,G:a,H:c}=this;return[t,e,n,s,i,o,a,c]}set(t,e,n,s,i,o,a,c){this.A=t|0,this.B=e|0,this.C=n|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(t,e){for(let h=0;h<16;h++,e+=4)In[h]=t.getUint32(e,!1);for(let h=16;h<64;h++){const p=In[h-15],g=In[h-2],w=Qe(p,7)^Qe(p,18)^p>>>3,m=Qe(g,17)^Qe(g,19)^g>>>10;In[h]=m+In[h-7]+w+In[h-16]|0}let{A:n,B:s,C:i,D:o,E:a,F:c,G:u,H:f}=this;for(let h=0;h<64;h++){const p=Qe(a,6)^Qe(a,11)^Qe(a,25),g=f+p+_h(a,c,u)+zh[h]+In[h]|0,m=(Qe(n,2)^Qe(n,13)^Qe(n,22))+Jh(n,s,i)|0;f=u,u=c,c=a,a=o+g|0,o=i,i=s,s=n,n=g+m|0}n=n+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,f=f+this.H|0,this.set(n,s,i,o,a,c,u,f)}roundClean(){In.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const bu=sc(()=>new Kh),qi=BigInt(2**32-1),Ba=BigInt(32);function Eu(r,t=!1){return t?{h:Number(r&qi),l:Number(r>>Ba&qi)}:{h:Number(r>>Ba&qi)|0,l:Number(r&qi)|0}}function xu(r,t=!1){let e=new Uint32Array(r.length),n=new Uint32Array(r.length);for(let s=0;s<r.length;s++){const{h:i,l:o}=Eu(r[s],t);[e[s],n[s]]=[i,o]}return[e,n]}const jh=(r,t)=>BigInt(r>>>0)<<Ba|BigInt(t>>>0),Zh=(r,t,e)=>r>>>e,Wh=(r,t,e)=>r<<32-e|t>>>e,Yh=(r,t,e)=>r>>>e|t<<32-e,Xh=(r,t,e)=>r<<32-e|t>>>e,qh=(r,t,e)=>r<<64-e|t>>>e-32,$h=(r,t,e)=>r>>>e-32|t<<64-e,td=(r,t)=>t,ed=(r,t)=>r,vu=(r,t,e)=>r<<e|t>>>32-e,Nu=(r,t,e)=>t<<e|r>>>32-e,Pu=(r,t,e)=>t<<e-32|r>>>64-e,Iu=(r,t,e)=>r<<e-32|t>>>64-e;function nd(r,t,e,n){const s=(t>>>0)+(n>>>0);return{h:r+e+(s/2**32|0)|0,l:s|0}}const rd=(r,t,e)=>(r>>>0)+(t>>>0)+(e>>>0),sd=(r,t,e,n)=>t+e+n+(r/2**32|0)|0,id=(r,t,e,n)=>(r>>>0)+(t>>>0)+(e>>>0)+(n>>>0),od=(r,t,e,n,s)=>t+e+n+s+(r/2**32|0)|0,ad=(r,t,e,n,s)=>(r>>>0)+(t>>>0)+(e>>>0)+(n>>>0)+(s>>>0),cd=(r,t,e,n,s,i)=>t+e+n+s+i+(r/2**32|0)|0,Z={fromBig:Eu,split:xu,toBig:jh,shrSH:Zh,shrSL:Wh,rotrSH:Yh,rotrSL:Xh,rotrBH:qh,rotrBL:$h,rotr32H:td,rotr32L:ed,rotlSH:vu,rotlSL:Nu,rotlBH:Pu,rotlBL:Iu,add:nd,add3L:rd,add3H:sd,add4L:id,add4H:od,add5H:cd,add5L:ad},[ld,ud]=Z.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(r=>BigInt(r))),Bn=new Uint32Array(80),Cn=new Uint32Array(80);class fd extends Au{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:e,Bh:n,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:u,El:f,Fh:h,Fl:p,Gh:g,Gl:w,Hh:m,Hl:b}=this;return[t,e,n,s,i,o,a,c,u,f,h,p,g,w,m,b]}set(t,e,n,s,i,o,a,c,u,f,h,p,g,w,m,b){this.Ah=t|0,this.Al=e|0,this.Bh=n|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=u|0,this.El=f|0,this.Fh=h|0,this.Fl=p|0,this.Gh=g|0,this.Gl=w|0,this.Hh=m|0,this.Hl=b|0}process(t,e){for(let P=0;P<16;P++,e+=4)Bn[P]=t.getUint32(e),Cn[P]=t.getUint32(e+=4);for(let P=16;P<80;P++){const M=Bn[P-15]|0,O=Cn[P-15]|0,C=Z.rotrSH(M,O,1)^Z.rotrSH(M,O,8)^Z.shrSH(M,O,7),k=Z.rotrSL(M,O,1)^Z.rotrSL(M,O,8)^Z.shrSL(M,O,7),T=Bn[P-2]|0,V=Cn[P-2]|0,D=Z.rotrSH(T,V,19)^Z.rotrBH(T,V,61)^Z.shrSH(T,V,6),W=Z.rotrSL(T,V,19)^Z.rotrBL(T,V,61)^Z.shrSL(T,V,6),it=Z.add4L(k,W,Cn[P-7],Cn[P-16]),lt=Z.add4H(it,C,D,Bn[P-7],Bn[P-16]);Bn[P]=lt|0,Cn[P]=it|0}let{Ah:n,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:u,Dl:f,Eh:h,El:p,Fh:g,Fl:w,Gh:m,Gl:b,Hh:x,Hl:B}=this;for(let P=0;P<80;P++){const M=Z.rotrSH(h,p,14)^Z.rotrSH(h,p,18)^Z.rotrBH(h,p,41),O=Z.rotrSL(h,p,14)^Z.rotrSL(h,p,18)^Z.rotrBL(h,p,41),C=h&g^~h&m,k=p&w^~p&b,T=Z.add5L(B,O,k,ud[P],Cn[P]),V=Z.add5H(T,x,M,C,ld[P],Bn[P]),D=T|0,W=Z.rotrSH(n,s,28)^Z.rotrBH(n,s,34)^Z.rotrBH(n,s,39),it=Z.rotrSL(n,s,28)^Z.rotrBL(n,s,34)^Z.rotrBL(n,s,39),lt=n&i^n&a^i&a,Nt=s&o^s&c^o&c;x=m|0,B=b|0,m=g|0,b=w|0,g=h|0,w=p|0,{h,l:p}=Z.add(u|0,f|0,V|0,D|0),u=a|0,f=c|0,a=i|0,c=o|0,i=n|0,o=s|0;const I=Z.add3L(D,it,Nt);n=Z.add3H(I,V,W,lt),s=I|0}({h:n,l:s}=Z.add(this.Ah|0,this.Al|0,n|0,s|0)),{h:i,l:o}=Z.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=Z.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:u,l:f}=Z.add(this.Dh|0,this.Dl|0,u|0,f|0),{h,l:p}=Z.add(this.Eh|0,this.El|0,h|0,p|0),{h:g,l:w}=Z.add(this.Fh|0,this.Fl|0,g|0,w|0),{h:m,l:b}=Z.add(this.Gh|0,this.Gl|0,m|0,b|0),{h:x,l:B}=Z.add(this.Hh|0,this.Hl|0,x|0,B|0),this.set(n,s,i,o,a,c,u,f,h,p,g,w,m,b,x,B)}roundClean(){Bn.fill(0),Cn.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const hd=sc(()=>new fd);function dd(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}const zc=dd();zc.crypto||zc.msCrypto;function pd(r){switch(r){case"sha256":return bu.create();case"sha512":return hd.create()}y(!1,"invalid hashing algorithm name","algorithm",r)}const[Bu,Cu,ku]=[[],[],[]],gd=BigInt(0),ui=BigInt(1),md=BigInt(2),yd=BigInt(7),wd=BigInt(256),Ad=BigInt(113);for(let r=0,t=ui,e=1,n=0;r<24;r++){[e,n]=[n,(2*e+3*n)%5],Bu.push(2*(5*n+e)),Cu.push((r+1)*(r+2)/2%64);let s=gd;for(let i=0;i<7;i++)t=(t<<ui^(t>>yd)*Ad)%wd,t&md&&(s^=ui<<(ui<<BigInt(i))-ui);ku.push(s)}const[bd,Ed]=xu(ku,!0),Kc=(r,t,e)=>e>32?Pu(r,t,e):vu(r,t,e),jc=(r,t,e)=>e>32?Iu(r,t,e):Nu(r,t,e);function xd(r,t=24){const e=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let o=0;o<10;o++)e[o]=r[o]^r[o+10]^r[o+20]^r[o+30]^r[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,u=e[c],f=e[c+1],h=Kc(u,f,1)^e[a],p=jc(u,f,1)^e[a+1];for(let g=0;g<50;g+=10)r[o+g]^=h,r[o+g+1]^=p}let s=r[2],i=r[3];for(let o=0;o<24;o++){const a=Cu[o],c=Kc(s,i,a),u=jc(s,i,a),f=Bu[o];s=r[f],i=r[f+1],r[f]=c,r[f+1]=u}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)e[a]=r[o+a];for(let a=0;a<10;a++)r[o+a]^=~e[(a+2)%10]&e[(a+4)%10]}r[0]^=bd[n],r[1]^=Ed[n]}e.fill(0)}class ic extends rc{constructor(t,e,n,s=!1,i=24){if(super(),this.blockLen=t,this.suffix=e,this.outputLen=n,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,wo(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=Dh(this.state)}keccak(){xd(this.state32,this.rounds),this.posOut=0,this.pos=0}update(t){Xs(this);const{blockLen:e,state:n}=this;t=Ho(t);const s=t.length;for(let i=0;i<s;){const o=Math.min(e-this.pos,s-i);for(let a=0;a<o;a++)n[this.pos++]^=t[i++];this.pos===e&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:e,pos:n,blockLen:s}=this;t[n]^=e,e&128&&n===s-1&&this.keccak(),t[s-1]^=128,this.keccak()}writeInto(t){Xs(this,!1),nc(t),this.finish();const e=this.state,{blockLen:n}=this;for(let s=0,i=t.length;s<i;){this.posOut>=n&&this.keccak();const o=Math.min(n-this.posOut,i-s);t.set(e.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return wo(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(gu(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){const{blockLen:e,suffix:n,outputLen:s,rounds:i,enableXOF:o}=this;return t||(t=new ic(e,n,s,o,i)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=i,t.suffix=n,t.outputLen=s,t.enableXOF=o,t.destroyed=this.destroyed,t}}const vd=(r,t,e)=>sc(()=>new ic(t,r,e)),Nd=vd(1,136,256/8);let Tu=!1;const Ou=function(r){return Nd(r)};let Ru=Ou;function vt(r){const t=q(r,"data");return U(Ru(t))}vt._=Ou;vt.lock=function(){Tu=!0};vt.register=function(r){if(Tu)throw new TypeError("keccak256 is locked");Ru=r};Object.freeze(vt);const Su=function(r){return pd("sha256").update(r).digest()};let Uu=Su,Fu=!1;function si(r){const t=q(r,"data");return U(Uu(t))}si._=Su;si.lock=function(){Fu=!0};si.register=function(r){if(Fu)throw new Error("sha256 is locked");Uu=r};Object.freeze(si);Object.freeze(si);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Lu=BigInt(0),Qo=BigInt(1),Pd=BigInt(2),Vo=r=>r instanceof Uint8Array,Id=Array.from({length:256},(r,t)=>t.toString(16).padStart(2,"0"));function qs(r){if(!Vo(r))throw new Error("Uint8Array expected");let t="";for(let e=0;e<r.length;e++)t+=Id[r[e]];return t}function Du(r){const t=r.toString(16);return t.length&1?`0${t}`:t}function oc(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);return BigInt(r===""?"0":`0x${r}`)}function $s(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);const t=r.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const e=new Uint8Array(t/2);for(let n=0;n<e.length;n++){const s=n*2,i=r.slice(s,s+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");e[n]=o}return e}function Rr(r){return oc(qs(r))}function ac(r){if(!Vo(r))throw new Error("Uint8Array expected");return oc(qs(Uint8Array.from(r).reverse()))}function ti(r,t){return $s(r.toString(16).padStart(t*2,"0"))}function cc(r,t){return ti(r,t).reverse()}function Bd(r){return $s(Du(r))}function Te(r,t,e){let n;if(typeof t=="string")try{n=$s(t)}catch(i){throw new Error(`${r} must be valid hex string, got "${t}". Cause: ${i}`)}else if(Vo(t))n=Uint8Array.from(t);else throw new Error(`${r} must be hex string or Uint8Array`);const s=n.length;if(typeof e=="number"&&s!==e)throw new Error(`${r} expected ${e} bytes, got ${s}`);return n}function wi(...r){const t=new Uint8Array(r.reduce((n,s)=>n+s.length,0));let e=0;return r.forEach(n=>{if(!Vo(n))throw new Error("Uint8Array expected");t.set(n,e),e+=n.length}),t}function Cd(r,t){if(r.length!==t.length)return!1;for(let e=0;e<r.length;e++)if(r[e]!==t[e])return!1;return!0}function kd(r){if(typeof r!="string")throw new Error(`utf8ToBytes expected string, got ${typeof r}`);return new Uint8Array(new TextEncoder().encode(r))}function Td(r){let t;for(t=0;r>Lu;r>>=Qo,t+=1);return t}function Od(r,t){return r>>BigInt(t)&Qo}const Rd=(r,t,e)=>r|(e?Qo:Lu)<<BigInt(t),lc=r=>(Pd<<BigInt(r-1))-Qo,na=r=>new Uint8Array(r),Zc=r=>Uint8Array.from(r);function Mu(r,t,e){if(typeof r!="number"||r<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof e!="function")throw new Error("hmacFn must be a function");let n=na(r),s=na(r),i=0;const o=()=>{n.fill(1),s.fill(0),i=0},a=(...h)=>e(s,n,...h),c=(h=na())=>{s=a(Zc([0]),h),n=a(),h.length!==0&&(s=a(Zc([1]),h),n=a())},u=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let h=0;const p=[];for(;h<t;){n=a();const g=n.slice();p.push(g),h+=n.length}return wi(...p)};return(h,p)=>{o(),c(h);let g;for(;!(g=p(u()));)c();return o(),g}}const Sd={bigint:r=>typeof r=="bigint",function:r=>typeof r=="function",boolean:r=>typeof r=="boolean",string:r=>typeof r=="string",stringOrUint8Array:r=>typeof r=="string"||r instanceof Uint8Array,isSafeInteger:r=>Number.isSafeInteger(r),array:r=>Array.isArray(r),field:(r,t)=>t.Fp.isValid(r),hash:r=>typeof r=="function"&&Number.isSafeInteger(r.outputLen)};function Qi(r,t,e={}){const n=(s,i,o)=>{const a=Sd[i];if(typeof a!="function")throw new Error(`Invalid validator "${i}", expected function`);const c=r[s];if(!(o&&c===void 0)&&!a(c,r))throw new Error(`Invalid param ${String(s)}=${c} (${typeof c}), expected ${i}`)};for(const[s,i]of Object.entries(t))n(s,i,!1);for(const[s,i]of Object.entries(e))n(s,i,!0);return r}const Ud=Object.freeze(Object.defineProperty({__proto__:null,bitGet:Od,bitLen:Td,bitMask:lc,bitSet:Rd,bytesToHex:qs,bytesToNumberBE:Rr,bytesToNumberLE:ac,concatBytes:wi,createHmacDrbg:Mu,ensureBytes:Te,equalBytes:Cd,hexToBytes:$s,hexToNumber:oc,numberToBytesBE:ti,numberToBytesLE:cc,numberToHexUnpadded:Du,numberToVarBytesBE:Bd,utf8ToBytes:kd,validateObject:Qi},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Bt=BigInt(0),At=BigInt(1),ir=BigInt(2),Fd=BigInt(3),Ca=BigInt(4),Wc=BigInt(5),Yc=BigInt(8);BigInt(9);BigInt(16);function re(r,t){const e=r%t;return e>=Bt?e:t+e}function Ld(r,t,e){if(e<=Bt||t<Bt)throw new Error("Expected power/modulo > 0");if(e===At)return Bt;let n=At;for(;t>Bt;)t&At&&(n=n*r%e),r=r*r%e,t>>=At;return n}function we(r,t,e){let n=r;for(;t-- >Bt;)n*=n,n%=e;return n}function ka(r,t){if(r===Bt||t<=Bt)throw new Error(`invert: expected positive integers, got n=${r} mod=${t}`);let e=re(r,t),n=t,s=Bt,i=At;for(;e!==Bt;){const a=n/e,c=n%e,u=s-i*a;n=e,e=c,s=i,i=u}if(n!==At)throw new Error("invert: does not exist");return re(s,t)}function Dd(r){const t=(r-At)/ir;let e,n,s;for(e=r-At,n=0;e%ir===Bt;e/=ir,n++);for(s=ir;s<r&&Ld(s,t,r)!==r-At;s++);if(n===1){const o=(r+At)/Ca;return function(c,u){const f=c.pow(u,o);if(!c.eql(c.sqr(f),u))throw new Error("Cannot find square root");return f}}const i=(e+At)/ir;return function(a,c){if(a.pow(c,t)===a.neg(a.ONE))throw new Error("Cannot find square root");let u=n,f=a.pow(a.mul(a.ONE,s),e),h=a.pow(c,i),p=a.pow(c,e);for(;!a.eql(p,a.ONE);){if(a.eql(p,a.ZERO))return a.ZERO;let g=1;for(let m=a.sqr(p);g<u&&!a.eql(m,a.ONE);g++)m=a.sqr(m);const w=a.pow(f,At<<BigInt(u-g-1));f=a.sqr(w),h=a.mul(h,w),p=a.mul(p,f),u=g}return h}}function Md(r){if(r%Ca===Fd){const t=(r+At)/Ca;return function(n,s){const i=n.pow(s,t);if(!n.eql(n.sqr(i),s))throw new Error("Cannot find square root");return i}}if(r%Yc===Wc){const t=(r-Wc)/Yc;return function(n,s){const i=n.mul(s,ir),o=n.pow(i,t),a=n.mul(s,o),c=n.mul(n.mul(a,ir),o),u=n.mul(a,n.sub(c,n.ONE));if(!n.eql(n.sqr(u),s))throw new Error("Cannot find square root");return u}}return Dd(r)}const Gd=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Hd(r){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},e=Gd.reduce((n,s)=>(n[s]="function",n),t);return Qi(r,e)}function Qd(r,t,e){if(e<Bt)throw new Error("Expected power > 0");if(e===Bt)return r.ONE;if(e===At)return t;let n=r.ONE,s=t;for(;e>Bt;)e&At&&(n=r.mul(n,s)),s=r.sqr(s),e>>=At;return n}function Vd(r,t){const e=new Array(t.length),n=t.reduce((i,o,a)=>r.is0(o)?i:(e[a]=i,r.mul(i,o)),r.ONE),s=r.inv(n);return t.reduceRight((i,o,a)=>r.is0(o)?i:(e[a]=r.mul(i,e[a]),r.mul(i,o)),s),e}function Gu(r,t){const e=t!==void 0?t:r.toString(2).length,n=Math.ceil(e/8);return{nBitLength:e,nByteLength:n}}function _d(r,t,e=!1,n={}){if(r<=Bt)throw new Error(`Expected Field ORDER > 0, got ${r}`);const{nBitLength:s,nByteLength:i}=Gu(r,t);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=Md(r),a=Object.freeze({ORDER:r,BITS:s,BYTES:i,MASK:lc(s),ZERO:Bt,ONE:At,create:c=>re(c,r),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return Bt<=c&&c<r},is0:c=>c===Bt,isOdd:c=>(c&At)===At,neg:c=>re(-c,r),eql:(c,u)=>c===u,sqr:c=>re(c*c,r),add:(c,u)=>re(c+u,r),sub:(c,u)=>re(c-u,r),mul:(c,u)=>re(c*u,r),pow:(c,u)=>Qd(a,c,u),div:(c,u)=>re(c*ka(u,r),r),sqrN:c=>c*c,addN:(c,u)=>c+u,subN:(c,u)=>c-u,mulN:(c,u)=>c*u,inv:c=>ka(c,r),sqrt:n.sqrt||(c=>o(a,c)),invertBatch:c=>Vd(a,c),cmov:(c,u,f)=>f?u:c,toBytes:c=>e?cc(c,i):ti(c,i),fromBytes:c=>{if(c.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${c.length}`);return e?ac(c):Rr(c)}});return Object.freeze(a)}function Hu(r){if(typeof r!="bigint")throw new Error("field order must be bigint");const t=r.toString(2).length;return Math.ceil(t/8)}function Qu(r){const t=Hu(r);return t+Math.ceil(t/2)}function Jd(r,t,e=!1){const n=r.length,s=Hu(t),i=Qu(t);if(n<16||n<i||n>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${n}`);const o=e?Rr(r):ac(r),a=re(o,t-At)+At;return e?cc(a,s):ti(a,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const zd=BigInt(0),ra=BigInt(1);function Kd(r,t){const e=(s,i)=>{const o=i.negate();return s?o:i},n=s=>{const i=Math.ceil(t/s)+1,o=2**(s-1);return{windows:i,windowSize:o}};return{constTimeNegate:e,unsafeLadder(s,i){let o=r.ZERO,a=s;for(;i>zd;)i&ra&&(o=o.add(a)),a=a.double(),i>>=ra;return o},precomputeWindow(s,i){const{windows:o,windowSize:a}=n(i),c=[];let u=s,f=u;for(let h=0;h<o;h++){f=u,c.push(f);for(let p=1;p<a;p++)f=f.add(u),c.push(f);u=f.double()}return c},wNAF(s,i,o){const{windows:a,windowSize:c}=n(s);let u=r.ZERO,f=r.BASE;const h=BigInt(2**s-1),p=2**s,g=BigInt(s);for(let w=0;w<a;w++){const m=w*c;let b=Number(o&h);o>>=g,b>c&&(b-=p,o+=ra);const x=m,B=m+Math.abs(b)-1,P=w%2!==0,M=b<0;b===0?f=f.add(e(P,i[x])):u=u.add(e(M,i[B]))}return{p:u,f}},wNAFCached(s,i,o,a){const c=s._WINDOW_SIZE||1;let u=i.get(s);return u||(u=this.precomputeWindow(s,c),c!==1&&i.set(s,a(u))),this.wNAF(c,u,o)}}}function Vu(r){return Hd(r.Fp),Qi(r,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Gu(r.n,r.nBitLength),...r,p:r.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function jd(r){const t=Vu(r);Qi(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:e,Fp:n,a:s}=t;if(e){if(!n.eql(s,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof e!="object"||typeof e.beta!="bigint"||typeof e.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}const{bytesToNumberBE:Zd,hexToBytes:Wd}=Ud,lr={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(r){const{Err:t}=lr;if(r.length<2||r[0]!==2)throw new t("Invalid signature integer tag");const e=r[1],n=r.subarray(2,e+2);if(!e||n.length!==e)throw new t("Invalid signature integer: wrong length");if(n[0]&128)throw new t("Invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new t("Invalid signature integer: unnecessary leading zero");return{d:Zd(n),l:r.subarray(e+2)}},toSig(r){const{Err:t}=lr,e=typeof r=="string"?Wd(r):r;if(!(e instanceof Uint8Array))throw new Error("ui8a expected");let n=e.length;if(n<2||e[0]!=48)throw new t("Invalid signature tag");if(e[1]!==n-2)throw new t("Invalid signature: incorrect length");const{d:s,l:i}=lr._parseInt(e.subarray(2)),{d:o,l:a}=lr._parseInt(i);if(a.length)throw new t("Invalid signature: left bytes after parsing");return{r:s,s:o}},hexFromSig(r){const t=u=>Number.parseInt(u[0],16)&8?"00"+u:u,e=u=>{const f=u.toString(16);return f.length&1?`0${f}`:f},n=t(e(r.s)),s=t(e(r.r)),i=n.length/2,o=s.length/2,a=e(i),c=e(o);return`30${e(o+i+4)}02${c}${s}02${a}${n}`}},An=BigInt(0),Pe=BigInt(1);BigInt(2);const Xc=BigInt(3);BigInt(4);function Yd(r){const t=jd(r),{Fp:e}=t,n=t.toBytes||((w,m,b)=>{const x=m.toAffine();return wi(Uint8Array.from([4]),e.toBytes(x.x),e.toBytes(x.y))}),s=t.fromBytes||(w=>{const m=w.subarray(1),b=e.fromBytes(m.subarray(0,e.BYTES)),x=e.fromBytes(m.subarray(e.BYTES,2*e.BYTES));return{x:b,y:x}});function i(w){const{a:m,b}=t,x=e.sqr(w),B=e.mul(x,w);return e.add(e.add(B,e.mul(w,m)),b)}if(!e.eql(e.sqr(t.Gy),i(t.Gx)))throw new Error("bad generator point: equation left != right");function o(w){return typeof w=="bigint"&&An<w&&w<t.n}function a(w){if(!o(w))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(w){const{allowedPrivateKeyLengths:m,nByteLength:b,wrapPrivateKey:x,n:B}=t;if(m&&typeof w!="bigint"){if(w instanceof Uint8Array&&(w=qs(w)),typeof w!="string"||!m.includes(w.length))throw new Error("Invalid key");w=w.padStart(b*2,"0")}let P;try{P=typeof w=="bigint"?w:Rr(Te("private key",w,b))}catch{throw new Error(`private key must be ${b} bytes, hex or bigint, not ${typeof w}`)}return x&&(P=re(P,B)),a(P),P}const u=new Map;function f(w){if(!(w instanceof h))throw new Error("ProjectivePoint expected")}class h{constructor(m,b,x){if(this.px=m,this.py=b,this.pz=x,m==null||!e.isValid(m))throw new Error("x required");if(b==null||!e.isValid(b))throw new Error("y required");if(x==null||!e.isValid(x))throw new Error("z required")}static fromAffine(m){const{x:b,y:x}=m||{};if(!m||!e.isValid(b)||!e.isValid(x))throw new Error("invalid affine point");if(m instanceof h)throw new Error("projective point not allowed");const B=P=>e.eql(P,e.ZERO);return B(b)&&B(x)?h.ZERO:new h(b,x,e.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(m){const b=e.invertBatch(m.map(x=>x.pz));return m.map((x,B)=>x.toAffine(b[B])).map(h.fromAffine)}static fromHex(m){const b=h.fromAffine(s(Te("pointHex",m)));return b.assertValidity(),b}static fromPrivateKey(m){return h.BASE.multiply(c(m))}_setWindowSize(m){this._WINDOW_SIZE=m,u.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!e.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:m,y:b}=this.toAffine();if(!e.isValid(m)||!e.isValid(b))throw new Error("bad point: x or y not FE");const x=e.sqr(b),B=i(m);if(!e.eql(x,B))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:m}=this.toAffine();if(e.isOdd)return!e.isOdd(m);throw new Error("Field doesn't support isOdd")}equals(m){f(m);const{px:b,py:x,pz:B}=this,{px:P,py:M,pz:O}=m,C=e.eql(e.mul(b,O),e.mul(P,B)),k=e.eql(e.mul(x,O),e.mul(M,B));return C&&k}negate(){return new h(this.px,e.neg(this.py),this.pz)}double(){const{a:m,b}=t,x=e.mul(b,Xc),{px:B,py:P,pz:M}=this;let O=e.ZERO,C=e.ZERO,k=e.ZERO,T=e.mul(B,B),V=e.mul(P,P),D=e.mul(M,M),W=e.mul(B,P);return W=e.add(W,W),k=e.mul(B,M),k=e.add(k,k),O=e.mul(m,k),C=e.mul(x,D),C=e.add(O,C),O=e.sub(V,C),C=e.add(V,C),C=e.mul(O,C),O=e.mul(W,O),k=e.mul(x,k),D=e.mul(m,D),W=e.sub(T,D),W=e.mul(m,W),W=e.add(W,k),k=e.add(T,T),T=e.add(k,T),T=e.add(T,D),T=e.mul(T,W),C=e.add(C,T),D=e.mul(P,M),D=e.add(D,D),T=e.mul(D,W),O=e.sub(O,T),k=e.mul(D,V),k=e.add(k,k),k=e.add(k,k),new h(O,C,k)}add(m){f(m);const{px:b,py:x,pz:B}=this,{px:P,py:M,pz:O}=m;let C=e.ZERO,k=e.ZERO,T=e.ZERO;const V=t.a,D=e.mul(t.b,Xc);let W=e.mul(b,P),it=e.mul(x,M),lt=e.mul(B,O),Nt=e.add(b,x),I=e.add(P,M);Nt=e.mul(Nt,I),I=e.add(W,it),Nt=e.sub(Nt,I),I=e.add(b,B);let F=e.add(P,O);return I=e.mul(I,F),F=e.add(W,lt),I=e.sub(I,F),F=e.add(x,B),C=e.add(M,O),F=e.mul(F,C),C=e.add(it,lt),F=e.sub(F,C),T=e.mul(V,I),C=e.mul(D,lt),T=e.add(C,T),C=e.sub(it,T),T=e.add(it,T),k=e.mul(C,T),it=e.add(W,W),it=e.add(it,W),lt=e.mul(V,lt),I=e.mul(D,I),it=e.add(it,lt),lt=e.sub(W,lt),lt=e.mul(V,lt),I=e.add(I,lt),W=e.mul(it,I),k=e.add(k,W),W=e.mul(F,I),C=e.mul(Nt,C),C=e.sub(C,W),W=e.mul(Nt,it),T=e.mul(F,T),T=e.add(T,W),new h(C,k,T)}subtract(m){return this.add(m.negate())}is0(){return this.equals(h.ZERO)}wNAF(m){return g.wNAFCached(this,u,m,b=>{const x=e.invertBatch(b.map(B=>B.pz));return b.map((B,P)=>B.toAffine(x[P])).map(h.fromAffine)})}multiplyUnsafe(m){const b=h.ZERO;if(m===An)return b;if(a(m),m===Pe)return this;const{endo:x}=t;if(!x)return g.unsafeLadder(this,m);let{k1neg:B,k1:P,k2neg:M,k2:O}=x.splitScalar(m),C=b,k=b,T=this;for(;P>An||O>An;)P&Pe&&(C=C.add(T)),O&Pe&&(k=k.add(T)),T=T.double(),P>>=Pe,O>>=Pe;return B&&(C=C.negate()),M&&(k=k.negate()),k=new h(e.mul(k.px,x.beta),k.py,k.pz),C.add(k)}multiply(m){a(m);let b=m,x,B;const{endo:P}=t;if(P){const{k1neg:M,k1:O,k2neg:C,k2:k}=P.splitScalar(b);let{p:T,f:V}=this.wNAF(O),{p:D,f:W}=this.wNAF(k);T=g.constTimeNegate(M,T),D=g.constTimeNegate(C,D),D=new h(e.mul(D.px,P.beta),D.py,D.pz),x=T.add(D),B=V.add(W)}else{const{p:M,f:O}=this.wNAF(b);x=M,B=O}return h.normalizeZ([x,B])[0]}multiplyAndAddUnsafe(m,b,x){const B=h.BASE,P=(O,C)=>C===An||C===Pe||!O.equals(B)?O.multiplyUnsafe(C):O.multiply(C),M=P(this,b).add(P(m,x));return M.is0()?void 0:M}toAffine(m){const{px:b,py:x,pz:B}=this,P=this.is0();m==null&&(m=P?e.ONE:e.inv(B));const M=e.mul(b,m),O=e.mul(x,m),C=e.mul(B,m);if(P)return{x:e.ZERO,y:e.ZERO};if(!e.eql(C,e.ONE))throw new Error("invZ was invalid");return{x:M,y:O}}isTorsionFree(){const{h:m,isTorsionFree:b}=t;if(m===Pe)return!0;if(b)return b(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:m,clearCofactor:b}=t;return m===Pe?this:b?b(h,this):this.multiplyUnsafe(t.h)}toRawBytes(m=!0){return this.assertValidity(),n(h,this,m)}toHex(m=!0){return qs(this.toRawBytes(m))}}h.BASE=new h(t.Gx,t.Gy,e.ONE),h.ZERO=new h(e.ZERO,e.ONE,e.ZERO);const p=t.nBitLength,g=Kd(h,t.endo?Math.ceil(p/2):p);return{CURVE:t,ProjectivePoint:h,normPrivateKeyToScalar:c,weierstrassEquation:i,isWithinCurveOrder:o}}function Xd(r){const t=Vu(r);return Qi(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function qd(r){const t=Xd(r),{Fp:e,n}=t,s=e.BYTES+1,i=2*e.BYTES+1;function o(I){return An<I&&I<e.ORDER}function a(I){return re(I,n)}function c(I){return ka(I,n)}const{ProjectivePoint:u,normPrivateKeyToScalar:f,weierstrassEquation:h,isWithinCurveOrder:p}=Yd({...t,toBytes(I,F,J){const nt=F.toAffine(),tt=e.toBytes(nt.x),ut=wi;return J?ut(Uint8Array.from([F.hasEvenY()?2:3]),tt):ut(Uint8Array.from([4]),tt,e.toBytes(nt.y))},fromBytes(I){const F=I.length,J=I[0],nt=I.subarray(1);if(F===s&&(J===2||J===3)){const tt=Rr(nt);if(!o(tt))throw new Error("Point is not on curve");const ut=h(tt);let ot=e.sqrt(ut);const Ct=(ot&Pe)===Pe;return(J&1)===1!==Ct&&(ot=e.neg(ot)),{x:tt,y:ot}}else if(F===i&&J===4){const tt=e.fromBytes(nt.subarray(0,e.BYTES)),ut=e.fromBytes(nt.subarray(e.BYTES,2*e.BYTES));return{x:tt,y:ut}}else throw new Error(`Point of length ${F} was invalid. Expected ${s} compressed bytes or ${i} uncompressed bytes`)}}),g=I=>qs(ti(I,t.nByteLength));function w(I){const F=n>>Pe;return I>F}function m(I){return w(I)?a(-I):I}const b=(I,F,J)=>Rr(I.slice(F,J));class x{constructor(F,J,nt){this.r=F,this.s=J,this.recovery=nt,this.assertValidity()}static fromCompact(F){const J=t.nByteLength;return F=Te("compactSignature",F,J*2),new x(b(F,0,J),b(F,J,2*J))}static fromDER(F){const{r:J,s:nt}=lr.toSig(Te("DER",F));return new x(J,nt)}assertValidity(){if(!p(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!p(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(F){return new x(this.r,this.s,F)}recoverPublicKey(F){const{r:J,s:nt,recovery:tt}=this,ut=k(Te("msgHash",F));if(tt==null||![0,1,2,3].includes(tt))throw new Error("recovery id invalid");const ot=tt===2||tt===3?J+t.n:J;if(ot>=e.ORDER)throw new Error("recovery id 2 or 3 invalid");const Ct=tt&1?"03":"02",ae=u.fromHex(Ct+g(ot)),ge=c(ot),me=a(-ut*ge),He=a(nt*ge),ce=u.BASE.multiplyAndAddUnsafe(ae,me,He);if(!ce)throw new Error("point at infinify");return ce.assertValidity(),ce}hasHighS(){return w(this.s)}normalizeS(){return this.hasHighS()?new x(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return $s(this.toDERHex())}toDERHex(){return lr.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return $s(this.toCompactHex())}toCompactHex(){return g(this.r)+g(this.s)}}const B={isValidPrivateKey(I){try{return f(I),!0}catch{return!1}},normPrivateKeyToScalar:f,randomPrivateKey:()=>{const I=Qu(t.n);return Jd(t.randomBytes(I),t.n)},precompute(I=8,F=u.BASE){return F._setWindowSize(I),F.multiply(BigInt(3)),F}};function P(I,F=!0){return u.fromPrivateKey(I).toRawBytes(F)}function M(I){const F=I instanceof Uint8Array,J=typeof I=="string",nt=(F||J)&&I.length;return F?nt===s||nt===i:J?nt===2*s||nt===2*i:I instanceof u}function O(I,F,J=!0){if(M(I))throw new Error("first arg must be private key");if(!M(F))throw new Error("second arg must be public key");return u.fromHex(F).multiply(f(I)).toRawBytes(J)}const C=t.bits2int||function(I){const F=Rr(I),J=I.length*8-t.nBitLength;return J>0?F>>BigInt(J):F},k=t.bits2int_modN||function(I){return a(C(I))},T=lc(t.nBitLength);function V(I){if(typeof I!="bigint")throw new Error("bigint expected");if(!(An<=I&&I<T))throw new Error(`bigint expected < 2^${t.nBitLength}`);return ti(I,t.nByteLength)}function D(I,F,J=W){if(["recovered","canonical"].some(ye=>ye in J))throw new Error("sign() legacy options not supported");const{hash:nt,randomBytes:tt}=t;let{lowS:ut,prehash:ot,extraEntropy:Ct}=J;ut==null&&(ut=!0),I=Te("msgHash",I),ot&&(I=Te("prehashed msgHash",nt(I)));const ae=k(I),ge=f(F),me=[V(ge),V(ae)];if(Ct!=null){const ye=Ct===!0?tt(e.BYTES):Ct;me.push(Te("extraEntropy",ye))}const He=wi(...me),ce=ae;function $n(ye){const Ie=C(ye);if(!p(Ie))return;const tr=c(Ie),zt=u.BASE.multiply(Ie).toAffine(),te=a(zt.x);if(te===An)return;const kt=a(tr*a(ce+te*ge));if(kt===An)return;let Vr=(zt.x===te?0:2)|Number(zt.y&Pe),ii=kt;return ut&&w(kt)&&(ii=m(kt),Vr^=1),new x(te,ii,Vr)}return{seed:He,k2sig:$n}}const W={lowS:t.lowS,prehash:!1},it={lowS:t.lowS,prehash:!1};function lt(I,F,J=W){const{seed:nt,k2sig:tt}=D(I,F,J),ut=t;return Mu(ut.hash.outputLen,ut.nByteLength,ut.hmac)(nt,tt)}u.BASE._setWindowSize(8);function Nt(I,F,J,nt=it){var zt;const tt=I;if(F=Te("msgHash",F),J=Te("publicKey",J),"strict"in nt)throw new Error("options.strict was renamed to lowS");const{lowS:ut,prehash:ot}=nt;let Ct,ae;try{if(typeof tt=="string"||tt instanceof Uint8Array)try{Ct=x.fromDER(tt)}catch(te){if(!(te instanceof lr.Err))throw te;Ct=x.fromCompact(tt)}else if(typeof tt=="object"&&typeof tt.r=="bigint"&&typeof tt.s=="bigint"){const{r:te,s:kt}=tt;Ct=new x(te,kt)}else throw new Error("PARSE");ae=u.fromHex(J)}catch(te){if(te.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(ut&&Ct.hasHighS())return!1;ot&&(F=t.hash(F));const{r:ge,s:me}=Ct,He=k(F),ce=c(me),$n=a(He*ce),ye=a(ge*ce),Ie=(zt=u.BASE.multiplyAndAddUnsafe(ae,$n,ye))==null?void 0:zt.toAffine();return Ie?a(Ie.x)===ge:!1}return{CURVE:t,getPublicKey:P,getSharedSecret:O,sign:lt,verify:Nt,ProjectivePoint:u,Signature:x,utils:B}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function $d(r){return{hash:r,hmac:(t,...e)=>wu(r,t,Hh(...e)),randomBytes:Qh}}function tp(r,t){const e=n=>qd({...r,...$d(n)});return Object.freeze({...e(t),create:e})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _u=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),qc=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),ep=BigInt(1),Ta=BigInt(2),$c=(r,t)=>(r+t/Ta)/t;function np(r){const t=_u,e=BigInt(3),n=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),u=r*r*r%t,f=u*u*r%t,h=we(f,e,t)*f%t,p=we(h,e,t)*f%t,g=we(p,Ta,t)*u%t,w=we(g,s,t)*g%t,m=we(w,i,t)*w%t,b=we(m,a,t)*m%t,x=we(b,c,t)*b%t,B=we(x,a,t)*m%t,P=we(B,e,t)*f%t,M=we(P,o,t)*w%t,O=we(M,n,t)*u%t,C=we(O,Ta,t);if(!Oa.eql(Oa.sqr(C),r))throw new Error("Cannot find square root");return C}const Oa=_d(_u,void 0,void 0,{sqrt:np}),kn=tp({a:BigInt(0),b:BigInt(7),Fp:Oa,n:qc,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:r=>{const t=qc,e=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-ep*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=e,o=BigInt("0x100000000000000000000000000000000"),a=$c(i*r,t),c=$c(-n*r,t);let u=re(r-a*e-c*s,t),f=re(-a*n-c*i,t);const h=u>o,p=f>o;if(h&&(u=t-u),p&&(f=t-f),u>o||f>o)throw new Error("splitScalar: Endomorphism failed, k="+r);return{k1neg:h,k1:u,k2neg:p,k2:f}}}},bu);BigInt(0);kn.ProjectivePoint;const Ai="0x0000000000000000000000000000000000000000",tl="0x0000000000000000000000000000000000000000000000000000000000000000",el=BigInt(0),nl=BigInt(1),rl=BigInt(2),sl=BigInt(27),il=BigInt(28),$i=BigInt(35),zr={};function ol(r){return Ur(Yt(r),32)}var ws,As,bs,Er;const ke=class ke{constructor(t,e,n,s){E(this,ws);E(this,As);E(this,bs);E(this,Er);Hi(t,zr,"Signature"),d(this,ws,e),d(this,As,n),d(this,bs,s),d(this,Er,null)}get r(){return l(this,ws)}set r(t){y(is(t)===32,"invalid r","value",t),d(this,ws,U(t))}get s(){return l(this,As)}set s(t){y(is(t)===32,"invalid s","value",t);const e=U(t);y(parseInt(e.substring(0,3))<8,"non-canonical s","value",e),d(this,As,e)}get v(){return l(this,bs)}set v(t){const e=j(t,"value");y(e===27||e===28,"invalid v","v",t),d(this,bs,e)}get networkV(){return l(this,Er)}get legacyChainId(){const t=this.networkV;return t==null?null:ke.getChainId(t)}get yParity(){return this.v===27?0:1}get yParityAndS(){const t=q(this.s);return this.yParity&&(t[0]|=128),U(t)}get compactSerialized(){return Et([this.r,this.yParityAndS])}get serialized(){return Et([this.r,this.s,this.yParity?"0x1c":"0x1b"])}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this.s}", yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){const t=new ke(zr,this.r,this.s,this.v);return this.networkV&&d(t,Er,this.networkV),t}toJSON(){const t=this.networkV;return{_type:"signature",networkV:t!=null?t.toString():null,r:this.r,s:this.s,v:this.v}}static getChainId(t){const e=L(t,"v");return e==sl||e==il?el:(y(e>=$i,"invalid EIP-155 v","v",t),(e-$i)/rl)}static getChainIdV(t,e){return L(t)*rl+BigInt(35+e-27)}static getNormalizedV(t){const e=L(t);return e===el||e===sl?27:e===nl||e===il?28:(y(e>=$i,"invalid v","v",t),e&nl?27:28)}static from(t){function e(u,f){y(u,f,"signature",t)}if(t==null)return new ke(zr,tl,tl,27);if(typeof t=="string"){const u=q(t,"signature");if(u.length===64){const f=U(u.slice(0,32)),h=u.slice(32,64),p=h[0]&128?28:27;return h[0]&=127,new ke(zr,f,U(h),p)}if(u.length===65){const f=U(u.slice(0,32)),h=u.slice(32,64);e((h[0]&128)===0,"non-canonical s");const p=ke.getNormalizedV(u[64]);return new ke(zr,f,U(h),p)}e(!1,"invalid raw signature length")}if(t instanceof ke)return t.clone();const n=t.r;e(n!=null,"missing r");const s=ol(n),i=function(u,f){if(u!=null)return ol(u);if(f!=null){e(ct(f,32),"invalid yParityAndS");const h=q(f);return h[0]&=127,U(h)}e(!1,"missing s")}(t.s,t.yParityAndS);e((q(i)[0]&128)==0,"non-canonical s");const{networkV:o,v:a}=function(u,f,h){if(u!=null){const p=L(u);return{networkV:p>=$i?p:void 0,v:ke.getNormalizedV(p)}}if(f!=null)return e(ct(f,32),"invalid yParityAndS"),{v:q(f)[0]&128?28:27};if(h!=null){switch(j(h,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}e(!1,"invalid yParity")}e(!1,"missing v")}(t.v,t.yParityAndS,t.yParity),c=new ke(zr,s,i,a);return o&&d(c,Er,o),e(t.yParity==null||j(t.yParity,"sig.yParity")===c.yParity,"yParity mismatch"),e(t.yParityAndS==null||t.yParityAndS===c.yParityAndS,"yParityAndS mismatch"),c}};ws=new WeakMap,As=new WeakMap,bs=new WeakMap,Er=new WeakMap;let De=ke;var ln;const or=class or{constructor(t){E(this,ln);y(is(t)===32,"invalid private key","privateKey","[REDACTED]"),d(this,ln,U(t))}get privateKey(){return l(this,ln)}get publicKey(){return or.computePublicKey(l(this,ln))}get compressedPublicKey(){return or.computePublicKey(l(this,ln),!0)}sign(t){y(is(t)===32,"invalid digest length","digest",t);const e=kn.sign(Wt(t),Wt(l(this,ln)),{lowS:!0});return De.from({r:Wn(e.r,32),s:Wn(e.s,32),v:e.recovery?28:27})}computeSharedSecret(t){const e=or.computePublicKey(t);return U(kn.getSharedSecret(Wt(l(this,ln)),q(e),!1))}static computePublicKey(t,e){let n=q(t,"key");if(n.length===32){const i=kn.getPublicKey(n,!!e);return U(i)}if(n.length===64){const i=new Uint8Array(65);i[0]=4,i.set(n,1),n=i}const s=kn.ProjectivePoint.fromHex(n);return U(s.toRawBytes(e))}static recoverPublicKey(t,e){y(is(t)===32,"invalid digest length","digest",t);const n=De.from(e);let s=kn.Signature.fromCompact(Wt(Et([n.r,n.s])));s=s.addRecoveryBit(n.yParity);const i=s.recoverPublicKey(Wt(t));return y(i!=null,"invalid signautre for digest","signature",e),"0x"+i.toHex(!1)}static addPoints(t,e,n){const s=kn.ProjectivePoint.fromHex(or.computePublicKey(t).substring(2)),i=kn.ProjectivePoint.fromHex(or.computePublicKey(e).substring(2));return"0x"+s.add(i).toHex(!!n)}};ln=new WeakMap;let bi=or;const rp=BigInt(0),sp=BigInt(36);function al(r){r=r.toLowerCase();const t=r.substring(2).split(""),e=new Uint8Array(40);for(let s=0;s<40;s++)e[s]=t[s].charCodeAt(0);const n=q(vt(e));for(let s=0;s<40;s+=2)n[s>>1]>>4>=8&&(t[s]=t[s].toUpperCase()),(n[s>>1]&15)>=8&&(t[s+1]=t[s+1].toUpperCase());return"0x"+t.join("")}const uc={};for(let r=0;r<10;r++)uc[String(r)]=String(r);for(let r=0;r<26;r++)uc[String.fromCharCode(65+r)]=String(10+r);const cl=15;function ip(r){r=r.toUpperCase(),r=r.substring(4)+r.substring(0,2)+"00";let t=r.split("").map(n=>uc[n]).join("");for(;t.length>=cl;){let n=t.substring(0,cl);t=parseInt(n,10)%97+t.substring(n.length)}let e=String(98-parseInt(t,10)%97);for(;e.length<2;)e="0"+e;return e}const op=function(){const r={};for(let t=0;t<36;t++){const e="0123456789abcdefghijklmnopqrstuvwxyz"[t];r[e]=BigInt(t)}return r}();function ap(r){r=r.toLowerCase();let t=rp;for(let e=0;e<r.length;e++)t=t*sp+op[r[e]];return t}function st(r){if(y(typeof r=="string","invalid address","address",r),r.match(/^(0x)?[0-9a-fA-F]{40}$/)){r.startsWith("0x")||(r="0x"+r);const t=al(r);return y(!r.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||t===r,"bad address checksum","address",r),t}if(r.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){y(r.substring(2,4)===ip(r),"bad icap checksum","address",r);let t=ap(r.substring(4)).toString(16);for(;t.length<40;)t="0"+t;return al("0x"+t)}y(!1,"invalid address","address",r)}function cp(r){const t=st(r.from);let n=L(r.nonce,"tx.nonce").toString(16);return n==="0"?n="0x":n.length%2?n="0x0"+n:n="0x"+n,st(yt(vt(Fr([t,n])),12))}function Ju(r){return r&&typeof r.getAddress=="function"}async function sa(r,t){const e=await t;return(e==null||e==="0x0000000000000000000000000000000000000000")&&(v(typeof r!="string","unconfigured name","UNCONFIGURED_NAME",{value:r}),y(!1,"invalid AddressLike value; did not resolve to a value address","target",r)),st(e)}function qt(r,t){if(typeof r=="string")return r.match(/^0x[0-9a-f]{40}$/i)?st(r):(v(t!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),sa(r,t.resolveName(r)));if(Ju(r))return sa(r,r.getAddress());if(r&&typeof r.then=="function")return sa(r,r);y(!1,"unsupported addressable value","target",r)}const en={};function R(r,t){let e=!1;return t<0&&(e=!0,t*=-1),new Jt(en,`${e?"":"u"}int${t}`,r,{signed:e,width:t})}function $(r,t){return new Jt(en,`bytes${t||""}`,r,{size:t})}const ll=Symbol.for("_ethers_typed");var xr;const nn=class nn{constructor(t,e,n,s){A(this,"type");A(this,"value");E(this,xr);A(this,"_typedSymbol");s==null&&(s=null),Hi(en,t,"Typed"),H(this,{_typedSymbol:ll,type:e,value:n}),d(this,xr,s),this.format()}format(){if(this.type==="array")throw new Error("");if(this.type==="dynamicArray")throw new Error("");return this.type==="tuple"?`tuple(${this.value.map(t=>t.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return this.type==="string"}get tupleName(){if(this.type!=="tuple")throw TypeError("not a tuple");return l(this,xr)}get arrayLength(){if(this.type!=="array")throw TypeError("not an array");return l(this,xr)===!0?-1:l(this,xr)===!1?this.value.length:null}static from(t,e){return new nn(en,t,e)}static uint8(t){return R(t,8)}static uint16(t){return R(t,16)}static uint24(t){return R(t,24)}static uint32(t){return R(t,32)}static uint40(t){return R(t,40)}static uint48(t){return R(t,48)}static uint56(t){return R(t,56)}static uint64(t){return R(t,64)}static uint72(t){return R(t,72)}static uint80(t){return R(t,80)}static uint88(t){return R(t,88)}static uint96(t){return R(t,96)}static uint104(t){return R(t,104)}static uint112(t){return R(t,112)}static uint120(t){return R(t,120)}static uint128(t){return R(t,128)}static uint136(t){return R(t,136)}static uint144(t){return R(t,144)}static uint152(t){return R(t,152)}static uint160(t){return R(t,160)}static uint168(t){return R(t,168)}static uint176(t){return R(t,176)}static uint184(t){return R(t,184)}static uint192(t){return R(t,192)}static uint200(t){return R(t,200)}static uint208(t){return R(t,208)}static uint216(t){return R(t,216)}static uint224(t){return R(t,224)}static uint232(t){return R(t,232)}static uint240(t){return R(t,240)}static uint248(t){return R(t,248)}static uint256(t){return R(t,256)}static uint(t){return R(t,256)}static int8(t){return R(t,-8)}static int16(t){return R(t,-16)}static int24(t){return R(t,-24)}static int32(t){return R(t,-32)}static int40(t){return R(t,-40)}static int48(t){return R(t,-48)}static int56(t){return R(t,-56)}static int64(t){return R(t,-64)}static int72(t){return R(t,-72)}static int80(t){return R(t,-80)}static int88(t){return R(t,-88)}static int96(t){return R(t,-96)}static int104(t){return R(t,-104)}static int112(t){return R(t,-112)}static int120(t){return R(t,-120)}static int128(t){return R(t,-128)}static int136(t){return R(t,-136)}static int144(t){return R(t,-144)}static int152(t){return R(t,-152)}static int160(t){return R(t,-160)}static int168(t){return R(t,-168)}static int176(t){return R(t,-176)}static int184(t){return R(t,-184)}static int192(t){return R(t,-192)}static int200(t){return R(t,-200)}static int208(t){return R(t,-208)}static int216(t){return R(t,-216)}static int224(t){return R(t,-224)}static int232(t){return R(t,-232)}static int240(t){return R(t,-240)}static int248(t){return R(t,-248)}static int256(t){return R(t,-256)}static int(t){return R(t,-256)}static bytes1(t){return $(t,1)}static bytes2(t){return $(t,2)}static bytes3(t){return $(t,3)}static bytes4(t){return $(t,4)}static bytes5(t){return $(t,5)}static bytes6(t){return $(t,6)}static bytes7(t){return $(t,7)}static bytes8(t){return $(t,8)}static bytes9(t){return $(t,9)}static bytes10(t){return $(t,10)}static bytes11(t){return $(t,11)}static bytes12(t){return $(t,12)}static bytes13(t){return $(t,13)}static bytes14(t){return $(t,14)}static bytes15(t){return $(t,15)}static bytes16(t){return $(t,16)}static bytes17(t){return $(t,17)}static bytes18(t){return $(t,18)}static bytes19(t){return $(t,19)}static bytes20(t){return $(t,20)}static bytes21(t){return $(t,21)}static bytes22(t){return $(t,22)}static bytes23(t){return $(t,23)}static bytes24(t){return $(t,24)}static bytes25(t){return $(t,25)}static bytes26(t){return $(t,26)}static bytes27(t){return $(t,27)}static bytes28(t){return $(t,28)}static bytes29(t){return $(t,29)}static bytes30(t){return $(t,30)}static bytes31(t){return $(t,31)}static bytes32(t){return $(t,32)}static address(t){return new nn(en,"address",t)}static bool(t){return new nn(en,"bool",!!t)}static bytes(t){return new nn(en,"bytes",t)}static string(t){return new nn(en,"string",t)}static array(t,e){throw new Error("not implemented yet")}static tuple(t,e){throw new Error("not implemented yet")}static overrides(t){return new nn(en,"overrides",Object.assign({},t))}static isTyped(t){return t&&typeof t=="object"&&"_typedSymbol"in t&&t._typedSymbol===ll}static dereference(t,e){if(nn.isTyped(t)){if(t.type!==e)throw new Error(`invalid type: expecetd ${e}, got ${t.type}`);return t.value}return t}};xr=new WeakMap;let Jt=nn;class lp extends Nn{constructor(t){super("address","address",t,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(t,e){let n=Jt.dereference(e,"string");try{n=st(n)}catch(s){return this._throwError(s.message,e)}return t.writeValue(n)}decode(t){return st(Wn(t.readValue(),20))}}class up extends Nn{constructor(e){super(e.name,e.type,"_",e.dynamic);A(this,"coder");this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,n){return this.coder.encode(e,n)}decode(e){return this.coder.decode(e)}}function zu(r,t,e){let n=[];if(Array.isArray(e))n=e;else if(e&&typeof e=="object"){let c={};n=t.map(u=>{const f=u.localName;return v(f,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:u},value:e}),v(!c[f],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:u},value:e}),c[f]=!0,e[f]})}else y(!1,"invalid tuple value","tuple",e);y(t.length===n.length,"types/value length mismatch","tuple",e);let s=new Na,i=new Na,o=[];t.forEach((c,u)=>{let f=n[u];if(c.dynamic){let h=i.length;c.encode(i,f);let p=s.writeUpdatableValue();o.push(g=>{p(g+h)})}else c.encode(s,f)}),o.forEach(c=>{c(s.length)});let a=r.appendWriter(s);return a+=r.appendWriter(i),a}function Ku(r,t){let e=[],n=[],s=r.subReader(0);return t.forEach(i=>{let o=null;if(i.dynamic){let a=r.readIndex(),c=s.subReader(a);try{o=i.decode(c)}catch(u){if(_t(u,"BUFFER_OVERRUN"))throw u;o=u,o.baseType=i.name,o.name=i.localName,o.type=i.type}}else try{o=i.decode(r)}catch(a){if(_t(a,"BUFFER_OVERRUN"))throw a;o=a,o.baseType=i.name,o.name=i.localName,o.type=i.type}if(o==null)throw new Error("investigate");e.push(o),n.push(i.localName||null)}),Ys.fromItems(e,n)}class fp extends Nn{constructor(e,n,s){const i=e.type+"["+(n>=0?n:"")+"]",o=n===-1||e.dynamic;super("array",i,s,o);A(this,"coder");A(this,"length");H(this,{coder:e,length:n})}defaultValue(){const e=this.coder.defaultValue(),n=[];for(let s=0;s<this.length;s++)n.push(e);return n}encode(e,n){const s=Jt.dereference(n,"array");Array.isArray(s)||this._throwError("expected array value",s);let i=this.length;i===-1&&(i=s.length,e.writeValue(s.length)),eu(s.length,i,"coder array"+(this.localName?" "+this.localName:""));let o=[];for(let a=0;a<s.length;a++)o.push(this.coder);return zu(e,o,s)}decode(e){let n=this.length;n===-1&&(n=e.readIndex(),v(n*Xt<=e.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:e.bytes,offset:n*Xt,length:e.dataLength}));let s=[];for(let i=0;i<n;i++)s.push(new up(this.coder));return Ku(e,s)}}class hp extends Nn{constructor(t){super("bool","bool",t,!1)}defaultValue(){return!1}encode(t,e){const n=Jt.dereference(e,"bool");return t.writeValue(n?1:0)}decode(t){return!!t.readValue()}}class ju extends Nn{constructor(t,e){super(t,t,e,!0)}defaultValue(){return"0x"}encode(t,e){e=Wt(e);let n=t.writeValue(e.length);return n+=t.writeBytes(e),n}decode(t){return t.readBytes(t.readIndex(),!0)}}class dp extends ju{constructor(t){super("bytes",t)}decode(t){return U(super.decode(t))}}class pp extends Nn{constructor(e,n){let s="bytes"+String(e);super(s,s,n,!1);A(this,"size");H(this,{size:e},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(e,n){let s=Wt(Jt.dereference(n,this.type));return s.length!==this.size&&this._throwError("incorrect data length",n),e.writeBytes(s)}decode(e){return U(e.readBytes(this.size))}}const gp=new Uint8Array([]);class mp extends Nn{constructor(t){super("null","",t,!1)}defaultValue(){return null}encode(t,e){return e!=null&&this._throwError("not null",e),t.writeBytes(gp)}decode(t){return t.readBytes(0),null}}const yp=BigInt(0),wp=BigInt(1),Ap=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class bp extends Nn{constructor(e,n,s){const i=(n?"int":"uint")+e*8;super(i,i,s,!1);A(this,"size");A(this,"signed");H(this,{size:e,signed:n},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(e,n){let s=L(Jt.dereference(n,this.type)),i=cr(Ap,Xt*8);if(this.signed){let o=cr(i,this.size*8-1);(s>o||s<-(o+wp))&&this._throwError("value out-of-bounds",n),s=su(s,8*Xt)}else(s<yp||s>cr(i,this.size*8))&&this._throwError("value out-of-bounds",n);return e.writeValue(s)}decode(e){let n=cr(e.readValue(),this.size*8);return this.signed&&(n=go(n,this.size*8)),n}}class Ep extends ju{constructor(t){super("string",t)}defaultValue(){return""}encode(t,e){return super.encode(t,En(Jt.dereference(e,"string")))}decode(t){return mo(super.decode(t))}}class to extends Nn{constructor(e,n){let s=!1;const i=[];e.forEach(a=>{a.dynamic&&(s=!0),i.push(a.type)});const o="tuple("+i.join(",")+")";super("tuple",o,n,s);A(this,"coders");H(this,{coders:Object.freeze(e.slice())})}defaultValue(){const e=[];this.coders.forEach(s=>{e.push(s.defaultValue())});const n=this.coders.reduce((s,i)=>{const o=i.localName;return o&&(s[o]||(s[o]=0),s[o]++),s},{});return this.coders.forEach((s,i)=>{let o=s.localName;!o||n[o]!==1||(o==="length"&&(o="_length"),e[o]==null&&(e[o]=e[i]))}),Object.freeze(e)}encode(e,n){const s=Jt.dereference(n,"tuple");return zu(e,this.coders,s)}decode(e){return Ku(e,this.coders)}}function Lr(r){return vt(En(r))}var xp="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";const ul=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),fl=4;function vp(r){let t=0;function e(){return r[t++]<<8|r[t++]}let n=e(),s=1,i=[0,1];for(let O=1;O<n;O++)i.push(s+=e());let o=e(),a=t;t+=o;let c=0,u=0;function f(){return c==0&&(u=u<<8|r[t++],c=8),u>>--c&1}const h=31,p=2**h,g=p>>>1,w=g>>1,m=p-1;let b=0;for(let O=0;O<h;O++)b=b<<1|f();let x=[],B=0,P=p;for(;;){let O=Math.floor(((b-B+1)*s-1)/P),C=0,k=n;for(;k-C>1;){let D=C+k>>>1;O<i[D]?k=D:C=D}if(C==0)break;x.push(C);let T=B+Math.floor(P*i[C]/s),V=B+Math.floor(P*i[C+1]/s)-1;for(;!((T^V)&g);)b=b<<1&m|f(),T=T<<1&m,V=V<<1&m|1;for(;T&~V&w;)b=b&g|b<<1&m>>>1|f(),T=T<<1^g,V=(V^g)<<1|g|1;B=T,P=1+V-T}let M=n-4;return x.map(O=>{switch(O-M){case 3:return M+65792+(r[a++]<<16|r[a++]<<8|r[a++]);case 2:return M+256+(r[a++]<<8|r[a++]);case 1:return M+r[a++];default:return O-1}})}function Np(r){let t=0;return()=>r[t++]}function Zu(r){return Np(vp(Pp(r)))}function Pp(r){let t=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((s,i)=>t[s.charCodeAt(0)]=i);let e=r.length,n=new Uint8Array(6*e>>3);for(let s=0,i=0,o=0,a=0;s<e;s++)a=a<<6|t[r.charCodeAt(s)],o+=6,o>=8&&(n[i++]=a>>(o-=8));return n}function Ip(r){return r&1?~r>>1:r>>1}function Bp(r,t){let e=Array(r);for(let n=0,s=0;n<r;n++)e[n]=s+=Ip(t());return e}function Ei(r,t=0){let e=[];for(;;){let n=r(),s=r();if(!s)break;t+=n;for(let i=0;i<s;i++)e.push(t+i);t+=s+1}return e}function Wu(r){return xi(()=>{let t=Ei(r);if(t.length)return t})}function Yu(r){let t=[];for(;;){let e=r();if(e==0)break;t.push(Cp(e,r))}for(;;){let e=r()-1;if(e<0)break;t.push(kp(e,r))}return t.flat()}function xi(r){let t=[];for(;;){let e=r(t.length);if(!e)break;t.push(e)}return t}function Xu(r,t,e){let n=Array(r).fill().map(()=>[]);for(let s=0;s<t;s++)Bp(r,e).forEach((i,o)=>n[o].push(i));return n}function Cp(r,t){let e=1+t(),n=t(),s=xi(t);return Xu(s.length,1+r,t).flatMap((o,a)=>{let[c,...u]=o;return Array(s[a]).fill().map((f,h)=>{let p=h*n;return[c+h*e,u.map(g=>g+p)]})})}function kp(r,t){let e=1+t();return Xu(e,1+r,t).map(s=>[s[0],s.slice(1)])}function Tp(r){let t=[],e=Ei(r);return s(n([]),[]),t;function n(i){let o=r(),a=xi(()=>{let c=Ei(r).map(u=>e[u]);if(c.length)return n(c)});return{S:o,B:a,Q:i}}function s({S:i,B:o},a,c){if(!(i&4&&c===a[a.length-1])){i&2&&(c=a[a.length-1]),i&1&&t.push(a);for(let u of o)for(let f of u.Q)s(u,[...a,f],c)}}}function Op(r){return r.toString(16).toUpperCase().padStart(2,"0")}function qu(r){return`{${Op(r)}}`}function Rp(r){let t=[];for(let e=0,n=r.length;e<n;){let s=r.codePointAt(e);e+=s<65536?1:2,t.push(s)}return t}function ei(r){let e=r.length;if(e<4096)return String.fromCodePoint(...r);let n=[];for(let s=0;s<e;)n.push(String.fromCodePoint(...r.slice(s,s+=4096)));return n.join("")}function Sp(r,t){let e=r.length,n=e-t.length;for(let s=0;n==0&&s<e;s++)n=r[s]-t[s];return n}var Up="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";const vi=44032,Ao=4352,bo=4449,Eo=4519,$u=19,tf=21,ni=28,xo=tf*ni,Fp=$u*xo,Lp=vi+Fp,Dp=Ao+$u,Mp=bo+tf,Gp=Eo+ni;function hi(r){return r>>24&255}function ef(r){return r&16777215}let Ra,hl,Sa,io;function Hp(){let r=Zu(Up);Ra=new Map(Wu(r).flatMap((t,e)=>t.map(n=>[n,e+1<<24]))),hl=new Set(Ei(r)),Sa=new Map,io=new Map;for(let[t,e]of Yu(r)){if(!hl.has(t)&&e.length==2){let[n,s]=e,i=io.get(n);i||(i=new Map,io.set(n,i)),i.set(s,t)}Sa.set(t,e.reverse())}}function nf(r){return r>=vi&&r<Lp}function Qp(r,t){if(r>=Ao&&r<Dp&&t>=bo&&t<Mp)return vi+(r-Ao)*xo+(t-bo)*ni;if(nf(r)&&t>Eo&&t<Gp&&(r-vi)%ni==0)return r+(t-Eo);{let e=io.get(r);return e&&(e=e.get(t),e)?e:-1}}function rf(r){Ra||Hp();let t=[],e=[],n=!1;function s(i){let o=Ra.get(i);o&&(n=!0,i|=o),t.push(i)}for(let i of r)for(;;){if(i<128)t.push(i);else if(nf(i)){let o=i-vi,a=o/xo|0,c=o%xo/ni|0,u=o%ni;s(Ao+a),s(bo+c),u>0&&s(Eo+u)}else{let o=Sa.get(i);o?e.push(...o):s(i)}if(!e.length)break;i=e.pop()}if(n&&t.length>1){let i=hi(t[0]);for(let o=1;o<t.length;o++){let a=hi(t[o]);if(a==0||i<=a){i=a;continue}let c=o-1;for(;;){let u=t[c+1];if(t[c+1]=t[c],t[c]=u,!c||(i=hi(t[--c]),i<=a))break}i=hi(t[o])}}return t}function Vp(r){let t=[],e=[],n=-1,s=0;for(let i of r){let o=hi(i),a=ef(i);if(n==-1)o==0?n=a:t.push(a);else if(s>0&&s>=o)o==0?(t.push(n,...e),e.length=0,n=a):e.push(a),s=o;else{let c=Qp(n,a);c>=0?n=c:s==0&&o==0?(t.push(n),n=a):(e.push(a),s=o)}}return n>=0&&t.push(n,...e),t}function sf(r){return rf(r).map(ef)}function _p(r){return Vp(rf(r))}const dl=45,of=".",af=65039,cf=1,vo=r=>Array.from(r);function Ni(r,t){return r.P.has(t)||r.Q.has(t)}class Jp extends Array{get is_emoji(){return!0}}let Ua,lf,ur,Fa,uf,as,ia,Zr,rr,pl,La;function fc(){if(Ua)return;let r=Zu(xp);const t=()=>Ei(r),e=()=>new Set(t()),n=(f,h)=>h.forEach(p=>f.add(p));Ua=new Map(Yu(r)),lf=e(),ur=t(),Fa=new Set(t().map(f=>ur[f])),ur=new Set(ur),uf=e(),e();let s=Wu(r),i=r();const o=()=>{let f=new Set;return t().forEach(h=>n(f,s[h])),n(f,t()),f};as=xi(f=>{let h=xi(r).map(p=>p+96);if(h.length){let p=f>=i;h[0]-=32,h=ei(h),p&&(h=`Restricted[${h}]`);let g=o(),w=o(),m=!r();return{N:h,P:g,Q:w,M:m,R:p}}}),ia=e(),Zr=new Map;let a=t().concat(vo(ia)).sort((f,h)=>f-h);a.forEach((f,h)=>{let p=r(),g=a[h]=p?a[h-p]:{V:[],M:new Map};g.V.push(f),ia.has(f)||Zr.set(f,g)});for(let{V:f,M:h}of new Set(Zr.values())){let p=[];for(let w of f){let m=as.filter(x=>Ni(x,w)),b=p.find(({G:x})=>m.some(B=>x.has(B)));b||(b={G:new Set,V:[]},p.push(b)),b.V.push(w),n(b.G,m)}let g=p.flatMap(w=>vo(w.G));for(let{G:w,V:m}of p){let b=new Set(g.filter(x=>!w.has(x)));for(let x of m)h.set(x,b)}}rr=new Set;let c=new Set;const u=f=>rr.has(f)?c.add(f):rr.add(f);for(let f of as){for(let h of f.P)u(h);for(let h of f.Q)u(h)}for(let f of rr)!Zr.has(f)&&!c.has(f)&&Zr.set(f,cf);n(rr,sf(rr)),pl=Tp(r).map(f=>Jp.from(f)).sort(Sp),La=new Map;for(let f of pl){let h=[La];for(let p of f){let g=h.map(w=>{let m=w.get(p);return m||(m=new Map,w.set(p,m)),m});p===af?h.push(...g):h=g}for(let p of h)p.V=f}}function hc(r){return(ff(r)?"":`${dc(_o([r]))} `)+qu(r)}function dc(r){return`"${r}"‎`}function zp(r){if(r.length>=4&&r[2]==dl&&r[3]==dl)throw new Error(`invalid label extension: "${ei(r.slice(0,4))}"`)}function Kp(r){for(let e=r.lastIndexOf(95);e>0;)if(r[--e]!==95)throw new Error("underscore allowed only at start")}function jp(r){let t=r[0],e=ul.get(t);if(e)throw mi(`leading ${e}`);let n=r.length,s=-1;for(let i=1;i<n;i++){t=r[i];let o=ul.get(t);if(o){if(s==i)throw mi(`${e} + ${o}`);s=i+1,e=o}}if(s==n)throw mi(`trailing ${e}`)}function _o(r,t=1/0,e=qu){let n=[];Zp(r[0])&&n.push("◌"),r.length>t&&(t>>=1,r=[...r.slice(0,t),8230,...r.slice(-t)]);let s=0,i=r.length;for(let o=0;o<i;o++){let a=r[o];ff(a)&&(n.push(ei(r.slice(s,o))),n.push(e(a)),s=o+1)}return n.push(ei(r.slice(s,i))),n.join("")}function Zp(r){return fc(),ur.has(r)}function ff(r){return fc(),uf.has(r)}function Wp(r){return $p(Yp(r,_p,ng))}function Yp(r,t,e){if(!r)return[];fc();let n=0;return r.split(of).map(s=>{let i=Rp(s),o={input:i,offset:n};n+=i.length+1;try{let a=o.tokens=eg(i,t,e),c=a.length,u;if(!c)throw new Error("empty label");let f=o.output=a.flat();if(Kp(f),!(o.emoji=c>1||a[0].is_emoji)&&f.every(p=>p<128))zp(f),u="ASCII";else{let p=a.flatMap(g=>g.is_emoji?[]:g);if(!p.length)u="Emoji";else{if(ur.has(f[0]))throw mi("leading combining mark");for(let m=1;m<c;m++){let b=a[m];if(!b.is_emoji&&ur.has(b[0]))throw mi(`emoji + combining mark: "${ei(a[m-1])} + ${_o([b[0]])}"`)}jp(f);let g=vo(new Set(p)),[w]=qp(g);tg(w,p),Xp(w,g),u=w.N}}o.type=u}catch(a){o.error=a}return o})}function Xp(r,t){let e,n=[];for(let s of t){let i=Zr.get(s);if(i===cf)return;if(i){let o=i.M.get(s);if(e=e?e.filter(a=>o.has(a)):vo(o),!e.length)return}else n.push(s)}if(e){for(let s of e)if(n.every(i=>Ni(s,i)))throw new Error(`whole-script confusable: ${r.N}/${s.N}`)}}function qp(r){let t=as;for(let e of r){let n=t.filter(s=>Ni(s,e));if(!n.length)throw as.some(s=>Ni(s,e))?df(t[0],e):hf(e);if(t=n,n.length==1)break}return t}function $p(r){return r.map(({input:t,error:e,output:n})=>{if(e){let s=e.message;throw new Error(r.length==1?s:`Invalid label ${dc(_o(t,63))}: ${s}`)}return ei(n)}).join(of)}function hf(r){return new Error(`disallowed character: ${hc(r)}`)}function df(r,t){let e=hc(t),n=as.find(s=>s.P.has(t));return n&&(e=`${n.N} ${e}`),new Error(`illegal mixture: ${r.N} + ${e}`)}function mi(r){return new Error(`illegal placement: ${r}`)}function tg(r,t){for(let e of t)if(!Ni(r,e))throw df(r,e);if(r.M){let e=sf(t);for(let n=1,s=e.length;n<s;n++)if(Fa.has(e[n])){let i=n+1;for(let o;i<s&&Fa.has(o=e[i]);i++)for(let a=n;a<i;a++)if(e[a]==o)throw new Error(`duplicate non-spacing marks: ${hc(o)}`);if(i-n>fl)throw new Error(`excessive non-spacing marks: ${dc(_o(e.slice(n-1,i)))} (${i-n}/${fl})`);n=i}}}function eg(r,t,e){let n=[],s=[];for(r=r.slice().reverse();r.length;){let i=rg(r);if(i)s.length&&(n.push(t(s)),s=[]),n.push(e(i));else{let o=r.pop();if(rr.has(o))s.push(o);else{let a=Ua.get(o);if(a)s.push(...a);else if(!lf.has(o))throw hf(o)}}}return s.length&&n.push(t(s)),n}function ng(r){return r.filter(t=>t!=af)}function rg(r,t){let e=La,n,s=r.length;for(;s&&(e=e.get(r[--s]),!!e);){let{V:i}=e;i&&(n=i,r.length=s)}return n}const pf=new Uint8Array(32);pf.fill(0);function gl(r){return y(r.length!==0,"invalid ENS name; empty component","comp",r),r}function gf(r){const t=En(sg(r)),e=[];if(r.length===0)return e;let n=0;for(let s=0;s<t.length;s++)t[s]===46&&(e.push(gl(t.slice(n,s))),n=s+1);return y(n<t.length,"invalid ENS name; empty component","name",r),e.push(gl(t.slice(n))),e}function sg(r){try{if(r.length===0)throw new Error("empty label");return Wp(r)}catch(t){y(!1,`invalid ENS name (${t.message})`,"name",r)}}function Da(r){y(typeof r=="string","invalid ENS name; not a string","name",r),y(r.length,"invalid ENS name (empty label)","name",r);let t=pf;const e=gf(r);for(;e.length;)t=vt(Et([t,vt(e.pop())]));return U(t)}function ig(r,t){const e=t;return y(e<=255,"DNS encoded label cannot exceed 255","length",e),U(Et(gf(r).map(n=>{y(n.length<=e,`label ${JSON.stringify(r)} exceeds ${e} bytes`,"name",r);const s=new Uint8Array(n.length+1);return s.set(n,1),s[0]=s.length-1,s})))+"00"}function oa(r,t){return{address:st(r),storageKeys:t.map((e,n)=>(y(ct(e,32),"invalid slot",`storageKeys[${n}]`,e),e.toLowerCase()))}}function Qr(r){if(Array.isArray(r))return r.map((e,n)=>Array.isArray(e)?(y(e.length===2,"invalid slot set",`value[${n}]`,e),oa(e[0],e[1])):(y(e!=null&&typeof e=="object","invalid address-slot set","value",r),oa(e.address,e.storageKeys)));y(r!=null&&typeof r=="object","invalid access list","value",r);const t=Object.keys(r).map(e=>{const n=r[e].reduce((s,i)=>(s[i]=!0,s),{});return oa(e,Object.keys(n).sort())});return t.sort((e,n)=>e.address.localeCompare(n.address)),t}function og(r){let t;return typeof r=="string"?t=bi.computePublicKey(r,!1):t=r.publicKey,st(vt("0x"+t.substring(4)).substring(26))}function ag(r,t){return og(bi.recoverPublicKey(r,t))}const It=BigInt(0),cg=BigInt(2),lg=BigInt(27),ug=BigInt(28),fg=BigInt(35),hg=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),aa=4096*32;function ml(r,t){let e=r.toString(16);for(;e.length<2;)e="0"+e;return e+=si(t).substring(4),"0x"+e}function Jo(r){return r==="0x"?null:st(r)}function pc(r,t){try{return Qr(r)}catch(e){y(!1,e.message,t,r)}}function Vi(r,t){return r==="0x"?0:j(r,t)}function bt(r,t){if(r==="0x")return It;const e=L(r,t);return y(e<=hg,"value exceeds uint size",t,e),e}function ft(r,t){const e=L(r,"value"),n=Yt(e);return y(n.length<=32,"value too large",`tx.${t}`,e),n}function gc(r){return Qr(r).map(t=>[t.address,t.storageKeys])}function dg(r,t){y(Array.isArray(r),`invalid ${t}`,"value",r);for(let e=0;e<r.length;e++)y(ct(r[e],32),"invalid ${ param } hash",`value[${e}]`,r[e]);return r}function pg(r){const t=Go(r);y(Array.isArray(t)&&(t.length===9||t.length===6),"invalid field count for legacy transaction","data",r);const e={type:0,nonce:Vi(t[0],"nonce"),gasPrice:bt(t[1],"gasPrice"),gasLimit:bt(t[2],"gasLimit"),to:Jo(t[3]),value:bt(t[4],"value"),data:U(t[5]),chainId:It};if(t.length===6)return e;const n=bt(t[6],"v"),s=bt(t[7],"r"),i=bt(t[8],"s");if(s===It&&i===It)e.chainId=n;else{let o=(n-fg)/cg;o<It&&(o=It),e.chainId=o,y(o!==It||n===lg||n===ug,"non-canonical legacy v","v",t[6]),e.signature=De.from({r:Ur(t[7],32),s:Ur(t[8],32),v:n})}return e}function gg(r,t){const e=[ft(r.nonce,"nonce"),ft(r.gasPrice||0,"gasPrice"),ft(r.gasLimit,"gasLimit"),r.to||"0x",ft(r.value,"value"),r.data];let n=It;if(r.chainId!=It)n=L(r.chainId,"tx.chainId"),y(!t||t.networkV==null||t.legacyChainId===n,"tx.chainId/sig.v mismatch","sig",t);else if(r.signature){const i=r.signature.legacyChainId;i!=null&&(n=i)}if(!t)return n!==It&&(e.push(Yt(n)),e.push("0x"),e.push("0x")),Fr(e);let s=BigInt(27+t.yParity);return n!==It?s=De.getChainIdV(n,t.v):BigInt(t.v)!==s&&y(!1,"tx.chainId/sig.v mismatch","sig",t),e.push(Yt(s)),e.push(Yt(t.r)),e.push(Yt(t.s)),Fr(e)}function mc(r,t){let e;try{if(e=Vi(t[0],"yParity"),e!==0&&e!==1)throw new Error("bad yParity")}catch{y(!1,"invalid yParity","yParity",t[0])}const n=Ur(t[1],32),s=Ur(t[2],32),i=De.from({r:n,s,yParity:e});r.signature=i}function mg(r){const t=Go(q(r).slice(1));y(Array.isArray(t)&&(t.length===9||t.length===12),"invalid field count for transaction type: 2","data",U(r));const e={type:2,chainId:bt(t[0],"chainId"),nonce:Vi(t[1],"nonce"),maxPriorityFeePerGas:bt(t[2],"maxPriorityFeePerGas"),maxFeePerGas:bt(t[3],"maxFeePerGas"),gasPrice:null,gasLimit:bt(t[4],"gasLimit"),to:Jo(t[5]),value:bt(t[6],"value"),data:U(t[7]),accessList:pc(t[8],"accessList")};return t.length===9||mc(e,t.slice(9)),e}function yg(r,t){const e=[ft(r.chainId,"chainId"),ft(r.nonce,"nonce"),ft(r.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),ft(r.maxFeePerGas||0,"maxFeePerGas"),ft(r.gasLimit,"gasLimit"),r.to||"0x",ft(r.value,"value"),r.data,gc(r.accessList||[])];return t&&(e.push(ft(t.yParity,"yParity")),e.push(Yt(t.r)),e.push(Yt(t.s))),Et(["0x02",Fr(e)])}function wg(r){const t=Go(q(r).slice(1));y(Array.isArray(t)&&(t.length===8||t.length===11),"invalid field count for transaction type: 1","data",U(r));const e={type:1,chainId:bt(t[0],"chainId"),nonce:Vi(t[1],"nonce"),gasPrice:bt(t[2],"gasPrice"),gasLimit:bt(t[3],"gasLimit"),to:Jo(t[4]),value:bt(t[5],"value"),data:U(t[6]),accessList:pc(t[7],"accessList")};return t.length===8||mc(e,t.slice(8)),e}function Ag(r,t){const e=[ft(r.chainId,"chainId"),ft(r.nonce,"nonce"),ft(r.gasPrice||0,"gasPrice"),ft(r.gasLimit,"gasLimit"),r.to||"0x",ft(r.value,"value"),r.data,gc(r.accessList||[])];return t&&(e.push(ft(t.yParity,"recoveryParam")),e.push(Yt(t.r)),e.push(Yt(t.s))),Et(["0x01",Fr(e)])}function bg(r){let t=Go(q(r).slice(1)),e="3",n=null;if(t.length===4&&Array.isArray(t[0])){e="3 (network format)";const i=t[1],o=t[2],a=t[3];y(Array.isArray(i),"invalid network format: blobs not an array","fields[1]",i),y(Array.isArray(o),"invalid network format: commitments not an array","fields[2]",o),y(Array.isArray(a),"invalid network format: proofs not an array","fields[3]",a),y(i.length===o.length,"invalid network format: blobs/commitments length mismatch","fields",t),y(i.length===a.length,"invalid network format: blobs/proofs length mismatch","fields",t),n=[];for(let c=0;c<t[1].length;c++)n.push({data:i[c],commitment:o[c],proof:a[c]});t=t[0]}y(Array.isArray(t)&&(t.length===11||t.length===14),`invalid field count for transaction type: ${e}`,"data",U(r));const s={type:3,chainId:bt(t[0],"chainId"),nonce:Vi(t[1],"nonce"),maxPriorityFeePerGas:bt(t[2],"maxPriorityFeePerGas"),maxFeePerGas:bt(t[3],"maxFeePerGas"),gasPrice:null,gasLimit:bt(t[4],"gasLimit"),to:Jo(t[5]),value:bt(t[6],"value"),data:U(t[7]),accessList:pc(t[8],"accessList"),maxFeePerBlobGas:bt(t[9],"maxFeePerBlobGas"),blobVersionedHashes:t[10]};n&&(s.blobs=n),y(s.to!=null,`invalid address for transaction type: ${e}`,"data",r),y(Array.isArray(s.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",r);for(let i=0;i<s.blobVersionedHashes.length;i++)y(ct(s.blobVersionedHashes[i],32),`invalid blobVersionedHash at index ${i}: must be length 32`,"data",r);return t.length===11||mc(s,t.slice(11)),s}function Eg(r,t,e){const n=[ft(r.chainId,"chainId"),ft(r.nonce,"nonce"),ft(r.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),ft(r.maxFeePerGas||0,"maxFeePerGas"),ft(r.gasLimit,"gasLimit"),r.to||Ai,ft(r.value,"value"),r.data,gc(r.accessList||[]),ft(r.maxFeePerBlobGas||0,"maxFeePerBlobGas"),dg(r.blobVersionedHashes||[],"blobVersionedHashes")];return t&&(n.push(ft(t.yParity,"yParity")),n.push(Yt(t.r)),n.push(Yt(t.s)),e)?Et(["0x03",Fr([n,e.map(s=>s.data),e.map(s=>s.commitment),e.map(s=>s.proof)])]):Et(["0x03",Fr(n)])}var _e,Es,xs,vs,Ns,Ps,Is,Bs,Cs,ks,Ts,Os,vr,Un,un,Fn,Rs,oo;const rn=class rn{constructor(){E(this,Rs);E(this,_e);E(this,Es);E(this,xs);E(this,vs);E(this,Ns);E(this,Ps);E(this,Is);E(this,Bs);E(this,Cs);E(this,ks);E(this,Ts);E(this,Os);E(this,vr);E(this,Un);E(this,un);E(this,Fn);d(this,_e,null),d(this,Es,null),d(this,vs,0),d(this,Ns,It),d(this,Ps,null),d(this,Is,null),d(this,Bs,null),d(this,xs,"0x"),d(this,Cs,It),d(this,ks,It),d(this,Ts,null),d(this,Os,null),d(this,vr,null),d(this,Un,null),d(this,Fn,null),d(this,un,null)}get type(){return l(this,_e)}set type(t){switch(t){case null:d(this,_e,null);break;case 0:case"legacy":d(this,_e,0);break;case 1:case"berlin":case"eip-2930":d(this,_e,1);break;case 2:case"london":case"eip-1559":d(this,_e,2);break;case 3:case"cancun":case"eip-4844":d(this,_e,3);break;default:y(!1,"unsupported transaction type","type",t)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844"}return null}get to(){const t=l(this,Es);return t==null&&this.type===3?Ai:t}set to(t){d(this,Es,t==null?null:st(t))}get nonce(){return l(this,vs)}set nonce(t){d(this,vs,j(t,"value"))}get gasLimit(){return l(this,Ns)}set gasLimit(t){d(this,Ns,L(t))}get gasPrice(){const t=l(this,Ps);return t==null&&(this.type===0||this.type===1)?It:t}set gasPrice(t){d(this,Ps,t==null?null:L(t,"gasPrice"))}get maxPriorityFeePerGas(){const t=l(this,Is);return t??(this.type===2||this.type===3?It:null)}set maxPriorityFeePerGas(t){d(this,Is,t==null?null:L(t,"maxPriorityFeePerGas"))}get maxFeePerGas(){const t=l(this,Bs);return t??(this.type===2||this.type===3?It:null)}set maxFeePerGas(t){d(this,Bs,t==null?null:L(t,"maxFeePerGas"))}get data(){return l(this,xs)}set data(t){d(this,xs,U(t))}get value(){return l(this,Cs)}set value(t){d(this,Cs,L(t,"value"))}get chainId(){return l(this,ks)}set chainId(t){d(this,ks,L(t))}get signature(){return l(this,Ts)||null}set signature(t){d(this,Ts,t==null?null:De.from(t))}get accessList(){const t=l(this,Os)||null;return t??(this.type===1||this.type===2||this.type===3?[]:null)}set accessList(t){d(this,Os,t==null?null:Qr(t))}get maxFeePerBlobGas(){const t=l(this,vr);return t==null&&this.type===3?It:t}set maxFeePerBlobGas(t){d(this,vr,t==null?null:L(t,"maxFeePerBlobGas"))}get blobVersionedHashes(){let t=l(this,Un);return t==null&&this.type===3?[]:t}set blobVersionedHashes(t){if(t!=null){y(Array.isArray(t),"blobVersionedHashes must be an Array","value",t),t=t.slice();for(let e=0;e<t.length;e++)y(ct(t[e],32),"invalid blobVersionedHash",`value[${e}]`,t[e])}d(this,Un,t)}get blobs(){return l(this,Fn)==null?null:l(this,Fn).map(t=>Object.assign({},t))}set blobs(t){if(t==null){d(this,Fn,null);return}const e=[],n=[];for(let s=0;s<t.length;s++){const i=t[s];if(ec(i)){v(l(this,un),"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let o=q(i);if(y(o.length<=aa,"blob is too large",`blobs[${s}]`,i),o.length!==aa){const u=new Uint8Array(aa);u.set(o),o=u}const a=l(this,un).blobToKzgCommitment(o),c=U(l(this,un).computeBlobKzgProof(o,a));e.push({data:U(o),commitment:U(a),proof:c}),n.push(ml(1,a))}else{const o=U(i.commitment);e.push({data:U(i.data),commitment:o,proof:U(i.proof)}),n.push(ml(1,o))}}d(this,Fn,e),d(this,Un,n)}get kzg(){return l(this,un)}set kzg(t){d(this,un,t)}get hash(){return this.signature==null?null:vt(N(this,Rs,oo).call(this,!0,!1))}get unsignedHash(){return vt(this.unsignedSerialized)}get from(){return this.signature==null?null:ag(this.unsignedHash,this.signature)}get fromPublicKey(){return this.signature==null?null:bi.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return this.signature!=null}get serialized(){return N(this,Rs,oo).call(this,!0,!0)}get unsignedSerialized(){return N(this,Rs,oo).call(this,!1,!1)}inferType(){const t=this.inferTypes();return t.indexOf(2)>=0?2:t.pop()}inferTypes(){const t=this.gasPrice!=null,e=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,n=this.accessList!=null,s=l(this,vr)!=null||l(this,Un);this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&v(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),v(!e||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),v(this.type!==0||!n,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const i=[];return this.type!=null?i.push(this.type):e?i.push(2):t?(i.push(1),n||i.push(0)):n?(i.push(1),i.push(2)):(s&&this.to||(i.push(0),i.push(1),i.push(2)),i.push(3)),i.sort(),i}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}clone(){return rn.from(this)}toJSON(){const t=e=>e==null?null:e.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:t(this.gasLimit),gasPrice:t(this.gasPrice),maxPriorityFeePerGas:t(this.maxPriorityFeePerGas),maxFeePerGas:t(this.maxFeePerGas),value:t(this.value),chainId:t(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(t){if(t==null)return new rn;if(typeof t=="string"){const n=q(t);if(n[0]>=127)return rn.from(pg(n));switch(n[0]){case 1:return rn.from(wg(n));case 2:return rn.from(mg(n));case 3:return rn.from(bg(n))}v(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const e=new rn;return t.type!=null&&(e.type=t.type),t.to!=null&&(e.to=t.to),t.nonce!=null&&(e.nonce=t.nonce),t.gasLimit!=null&&(e.gasLimit=t.gasLimit),t.gasPrice!=null&&(e.gasPrice=t.gasPrice),t.maxPriorityFeePerGas!=null&&(e.maxPriorityFeePerGas=t.maxPriorityFeePerGas),t.maxFeePerGas!=null&&(e.maxFeePerGas=t.maxFeePerGas),t.maxFeePerBlobGas!=null&&(e.maxFeePerBlobGas=t.maxFeePerBlobGas),t.data!=null&&(e.data=t.data),t.value!=null&&(e.value=t.value),t.chainId!=null&&(e.chainId=t.chainId),t.signature!=null&&(e.signature=De.from(t.signature)),t.accessList!=null&&(e.accessList=t.accessList),t.blobVersionedHashes!=null&&(e.blobVersionedHashes=t.blobVersionedHashes),t.kzg!=null&&(e.kzg=t.kzg),t.blobs!=null&&(e.blobs=t.blobs),t.hash!=null&&(y(e.isSigned(),"unsigned transaction cannot define '.hash'","tx",t),y(e.hash===t.hash,"hash mismatch","tx",t)),t.from!=null&&(y(e.isSigned(),"unsigned transaction cannot define '.from'","tx",t),y(e.from.toLowerCase()===(t.from||"").toLowerCase(),"from mismatch","tx",t)),e}};_e=new WeakMap,Es=new WeakMap,xs=new WeakMap,vs=new WeakMap,Ns=new WeakMap,Ps=new WeakMap,Is=new WeakMap,Bs=new WeakMap,Cs=new WeakMap,ks=new WeakMap,Ts=new WeakMap,Os=new WeakMap,vr=new WeakMap,Un=new WeakMap,un=new WeakMap,Fn=new WeakMap,Rs=new WeakSet,oo=function(t,e){v(!t||this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const n=t?this.signature:null;switch(this.inferType()){case 0:return gg(this,n);case 1:return Ag(this,n);case 2:return yg(this,n);case 3:return Eg(this,n,e?this.blobs:null)}v(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})};let No=rn;const mf=new Uint8Array(32);mf.fill(0);const xg=BigInt(-1),yf=BigInt(0),wf=BigInt(1),vg=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function Ng(r){const t=q(r),e=t.length%32;return e?Et([t,mf.slice(e)]):U(t)}const Pg=Wn(wf,32),Ig=Wn(yf,32),yl={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},ca=["name","version","chainId","verifyingContract","salt"];function wl(r){return function(t){return y(typeof t=="string",`invalid domain value for ${JSON.stringify(r)}`,`domain.${r}`,t),t}}const Bg={name:wl("name"),version:wl("version"),chainId:function(r){const t=L(r,"domain.chainId");return y(t>=0,"invalid chain ID","domain.chainId",r),Number.isSafeInteger(t)?Number(t):ts(t)},verifyingContract:function(r){try{return st(r).toLowerCase()}catch{}y(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",r)},salt:function(r){const t=q(r,"domain.salt");return y(t.length===32,'invalid domain value "salt"',"domain.salt",r),U(t)}};function la(r){{const t=r.match(/^(u?)int(\d+)$/);if(t){const e=t[1]==="",n=parseInt(t[2]);y(n%8===0&&n!==0&&n<=256&&t[2]===String(n),"invalid numeric width","type",r);const s=cr(vg,e?n-1:n),i=e?(s+wf)*xg:yf;return function(o){const a=L(o,"value");return y(a>=i&&a<=s,`value out-of-bounds for ${r}`,"value",a),Wn(e?su(a,256):a,32)}}}{const t=r.match(/^bytes(\d+)$/);if(t){const e=parseInt(t[1]);return y(e!==0&&e<=32&&t[1]===String(e),"invalid bytes width","type",r),function(n){const s=q(n);return y(s.length===e,`invalid length for ${r}`,"value",n),Ng(n)}}}switch(r){case"address":return function(t){return Ur(st(t),32)};case"bool":return function(t){return t?Pg:Ig};case"bytes":return function(t){return vt(t)};case"string":return function(t){return Lr(t)}}return null}function Al(r,t){return`${r}(${t.map(({name:e,type:n})=>n+" "+e).join(",")})`}function eo(r){const t=r.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return t?{base:t[1],index:t[2]+t[4],array:{base:t[1],prefix:t[1]+t[2],count:t[5]?parseInt(t[5]):-1}}:{base:r}}var Oi,fn,Ss,To,Af;const Ae=class Ae{constructor(t){E(this,To);A(this,"primaryType");E(this,Oi);E(this,fn);E(this,Ss);d(this,fn,new Map),d(this,Ss,new Map);const e=new Map,n=new Map,s=new Map,i={};Object.keys(t).forEach(c=>{i[c]=t[c].map(({name:u,type:f})=>{let{base:h,index:p}=eo(f);return h==="int"&&!t.int&&(h="int256"),h==="uint"&&!t.uint&&(h="uint256"),{name:u,type:h+(p||"")}}),e.set(c,new Set),n.set(c,[]),s.set(c,new Set)}),d(this,Oi,JSON.stringify(i));for(const c in i){const u=new Set;for(const f of i[c]){y(!u.has(f.name),`duplicate variable name ${JSON.stringify(f.name)} in ${JSON.stringify(c)}`,"types",t),u.add(f.name);const h=eo(f.type).base;y(h!==c,`circular type reference to ${JSON.stringify(h)}`,"types",t),!la(h)&&(y(n.has(h),`unknown type ${JSON.stringify(h)}`,"types",t),n.get(h).push(c),e.get(c).add(h))}}const o=Array.from(n.keys()).filter(c=>n.get(c).length===0);y(o.length!==0,"missing primary type","types",t),y(o.length===1,`ambiguous primary types or unused types: ${o.map(c=>JSON.stringify(c)).join(", ")}`,"types",t),H(this,{primaryType:o[0]});function a(c,u){y(!u.has(c),`circular type reference to ${JSON.stringify(c)}`,"types",t),u.add(c);for(const f of e.get(c))if(n.has(f)){a(f,u);for(const h of u)s.get(h).add(f)}u.delete(c)}a(this.primaryType,new Set);for(const[c,u]of s){const f=Array.from(u);f.sort(),l(this,fn).set(c,Al(c,i[c])+f.map(h=>Al(h,i[h])).join(""))}}get types(){return JSON.parse(l(this,Oi))}getEncoder(t){let e=l(this,Ss).get(t);return e||(e=N(this,To,Af).call(this,t),l(this,Ss).set(t,e)),e}encodeType(t){const e=l(this,fn).get(t);return y(e,`unknown type: ${JSON.stringify(t)}`,"name",t),e}encodeData(t,e){return this.getEncoder(t)(e)}hashStruct(t,e){return vt(this.encodeData(t,e))}encode(t){return this.encodeData(this.primaryType,t)}hash(t){return this.hashStruct(this.primaryType,t)}_visit(t,e,n){if(la(t))return n(t,e);const s=eo(t).array;if(s)return y(s.count===-1||s.count===e.length,`array length mismatch; expected length ${s.count}`,"value",e),e.map(o=>this._visit(s.prefix,o,n));const i=this.types[t];if(i)return i.reduce((o,{name:a,type:c})=>(o[a]=this._visit(c,e[a],n),o),{});y(!1,`unknown type: ${t}`,"type",t)}visit(t,e){return this._visit(this.primaryType,t,e)}static from(t){return new Ae(t)}static getPrimaryType(t){return Ae.from(t).primaryType}static hashStruct(t,e,n){return Ae.from(e).hashStruct(t,n)}static hashDomain(t){const e=[];for(const n in t){if(t[n]==null)continue;const s=yl[n];y(s,`invalid typed-data domain key: ${JSON.stringify(n)}`,"domain",t),e.push({name:n,type:s})}return e.sort((n,s)=>ca.indexOf(n.name)-ca.indexOf(s.name)),Ae.hashStruct("EIP712Domain",{EIP712Domain:e},t)}static encode(t,e,n){return Et(["0x1901",Ae.hashDomain(t),Ae.from(e).hash(n)])}static hash(t,e,n){return vt(Ae.encode(t,e,n))}static async resolveNames(t,e,n,s){t=Object.assign({},t);for(const a in t)t[a]==null&&delete t[a];const i={};t.verifyingContract&&!ct(t.verifyingContract,20)&&(i[t.verifyingContract]="0x");const o=Ae.from(e);o.visit(n,(a,c)=>(a==="address"&&!ct(c,20)&&(i[c]="0x"),c));for(const a in i)i[a]=await s(a);return t.verifyingContract&&i[t.verifyingContract]&&(t.verifyingContract=i[t.verifyingContract]),n=o.visit(n,(a,c)=>a==="address"&&i[c]?i[c]:c),{domain:t,value:n}}static getPayload(t,e,n){Ae.hashDomain(t);const s={},i=[];ca.forEach(c=>{const u=t[c];u!=null&&(s[c]=Bg[c](u),i.push({name:c,type:yl[c]}))});const o=Ae.from(e);e=o.types;const a=Object.assign({},e);return y(a.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",e),a.EIP712Domain=i,o.encode(n),{types:a,domain:s,primaryType:o.primaryType,message:o.visit(n,(c,u)=>{if(c.match(/^bytes(\d*)/))return U(q(u));if(c.match(/^u?int/))return L(u).toString();switch(c){case"address":return u.toLowerCase();case"bool":return!!u;case"string":return y(typeof u=="string","invalid string","value",u),u}y(!1,"unsupported type","type",c)})}}};Oi=new WeakMap,fn=new WeakMap,Ss=new WeakMap,To=new WeakSet,Af=function(t){{const s=la(t);if(s)return s}const e=eo(t).array;if(e){const s=e.prefix,i=this.getEncoder(s);return o=>{y(e.count===-1||e.count===o.length,`array length mismatch; expected length ${e.count}`,"value",o);let a=o.map(i);return l(this,fn).has(s)&&(a=a.map(vt)),vt(Et(a))}}const n=this.types[t];if(n){const s=Lr(l(this,fn).get(t));return i=>{const o=n.map(({name:a,type:c})=>{const u=this.getEncoder(c)(i[a]);return l(this,fn).has(c)?vt(u):u});return o.unshift(s),Et(o)}}y(!1,`unknown type: ${t}`,"type",t)};let Po=Ae;function $t(r){const t=new Set;return r.forEach(e=>t.add(e)),Object.freeze(t)}const Cg="external public payable override",kg=$t(Cg.split(" ")),bf="constant external internal payable private public pure view override",Tg=$t(bf.split(" ")),Ef="constructor error event fallback function receive struct",xf=$t(Ef.split(" ")),vf="calldata memory storage payable indexed",Og=$t(vf.split(" ")),Rg="tuple returns",Sg=[Ef,vf,Rg,bf].join(" "),Ug=$t(Sg.split(" ")),Fg={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},Lg=new RegExp("^(\\s*)"),Dg=new RegExp("^([0-9]+)"),Mg=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),Nf=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),Pf=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");var Tt,Ue,Ri,Ma;const Oo=class Oo{constructor(t){E(this,Ri);E(this,Tt);E(this,Ue);d(this,Tt,0),d(this,Ue,t.slice())}get offset(){return l(this,Tt)}get length(){return l(this,Ue).length-l(this,Tt)}clone(){return new Oo(l(this,Ue))}reset(){d(this,Tt,0)}popKeyword(t){const e=this.peek();if(e.type!=="KEYWORD"||!t.has(e.text))throw new Error(`expected keyword ${e.text}`);return this.pop().text}popType(t){if(this.peek().type!==t){const e=this.peek();throw new Error(`expected ${t}; got ${e.type} ${JSON.stringify(e.text)}`)}return this.pop().text}popParen(){const t=this.peek();if(t.type!=="OPEN_PAREN")throw new Error("bad start");const e=N(this,Ri,Ma).call(this,l(this,Tt)+1,t.match+1);return d(this,Tt,t.match+1),e}popParams(){const t=this.peek();if(t.type!=="OPEN_PAREN")throw new Error("bad start");const e=[];for(;l(this,Tt)<t.match-1;){const n=this.peek().linkNext;e.push(N(this,Ri,Ma).call(this,l(this,Tt)+1,n)),d(this,Tt,n)}return d(this,Tt,t.match+1),e}peek(){if(l(this,Tt)>=l(this,Ue).length)throw new Error("out-of-bounds");return l(this,Ue)[l(this,Tt)]}peekKeyword(t){const e=this.peekType("KEYWORD");return e!=null&&t.has(e)?e:null}peekType(t){if(this.length===0)return null;const e=this.peek();return e.type===t?e.text:null}pop(){const t=this.peek();return ai(this,Tt)._++,t}toString(){const t=[];for(let e=l(this,Tt);e<l(this,Ue).length;e++){const n=l(this,Ue)[e];t.push(`${n.type}:${n.text}`)}return`<TokenString ${t.join(" ")}>`}};Tt=new WeakMap,Ue=new WeakMap,Ri=new WeakSet,Ma=function(t=0,e=0){return new Oo(l(this,Ue).slice(t,e).map(n=>Object.freeze(Object.assign({},n,{match:n.match-t,linkBack:n.linkBack-t,linkNext:n.linkNext-t}))))};let Me=Oo;function qn(r){const t=[],e=o=>{const a=i<r.length?JSON.stringify(r[i]):"$EOI";throw new Error(`invalid token ${a} at ${i}: ${o}`)};let n=[],s=[],i=0;for(;i<r.length;){let o=r.substring(i),a=o.match(Lg);a&&(i+=a[1].length,o=r.substring(i));const c={depth:n.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:i,value:-1};t.push(c);let u=Fg[o[0]]||"";if(u){if(c.type=u,c.text=o[0],i++,u==="OPEN_PAREN")n.push(t.length-1),s.push(t.length-1);else if(u=="CLOSE_PAREN")n.length===0&&e("no matching open bracket"),c.match=n.pop(),t[c.match].match=t.length-1,c.depth--,c.linkBack=s.pop(),t[c.linkBack].linkNext=t.length-1;else if(u==="COMMA")c.linkBack=s.pop(),t[c.linkBack].linkNext=t.length-1,s.push(t.length-1);else if(u==="OPEN_BRACKET")c.type="BRACKET";else if(u==="CLOSE_BRACKET"){let f=t.pop().text;if(t.length>0&&t[t.length-1].type==="NUMBER"){const h=t.pop().text;f=h+f,t[t.length-1].value=j(h)}if(t.length===0||t[t.length-1].type!=="BRACKET")throw new Error("missing opening bracket");t[t.length-1].text+=f}continue}if(a=o.match(Mg),a){if(c.text=a[1],i+=c.text.length,Ug.has(c.text)){c.type="KEYWORD";continue}if(c.text.match(Pf)){c.type="TYPE";continue}c.type="ID";continue}if(a=o.match(Dg),a){c.text=a[1],c.type="NUMBER",i+=c.text.length;continue}throw new Error(`unexpected token ${JSON.stringify(o[0])} at position ${i}`)}return new Me(t.map(o=>Object.freeze(o)))}function bl(r,t){let e=[];for(const n in t.keys())r.has(n)&&e.push(n);if(e.length>1)throw new Error(`conflicting types: ${e.join(", ")}`)}function zo(r,t){if(t.peekKeyword(xf)){const e=t.pop().text;if(e!==r)throw new Error(`expected ${r}, got ${e}`)}return t.popType("ID")}function vn(r,t){const e=new Set;for(;;){const n=r.peekType("KEYWORD");if(n==null||t&&!t.has(n))break;if(r.pop(),e.has(n))throw new Error(`duplicate keywords: ${JSON.stringify(n)}`);e.add(n)}return Object.freeze(e)}function If(r){let t=vn(r,Tg);return bl(t,$t("constant payable nonpayable".split(" "))),bl(t,$t("pure view payable nonpayable".split(" "))),t.has("view")?"view":t.has("pure")?"pure":t.has("payable")?"payable":t.has("nonpayable")?"nonpayable":t.has("constant")?"view":"nonpayable"}function xn(r,t){return r.popParams().map(e=>Rt.from(e,t))}function Bf(r){if(r.peekType("AT")){if(r.pop(),r.peekType("NUMBER"))return L(r.pop().text);throw new Error("invalid gas")}return null}function Dr(r){if(r.length)throw new Error(`unexpected tokens at offset ${r.offset}: ${r.toString()}`)}const Gg=new RegExp(/^(.*)\[([0-9]*)\]$/);function El(r){const t=r.match(Pf);if(y(t,"invalid type","type",r),r==="uint")return"uint256";if(r==="int")return"int256";if(t[2]){const e=parseInt(t[2]);y(e!==0&&e<=32,"invalid bytes length","type",r)}else if(t[3]){const e=parseInt(t[3]);y(e!==0&&e<=256&&e%8===0,"invalid numeric width","type",r)}return r}const gt={},oe=Symbol.for("_ethers_internal"),xl="_ParamTypeInternal",vl="_ErrorInternal",Nl="_EventInternal",Pl="_ConstructorInternal",Il="_FallbackInternal",Bl="_FunctionInternal",Cl="_StructInternal";var Us,ao;const be=class be{constructor(t,e,n,s,i,o,a,c){E(this,Us);A(this,"name");A(this,"type");A(this,"baseType");A(this,"indexed");A(this,"components");A(this,"arrayLength");A(this,"arrayChildren");if(Hi(t,gt,"ParamType"),Object.defineProperty(this,oe,{value:xl}),o&&(o=Object.freeze(o.slice())),s==="array"){if(a==null||c==null)throw new Error("")}else if(a!=null||c!=null)throw new Error("");if(s==="tuple"){if(o==null)throw new Error("")}else if(o!=null)throw new Error("");H(this,{name:e,type:n,baseType:s,indexed:i,components:o,arrayLength:a,arrayChildren:c})}format(t){if(t==null&&(t="sighash"),t==="json"){const n=this.name||"";if(this.isArray()){const i=JSON.parse(this.arrayChildren.format("json"));return i.name=n,i.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(i)}const s={type:this.baseType==="tuple"?"tuple":this.type,name:n};return typeof this.indexed=="boolean"&&(s.indexed=this.indexed),this.isTuple()&&(s.components=this.components.map(i=>JSON.parse(i.format(t)))),JSON.stringify(s)}let e="";return this.isArray()?(e+=this.arrayChildren.format(t),e+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?e+="("+this.components.map(n=>n.format(t)).join(t==="full"?", ":",")+")":e+=this.type,t!=="sighash"&&(this.indexed===!0&&(e+=" indexed"),t==="full"&&this.name&&(e+=" "+this.name)),e}isArray(){return this.baseType==="array"}isTuple(){return this.baseType==="tuple"}isIndexable(){return this.indexed!=null}walk(t,e){if(this.isArray()){if(!Array.isArray(t))throw new Error("invalid array value");if(this.arrayLength!==-1&&t.length!==this.arrayLength)throw new Error("array is wrong length");const n=this;return t.map(s=>n.arrayChildren.walk(s,e))}if(this.isTuple()){if(!Array.isArray(t))throw new Error("invalid tuple value");if(t.length!==this.components.length)throw new Error("array is wrong length");const n=this;return t.map((s,i)=>n.components[i].walk(s,e))}return e(this.type,t)}async walkAsync(t,e){const n=[],s=[t];return N(this,Us,ao).call(this,n,t,e,i=>{s[0]=i}),n.length&&await Promise.all(n),s[0]}static from(t,e){if(be.isParamType(t))return t;if(typeof t=="string")try{return be.from(qn(t),e)}catch{y(!1,"invalid param type","obj",t)}else if(t instanceof Me){let a="",c="",u=null;vn(t,$t(["tuple"])).has("tuple")||t.peekType("OPEN_PAREN")?(c="tuple",u=t.popParams().map(m=>be.from(m)),a=`tuple(${u.map(m=>m.format()).join(",")})`):(a=El(t.popType("TYPE")),c=a);let f=null,h=null;for(;t.length&&t.peekType("BRACKET");){const m=t.pop();f=new be(gt,"",a,c,null,u,h,f),h=m.value,a+=m.text,c="array",u=null}let p=null;if(vn(t,Og).has("indexed")){if(!e)throw new Error("");p=!0}const w=t.peekType("ID")?t.pop().text:"";if(t.length)throw new Error("leftover tokens");return new be(gt,w,a,c,p,u,h,f)}const n=t.name;y(!n||typeof n=="string"&&n.match(Nf),"invalid name","obj.name",n);let s=t.indexed;s!=null&&(y(e,"parameter cannot be indexed","obj.indexed",t.indexed),s=!!s);let i=t.type,o=i.match(Gg);if(o){const a=parseInt(o[2]||"-1"),c=be.from({type:o[1],components:t.components});return new be(gt,n||"",i,"array",s,null,a,c)}if(i==="tuple"||i.startsWith("tuple(")||i.startsWith("(")){const a=t.components!=null?t.components.map(u=>be.from(u)):null;return new be(gt,n||"",i,"tuple",s,a,null,null)}return i=El(t.type),new be(gt,n||"",i,i,s,null,null,null)}static isParamType(t){return t&&t[oe]===xl}};Us=new WeakSet,ao=function(t,e,n,s){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(this.arrayLength!==-1&&e.length!==this.arrayLength)throw new Error("array is wrong length");const o=this.arrayChildren,a=e.slice();a.forEach((c,u)=>{var f;N(f=o,Us,ao).call(f,t,c,n,h=>{a[u]=h})}),s(a);return}if(this.isTuple()){const o=this.components;let a;if(Array.isArray(e))a=e.slice();else{if(e==null||typeof e!="object")throw new Error("invalid tuple value");a=o.map(c=>{if(!c.name)throw new Error("cannot use object value with unnamed components");if(!(c.name in e))throw new Error(`missing value for component ${c.name}`);return e[c.name]})}if(a.length!==this.components.length)throw new Error("array is wrong length");a.forEach((c,u)=>{var f;N(f=o[u],Us,ao).call(f,t,c,n,h=>{a[u]=h})}),s(a);return}const i=n(this.type,e);i.then?t.push(async function(){s(await i)}()):s(i)};let Rt=be;class Mr{constructor(t,e,n){A(this,"type");A(this,"inputs");Hi(t,gt,"Fragment"),n=Object.freeze(n.slice()),H(this,{type:e,inputs:n})}static from(t){if(typeof t=="string"){try{Mr.from(JSON.parse(t))}catch{}return Mr.from(qn(t))}if(t instanceof Me)switch(t.peekKeyword(xf)){case"constructor":return bn.from(t);case"error":return se.from(t);case"event":return Ye.from(t);case"fallback":case"receive":return sn.from(t);case"function":return Xe.from(t);case"struct":return Sr.from(t)}else if(typeof t=="object"){switch(t.type){case"constructor":return bn.from(t);case"error":return se.from(t);case"event":return Ye.from(t);case"fallback":case"receive":return sn.from(t);case"function":return Xe.from(t);case"struct":return Sr.from(t)}v(!1,`unsupported type: ${t.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}y(!1,"unsupported frgament object","obj",t)}static isConstructor(t){return bn.isFragment(t)}static isError(t){return se.isFragment(t)}static isEvent(t){return Ye.isFragment(t)}static isFunction(t){return Xe.isFragment(t)}static isStruct(t){return Sr.isFragment(t)}}class Ko extends Mr{constructor(e,n,s,i){super(e,n,i);A(this,"name");y(typeof s=="string"&&s.match(Nf),"invalid identifier","name",s),i=Object.freeze(i.slice()),H(this,{name:s})}}function Pi(r,t){return"("+t.map(e=>e.format(r)).join(r==="full"?", ":",")+")"}class se extends Ko{constructor(t,e,n){super(t,"error",e,n),Object.defineProperty(this,oe,{value:vl})}get selector(){return Lr(this.format("sighash")).substring(0,10)}format(t){if(t==null&&(t="sighash"),t==="json")return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(n=>JSON.parse(n.format(t)))});const e=[];return t!=="sighash"&&e.push("error"),e.push(this.name+Pi(t,this.inputs)),e.join(" ")}static from(t){if(se.isFragment(t))return t;if(typeof t=="string")return se.from(qn(t));if(t instanceof Me){const e=zo("error",t),n=xn(t);return Dr(t),new se(gt,e,n)}return new se(gt,t.name,t.inputs?t.inputs.map(Rt.from):[])}static isFragment(t){return t&&t[oe]===vl}}class Ye extends Ko{constructor(e,n,s,i){super(e,"event",n,s);A(this,"anonymous");Object.defineProperty(this,oe,{value:Nl}),H(this,{anonymous:i})}get topicHash(){return Lr(this.format("sighash"))}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(s=>JSON.parse(s.format(e)))});const n=[];return e!=="sighash"&&n.push("event"),n.push(this.name+Pi(e,this.inputs)),e!=="sighash"&&this.anonymous&&n.push("anonymous"),n.join(" ")}static getTopicHash(e,n){return n=(n||[]).map(i=>Rt.from(i)),new Ye(gt,e,n,!1).topicHash}static from(e){if(Ye.isFragment(e))return e;if(typeof e=="string")try{return Ye.from(qn(e))}catch{y(!1,"invalid event fragment","obj",e)}else if(e instanceof Me){const n=zo("event",e),s=xn(e,!0),i=!!vn(e,$t(["anonymous"])).has("anonymous");return Dr(e),new Ye(gt,n,s,i)}return new Ye(gt,e.name,e.inputs?e.inputs.map(n=>Rt.from(n,!0)):[],!!e.anonymous)}static isFragment(e){return e&&e[oe]===Nl}}class bn extends Mr{constructor(e,n,s,i,o){super(e,n,s);A(this,"payable");A(this,"gas");Object.defineProperty(this,oe,{value:Pl}),H(this,{payable:i,gas:o})}format(e){if(v(e!=null&&e!=="sighash","cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),e==="json")return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(s=>JSON.parse(s.format(e)))});const n=[`constructor${Pi(e,this.inputs)}`];return this.payable&&n.push("payable"),this.gas!=null&&n.push(`@${this.gas.toString()}`),n.join(" ")}static from(e){if(bn.isFragment(e))return e;if(typeof e=="string")try{return bn.from(qn(e))}catch{y(!1,"invalid constuctor fragment","obj",e)}else if(e instanceof Me){vn(e,$t(["constructor"]));const n=xn(e),s=!!vn(e,kg).has("payable"),i=Bf(e);return Dr(e),new bn(gt,"constructor",n,s,i)}return new bn(gt,"constructor",e.inputs?e.inputs.map(Rt.from):[],!!e.payable,e.gas!=null?e.gas:null)}static isFragment(e){return e&&e[oe]===Pl}}class sn extends Mr{constructor(e,n,s){super(e,"fallback",n);A(this,"payable");Object.defineProperty(this,oe,{value:Il}),H(this,{payable:s})}format(e){const n=this.inputs.length===0?"receive":"fallback";if(e==="json"){const s=this.payable?"payable":"nonpayable";return JSON.stringify({type:n,stateMutability:s})}return`${n}()${this.payable?" payable":""}`}static from(e){if(sn.isFragment(e))return e;if(typeof e=="string")try{return sn.from(qn(e))}catch{y(!1,"invalid fallback fragment","obj",e)}else if(e instanceof Me){const n=e.toString(),s=e.peekKeyword($t(["fallback","receive"]));if(y(s,"type must be fallback or receive","obj",n),e.popKeyword($t(["fallback","receive"]))==="receive"){const c=xn(e);return y(c.length===0,"receive cannot have arguments","obj.inputs",c),vn(e,$t(["payable"])),Dr(e),new sn(gt,[],!0)}let o=xn(e);o.length?y(o.length===1&&o[0].type==="bytes","invalid fallback inputs","obj.inputs",o.map(c=>c.format("minimal")).join(", ")):o=[Rt.from("bytes")];const a=If(e);if(y(a==="nonpayable"||a==="payable","fallback cannot be constants","obj.stateMutability",a),vn(e,$t(["returns"])).has("returns")){const c=xn(e);y(c.length===1&&c[0].type==="bytes","invalid fallback outputs","obj.outputs",c.map(u=>u.format("minimal")).join(", "))}return Dr(e),new sn(gt,o,a==="payable")}if(e.type==="receive")return new sn(gt,[],!0);if(e.type==="fallback"){const n=[Rt.from("bytes")],s=e.stateMutability==="payable";return new sn(gt,n,s)}y(!1,"invalid fallback description","obj",e)}static isFragment(e){return e&&e[oe]===Il}}class Xe extends Ko{constructor(e,n,s,i,o,a){super(e,"function",n,i);A(this,"constant");A(this,"outputs");A(this,"stateMutability");A(this,"payable");A(this,"gas");Object.defineProperty(this,oe,{value:Bl}),o=Object.freeze(o.slice()),H(this,{constant:s==="view"||s==="pure",gas:a,outputs:o,payable:s==="payable",stateMutability:s})}get selector(){return Lr(this.format("sighash")).substring(0,10)}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(s=>JSON.parse(s.format(e))),outputs:this.outputs.map(s=>JSON.parse(s.format(e)))});const n=[];return e!=="sighash"&&n.push("function"),n.push(this.name+Pi(e,this.inputs)),e!=="sighash"&&(this.stateMutability!=="nonpayable"&&n.push(this.stateMutability),this.outputs&&this.outputs.length&&(n.push("returns"),n.push(Pi(e,this.outputs))),this.gas!=null&&n.push(`@${this.gas.toString()}`)),n.join(" ")}static getSelector(e,n){return n=(n||[]).map(i=>Rt.from(i)),new Xe(gt,e,"view",n,[],null).selector}static from(e){if(Xe.isFragment(e))return e;if(typeof e=="string")try{return Xe.from(qn(e))}catch{y(!1,"invalid function fragment","obj",e)}else if(e instanceof Me){const s=zo("function",e),i=xn(e),o=If(e);let a=[];vn(e,$t(["returns"])).has("returns")&&(a=xn(e));const c=Bf(e);return Dr(e),new Xe(gt,s,o,i,a,c)}let n=e.stateMutability;return n==null&&(n="payable",typeof e.constant=="boolean"?(n="view",e.constant||(n="payable",typeof e.payable=="boolean"&&!e.payable&&(n="nonpayable"))):typeof e.payable=="boolean"&&!e.payable&&(n="nonpayable")),new Xe(gt,e.name,n,e.inputs?e.inputs.map(Rt.from):[],e.outputs?e.outputs.map(Rt.from):[],e.gas!=null?e.gas:null)}static isFragment(e){return e&&e[oe]===Bl}}class Sr extends Ko{constructor(t,e,n){super(t,"struct",e,n),Object.defineProperty(this,oe,{value:Cl})}format(){throw new Error("@TODO")}static from(t){if(typeof t=="string")try{return Sr.from(qn(t))}catch{y(!1,"invalid struct fragment","obj",t)}else if(t instanceof Me){const e=zo("struct",t),n=xn(t);return Dr(t),new Sr(gt,e,n)}return new Sr(gt,t.name,t.inputs?t.inputs.map(Rt.from):[])}static isFragment(t){return t&&t[oe]===Cl}}const Ge=new Map;Ge.set(0,"GENERIC_PANIC");Ge.set(1,"ASSERT_FALSE");Ge.set(17,"OVERFLOW");Ge.set(18,"DIVIDE_BY_ZERO");Ge.set(33,"ENUM_RANGE_ERROR");Ge.set(34,"BAD_STORAGE_DATA");Ge.set(49,"STACK_UNDERFLOW");Ge.set(50,"ARRAY_RANGE_ERROR");Ge.set(65,"OUT_OF_MEMORY");Ge.set(81,"UNINITIALIZED_FUNCTION_CALL");const Hg=new RegExp(/^bytes([0-9]*)$/),Qg=new RegExp(/^(u?int)([0-9]*)$/);let ua=null,kl=1024;function Vg(r,t,e,n){let s="missing revert data",i=null;const o=null;let a=null;if(e){s="execution reverted";const u=q(e);if(e=U(e),u.length===0)s+=" (no data present; likely require(false) occurred",i="require(false)";else if(u.length%32!==4)s+=" (could not decode reason; invalid data length)";else if(U(u.slice(0,4))==="0x08c379a0")try{i=n.decode(["string"],u.slice(4))[0],a={signature:"Error(string)",name:"Error",args:[i]},s+=`: ${JSON.stringify(i)}`}catch{s+=" (could not decode reason; invalid string data)"}else if(U(u.slice(0,4))==="0x4e487b71")try{const f=Number(n.decode(["uint256"],u.slice(4))[0]);a={signature:"Panic(uint256)",name:"Panic",args:[f]},i=`Panic due to ${Ge.get(f)||"UNKNOWN"}(${f})`,s+=`: ${i}`}catch{s+=" (could not decode panic code)"}else s+=" (unknown custom error)"}const c={to:t.to?st(t.to):null,data:t.data||"0x"};return t.from&&(c.from=st(t.from)),mt(s,"CALL_EXCEPTION",{action:r,data:e,reason:i,transaction:c,invocation:o,revert:a})}var Ln,Wr;const Ro=class Ro{constructor(){E(this,Ln)}getDefaultValue(t){const e=t.map(s=>N(this,Ln,Wr).call(this,Rt.from(s)));return new to(e,"_").defaultValue()}encode(t,e){eu(e.length,t.length,"types/values length mismatch");const n=t.map(o=>N(this,Ln,Wr).call(this,Rt.from(o))),s=new to(n,"_"),i=new Na;return s.encode(i,e),i.data}decode(t,e,n){const s=t.map(o=>N(this,Ln,Wr).call(this,Rt.from(o)));return new to(s,"_").decode(new Pa(e,n,kl))}static _setDefaultMaxInflation(t){y(typeof t=="number"&&Number.isInteger(t),"invalid defaultMaxInflation factor","value",t),kl=t}static defaultAbiCoder(){return ua==null&&(ua=new Ro),ua}static getBuiltinCallException(t,e,n){return Vg(t,e,n,Ro.defaultAbiCoder())}};Ln=new WeakSet,Wr=function(t){if(t.isArray())return new fp(N(this,Ln,Wr).call(this,t.arrayChildren),t.arrayLength,t.name);if(t.isTuple())return new to(t.components.map(n=>N(this,Ln,Wr).call(this,n)),t.name);switch(t.baseType){case"address":return new lp(t.name);case"bool":return new hp(t.name);case"string":return new Ep(t.name);case"bytes":return new dp(t.name);case"":return new mp(t.name)}let e=t.type.match(Qg);if(e){let n=parseInt(e[2]||"256");return y(n!==0&&n<=256&&n%8===0,"invalid "+e[1]+" bit length","param",t),new bp(n/8,e[1]==="int",t.name)}if(e=t.type.match(Hg),e){let n=parseInt(e[1]);return y(n!==0&&n<=32,"invalid bytes length","param",t),new pp(n,t.name)}y(!1,"invalid type","type",t.type)};let Ii=Ro;class _g{constructor(t,e,n){A(this,"fragment");A(this,"name");A(this,"signature");A(this,"topic");A(this,"args");const s=t.name,i=t.format();H(this,{fragment:t,name:s,signature:i,topic:e,args:n})}}class Jg{constructor(t,e,n,s){A(this,"fragment");A(this,"name");A(this,"args");A(this,"signature");A(this,"selector");A(this,"value");const i=t.name,o=t.format();H(this,{fragment:t,name:i,args:n,signature:o,selector:e,value:s})}}class zg{constructor(t,e,n){A(this,"fragment");A(this,"name");A(this,"args");A(this,"signature");A(this,"selector");const s=t.name,i=t.format();H(this,{fragment:t,name:s,args:n,signature:i,selector:e})}}class Tl{constructor(t){A(this,"hash");A(this,"_isIndexed");H(this,{hash:t,_isIndexed:!0})}static isIndexed(t){return!!(t&&t._isIndexed)}}const Ol={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},Rl={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:r=>`reverted with reason string ${JSON.stringify(r)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:r=>{let t="unknown panic code";return r>=0&&r<=255&&Ol[r.toString()]&&(t=Ol[r.toString()]),`reverted with panic code 0x${r.toString(16)} (${t})`}}};var Je,ze,Ke,Dt,$e,co,lo;const ar=class ar{constructor(t){E(this,$e);A(this,"fragments");A(this,"deploy");A(this,"fallback");A(this,"receive");E(this,Je);E(this,ze);E(this,Ke);E(this,Dt);let e=[];typeof t=="string"?e=JSON.parse(t):e=t,d(this,Ke,new Map),d(this,Je,new Map),d(this,ze,new Map);const n=[];for(const o of e)try{n.push(Mr.from(o))}catch(a){console.log(`[Warning] Invalid Fragment ${JSON.stringify(o)}:`,a.message)}H(this,{fragments:Object.freeze(n)});let s=null,i=!1;d(this,Dt,this.getAbiCoder()),this.fragments.forEach((o,a)=>{let c;switch(o.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}H(this,{deploy:o});return;case"fallback":o.inputs.length===0?i=!0:(y(!s||o.payable!==s.payable,"conflicting fallback fragments",`fragments[${a}]`,o),s=o,i=s.payable);return;case"function":c=l(this,Ke);break;case"event":c=l(this,ze);break;case"error":c=l(this,Je);break;default:return}const u=o.format();c.has(u)||c.set(u,o)}),this.deploy||H(this,{deploy:bn.from("constructor()")}),H(this,{fallback:s,receive:i})}format(t){const e=t?"minimal":"full";return this.fragments.map(s=>s.format(e))}formatJson(){const t=this.fragments.map(e=>e.format("json"));return JSON.stringify(t.map(e=>JSON.parse(e)))}getAbiCoder(){return Ii.defaultAbiCoder()}getFunctionName(t){const e=N(this,$e,co).call(this,t,null,!1);return y(e,"no matching function","key",t),e.name}hasFunction(t){return!!N(this,$e,co).call(this,t,null,!1)}getFunction(t,e){return N(this,$e,co).call(this,t,e||null,!0)}forEachFunction(t){const e=Array.from(l(this,Ke).keys());e.sort((n,s)=>n.localeCompare(s));for(let n=0;n<e.length;n++){const s=e[n];t(l(this,Ke).get(s),n)}}getEventName(t){const e=N(this,$e,lo).call(this,t,null,!1);return y(e,"no matching event","key",t),e.name}hasEvent(t){return!!N(this,$e,lo).call(this,t,null,!1)}getEvent(t,e){return N(this,$e,lo).call(this,t,e||null,!0)}forEachEvent(t){const e=Array.from(l(this,ze).keys());e.sort((n,s)=>n.localeCompare(s));for(let n=0;n<e.length;n++){const s=e[n];t(l(this,ze).get(s),n)}}getError(t,e){if(ct(t)){const s=t.toLowerCase();if(Rl[s])return se.from(Rl[s].signature);for(const i of l(this,Je).values())if(s===i.selector)return i;return null}if(t.indexOf("(")===-1){const s=[];for(const[i,o]of l(this,Je))i.split("(")[0]===t&&s.push(o);if(s.length===0)return t==="Error"?se.from("error Error(string)"):t==="Panic"?se.from("error Panic(uint256)"):null;if(s.length>1){const i=s.map(o=>JSON.stringify(o.format())).join(", ");y(!1,`ambiguous error description (i.e. ${i})`,"name",t)}return s[0]}if(t=se.from(t).format(),t==="Error(string)")return se.from("error Error(string)");if(t==="Panic(uint256)")return se.from("error Panic(uint256)");const n=l(this,Je).get(t);return n||null}forEachError(t){const e=Array.from(l(this,Je).keys());e.sort((n,s)=>n.localeCompare(s));for(let n=0;n<e.length;n++){const s=e[n];t(l(this,Je).get(s),n)}}_decodeParams(t,e){return l(this,Dt).decode(t,e)}_encodeParams(t,e){return l(this,Dt).encode(t,e)}encodeDeploy(t){return this._encodeParams(this.deploy.inputs,t||[])}decodeErrorResult(t,e){if(typeof t=="string"){const n=this.getError(t);y(n,"unknown error","fragment",t),t=n}return y(yt(e,0,4)===t.selector,`data signature does not match error ${t.name}.`,"data",e),this._decodeParams(t.inputs,yt(e,4))}encodeErrorResult(t,e){if(typeof t=="string"){const n=this.getError(t);y(n,"unknown error","fragment",t),t=n}return Et([t.selector,this._encodeParams(t.inputs,e||[])])}decodeFunctionData(t,e){if(typeof t=="string"){const n=this.getFunction(t);y(n,"unknown function","fragment",t),t=n}return y(yt(e,0,4)===t.selector,`data signature does not match function ${t.name}.`,"data",e),this._decodeParams(t.inputs,yt(e,4))}encodeFunctionData(t,e){if(typeof t=="string"){const n=this.getFunction(t);y(n,"unknown function","fragment",t),t=n}return Et([t.selector,this._encodeParams(t.inputs,e||[])])}decodeFunctionResult(t,e){if(typeof t=="string"){const i=this.getFunction(t);y(i,"unknown function","fragment",t),t=i}let n="invalid length for result data";const s=Wt(e);if(s.length%32===0)try{return l(this,Dt).decode(t.outputs,s)}catch{n="could not decode result data"}v(!1,n,"BAD_DATA",{value:U(s),info:{method:t.name,signature:t.format()}})}makeError(t,e){const n=q(t,"data"),s=Ii.getBuiltinCallException("call",e,n);if(s.message.startsWith("execution reverted (unknown custom error)")){const a=U(n.slice(0,4)),c=this.getError(a);if(c)try{const u=l(this,Dt).decode(c.inputs,n.slice(4));s.revert={name:c.name,signature:c.format(),args:u},s.reason=s.revert.signature,s.message=`execution reverted: ${s.reason}`}catch{s.message="execution reverted (coult not decode custom error)"}}const o=this.parseTransaction(e);return o&&(s.invocation={method:o.name,signature:o.signature,args:o.args}),s}encodeFunctionResult(t,e){if(typeof t=="string"){const n=this.getFunction(t);y(n,"unknown function","fragment",t),t=n}return U(l(this,Dt).encode(t.outputs,e||[]))}encodeFilterTopics(t,e){if(typeof t=="string"){const i=this.getEvent(t);y(i,"unknown event","eventFragment",t),t=i}v(e.length<=t.inputs.length,`too many arguments for ${t.format()}`,"UNEXPECTED_ARGUMENT",{count:e.length,expectedCount:t.inputs.length});const n=[];t.anonymous||n.push(t.topicHash);const s=(i,o)=>i.type==="string"?Lr(o):i.type==="bytes"?vt(U(o)):(i.type==="bool"&&typeof o=="boolean"?o=o?"0x01":"0x00":i.type.match(/^u?int/)?o=Wn(o):i.type.match(/^bytes/)?o=fh(o,32):i.type==="address"&&l(this,Dt).encode(["address"],[o]),Ur(U(o),32));for(e.forEach((i,o)=>{const a=t.inputs[o];if(!a.indexed){y(i==null,"cannot filter non-indexed parameters; must be null","contract."+a.name,i);return}i==null?n.push(null):a.baseType==="array"||a.baseType==="tuple"?y(!1,"filtering with tuples or arrays not supported","contract."+a.name,i):Array.isArray(i)?n.push(i.map(c=>s(a,c))):n.push(s(a,i))});n.length&&n[n.length-1]===null;)n.pop();return n}encodeEventLog(t,e){if(typeof t=="string"){const o=this.getEvent(t);y(o,"unknown event","eventFragment",t),t=o}const n=[],s=[],i=[];return t.anonymous||n.push(t.topicHash),y(e.length===t.inputs.length,"event arguments/values mismatch","values",e),t.inputs.forEach((o,a)=>{const c=e[a];if(o.indexed)if(o.type==="string")n.push(Lr(c));else if(o.type==="bytes")n.push(vt(c));else{if(o.baseType==="tuple"||o.baseType==="array")throw new Error("not implemented");n.push(l(this,Dt).encode([o.type],[c]))}else s.push(o),i.push(c)}),{data:l(this,Dt).encode(s,i),topics:n}}decodeEventLog(t,e,n){if(typeof t=="string"){const g=this.getEvent(t);y(g,"unknown event","eventFragment",t),t=g}if(n!=null&&!t.anonymous){const g=t.topicHash;y(ct(n[0],32)&&n[0].toLowerCase()===g,"fragment/topic mismatch","topics[0]",n[0]),n=n.slice(1)}const s=[],i=[],o=[];t.inputs.forEach((g,w)=>{g.indexed?g.type==="string"||g.type==="bytes"||g.baseType==="tuple"||g.baseType==="array"?(s.push(Rt.from({type:"bytes32",name:g.name})),o.push(!0)):(s.push(g),o.push(!1)):(i.push(g),o.push(!1))});const a=n!=null?l(this,Dt).decode(s,Et(n)):null,c=l(this,Dt).decode(i,e,!0),u=[],f=[];let h=0,p=0;return t.inputs.forEach((g,w)=>{let m=null;if(g.indexed)if(a==null)m=new Tl(null);else if(o[w])m=new Tl(a[p++]);else try{m=a[p++]}catch(b){m=b}else try{m=c[h++]}catch(b){m=b}u.push(m),f.push(g.name||null)}),Ys.fromItems(u,f)}parseTransaction(t){const e=q(t.data,"tx.data"),n=L(t.value!=null?t.value:0,"tx.value"),s=this.getFunction(U(e.slice(0,4)));if(!s)return null;const i=l(this,Dt).decode(s.inputs,e.slice(4));return new Jg(s,s.selector,i,n)}parseCallResult(t){throw new Error("@TODO")}parseLog(t){const e=this.getEvent(t.topics[0]);return!e||e.anonymous?null:new _g(e,e.topicHash,this.decodeEventLog(e,t.data,t.topics))}parseError(t){const e=U(t),n=this.getError(yt(e,0,4));if(!n)return null;const s=l(this,Dt).decode(n.inputs,yt(e,4));return new zg(n,n.selector,s)}static from(t){return t instanceof ar?t:typeof t=="string"?new ar(JSON.parse(t)):typeof t.formatJson=="function"?new ar(t.formatJson()):typeof t.format=="function"?new ar(t.format("json")):new ar(t)}};Je=new WeakMap,ze=new WeakMap,Ke=new WeakMap,Dt=new WeakMap,$e=new WeakSet,co=function(t,e,n){if(ct(t)){const i=t.toLowerCase();for(const o of l(this,Ke).values())if(i===o.selector)return o;return null}if(t.indexOf("(")===-1){const i=[];for(const[o,a]of l(this,Ke))o.split("(")[0]===t&&i.push(a);if(e){const o=e.length>0?e[e.length-1]:null;let a=e.length,c=!0;Jt.isTyped(o)&&o.type==="overrides"&&(c=!1,a--);for(let u=i.length-1;u>=0;u--){const f=i[u].inputs.length;f!==a&&(!c||f!==a-1)&&i.splice(u,1)}for(let u=i.length-1;u>=0;u--){const f=i[u].inputs;for(let h=0;h<e.length;h++)if(Jt.isTyped(e[h])){if(h>=f.length){if(e[h].type==="overrides")continue;i.splice(u,1);break}if(e[h].type!==f[h].baseType){i.splice(u,1);break}}}}if(i.length===1&&e&&e.length!==i[0].inputs.length){const o=e[e.length-1];(o==null||Array.isArray(o)||typeof o!="object")&&i.splice(0,1)}if(i.length===0)return null;if(i.length>1&&n){const o=i.map(a=>JSON.stringify(a.format())).join(", ");y(!1,`ambiguous function description (i.e. matches ${o})`,"key",t)}return i[0]}const s=l(this,Ke).get(Xe.from(t).format());return s||null},lo=function(t,e,n){if(ct(t)){const i=t.toLowerCase();for(const o of l(this,ze).values())if(i===o.topicHash)return o;return null}if(t.indexOf("(")===-1){const i=[];for(const[o,a]of l(this,ze))o.split("(")[0]===t&&i.push(a);if(e){for(let o=i.length-1;o>=0;o--)i[o].inputs.length<e.length&&i.splice(o,1);for(let o=i.length-1;o>=0;o--){const a=i[o].inputs;for(let c=0;c<e.length;c++)if(Jt.isTyped(e[c])&&e[c].type!==a[c].baseType){i.splice(o,1);break}}}if(i.length===0)return null;if(i.length>1&&n){const o=i.map(a=>JSON.stringify(a.format())).join(", ");y(!1,`ambiguous event description (i.e. matches ${o})`,"key",t)}return i[0]}const s=l(this,ze).get(Ye.from(t).format());return s||null};let Ga=ar;const Cf=BigInt(0);function cs(r){return r??null}function wt(r){return r==null?null:r.toString()}class Sl{constructor(t,e,n){A(this,"gasPrice");A(this,"maxFeePerGas");A(this,"maxPriorityFeePerGas");H(this,{gasPrice:cs(t),maxFeePerGas:cs(e),maxPriorityFeePerGas:cs(n)})}toJSON(){const{gasPrice:t,maxFeePerGas:e,maxPriorityFeePerGas:n}=this;return{_type:"FeeData",gasPrice:wt(t),maxFeePerGas:wt(e),maxPriorityFeePerGas:wt(n)}}}function Io(r){const t={};r.to&&(t.to=r.to),r.from&&(t.from=r.from),r.data&&(t.data=U(r.data));const e="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const s of e)!(s in r)||r[s]==null||(t[s]=L(r[s],`request.${s}`));const n="type,nonce".split(/,/);for(const s of n)!(s in r)||r[s]==null||(t[s]=j(r[s],`request.${s}`));return r.accessList&&(t.accessList=Qr(r.accessList)),"blockTag"in r&&(t.blockTag=r.blockTag),"enableCcipRead"in r&&(t.enableCcipRead=!!r.enableCcipRead),"customData"in r&&(t.customData=r.customData),"blobVersionedHashes"in r&&r.blobVersionedHashes&&(t.blobVersionedHashes=r.blobVersionedHashes.slice()),"kzg"in r&&(t.kzg=r.kzg),"blobs"in r&&r.blobs&&(t.blobs=r.blobs.map(s=>ec(s)?U(s):Object.assign({},s))),t}var hn;class Kg{constructor(t,e){A(this,"provider");A(this,"number");A(this,"hash");A(this,"timestamp");A(this,"parentHash");A(this,"parentBeaconBlockRoot");A(this,"nonce");A(this,"difficulty");A(this,"gasLimit");A(this,"gasUsed");A(this,"stateRoot");A(this,"receiptsRoot");A(this,"blobGasUsed");A(this,"excessBlobGas");A(this,"miner");A(this,"prevRandao");A(this,"extraData");A(this,"baseFeePerGas");E(this,hn);d(this,hn,t.transactions.map(n=>typeof n!="string"?new Bi(n,e):n)),H(this,{provider:e,hash:cs(t.hash),number:t.number,timestamp:t.timestamp,parentHash:t.parentHash,parentBeaconBlockRoot:t.parentBeaconBlockRoot,nonce:t.nonce,difficulty:t.difficulty,gasLimit:t.gasLimit,gasUsed:t.gasUsed,blobGasUsed:t.blobGasUsed,excessBlobGas:t.excessBlobGas,miner:t.miner,prevRandao:cs(t.prevRandao),extraData:t.extraData,baseFeePerGas:cs(t.baseFeePerGas),stateRoot:t.stateRoot,receiptsRoot:t.receiptsRoot})}get transactions(){return l(this,hn).map(t=>typeof t=="string"?t:t.hash)}get prefetchedTransactions(){const t=l(this,hn).slice();return t.length===0?[]:(v(typeof t[0]=="object","transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),t)}toJSON(){const{baseFeePerGas:t,difficulty:e,extraData:n,gasLimit:s,gasUsed:i,hash:o,miner:a,prevRandao:c,nonce:u,number:f,parentHash:h,parentBeaconBlockRoot:p,stateRoot:g,receiptsRoot:w,timestamp:m,transactions:b}=this;return{_type:"Block",baseFeePerGas:wt(t),difficulty:wt(e),extraData:n,gasLimit:wt(s),gasUsed:wt(i),blobGasUsed:wt(this.blobGasUsed),excessBlobGas:wt(this.excessBlobGas),hash:o,miner:a,prevRandao:c,nonce:u,number:f,parentHash:h,timestamp:m,parentBeaconBlockRoot:p,stateRoot:g,receiptsRoot:w,transactions:b}}[Symbol.iterator](){let t=0;const e=this.transactions;return{next:()=>t<this.length?{value:e[t++],done:!1}:{value:void 0,done:!0}}}get length(){return l(this,hn).length}get date(){return this.timestamp==null?null:new Date(this.timestamp*1e3)}async getTransaction(t){let e;if(typeof t=="number")e=l(this,hn)[t];else{const n=t.toLowerCase();for(const s of l(this,hn))if(typeof s=="string"){if(s!==n)continue;e=s;break}else{if(s.hash===n)continue;e=s;break}}if(e==null)throw new Error("no such tx");return typeof e=="string"?await this.provider.getTransaction(e):e}getPrefetchedTransaction(t){const e=this.prefetchedTransactions;if(typeof t=="number")return e[t];t=t.toLowerCase();for(const n of e)if(n.hash===t)return n;y(!1,"no matching transaction","indexOrHash",t)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return jg(this)}}hn=new WeakMap;class _i{constructor(t,e){A(this,"provider");A(this,"transactionHash");A(this,"blockHash");A(this,"blockNumber");A(this,"removed");A(this,"address");A(this,"data");A(this,"topics");A(this,"index");A(this,"transactionIndex");this.provider=e;const n=Object.freeze(t.topics.slice());H(this,{transactionHash:t.transactionHash,blockHash:t.blockHash,blockNumber:t.blockNumber,removed:t.removed,address:t.address,data:t.data,topics:n,index:t.index,transactionIndex:t.transactionIndex})}toJSON(){const{address:t,blockHash:e,blockNumber:n,data:s,index:i,removed:o,topics:a,transactionHash:c,transactionIndex:u}=this;return{_type:"log",address:t,blockHash:e,blockNumber:n,data:s,index:i,removed:o,topics:a,transactionHash:c,transactionIndex:u}}async getBlock(){const t=await this.provider.getBlock(this.blockHash);return v(!!t,"failed to find transaction","UNKNOWN_ERROR",{}),t}async getTransaction(){const t=await this.provider.getTransaction(this.transactionHash);return v(!!t,"failed to find transaction","UNKNOWN_ERROR",{}),t}async getTransactionReceipt(){const t=await this.provider.getTransactionReceipt(this.transactionHash);return v(!!t,"failed to find transaction receipt","UNKNOWN_ERROR",{}),t}removedEvent(){return Zg(this)}}var Si;class kf{constructor(t,e){A(this,"provider");A(this,"to");A(this,"from");A(this,"contractAddress");A(this,"hash");A(this,"index");A(this,"blockHash");A(this,"blockNumber");A(this,"logsBloom");A(this,"gasUsed");A(this,"blobGasUsed");A(this,"cumulativeGasUsed");A(this,"gasPrice");A(this,"blobGasPrice");A(this,"type");A(this,"status");A(this,"root");E(this,Si);d(this,Si,Object.freeze(t.logs.map(s=>new _i(s,e))));let n=Cf;t.effectiveGasPrice!=null?n=t.effectiveGasPrice:t.gasPrice!=null&&(n=t.gasPrice),H(this,{provider:e,to:t.to,from:t.from,contractAddress:t.contractAddress,hash:t.hash,index:t.index,blockHash:t.blockHash,blockNumber:t.blockNumber,logsBloom:t.logsBloom,gasUsed:t.gasUsed,cumulativeGasUsed:t.cumulativeGasUsed,blobGasUsed:t.blobGasUsed,gasPrice:n,blobGasPrice:t.blobGasPrice,type:t.type,status:t.status,root:t.root})}get logs(){return l(this,Si)}toJSON(){const{to:t,from:e,contractAddress:n,hash:s,index:i,blockHash:o,blockNumber:a,logsBloom:c,logs:u,status:f,root:h}=this;return{_type:"TransactionReceipt",blockHash:o,blockNumber:a,contractAddress:n,cumulativeGasUsed:wt(this.cumulativeGasUsed),from:e,gasPrice:wt(this.gasPrice),blobGasUsed:wt(this.blobGasUsed),blobGasPrice:wt(this.blobGasPrice),gasUsed:wt(this.gasUsed),hash:s,index:i,logs:u,logsBloom:c,root:h,status:f,to:t}}get length(){return this.logs.length}[Symbol.iterator](){let t=0;return{next:()=>t<this.length?{value:this.logs[t++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const t=await this.provider.getBlock(this.blockHash);if(t==null)throw new Error("TODO");return t}async getTransaction(){const t=await this.provider.getTransaction(this.hash);if(t==null)throw new Error("TODO");return t}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return Of(this)}reorderedEvent(t){return v(!t||t.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),Tf(this,t)}}Si=new WeakMap;var Dn;const Nc=class Nc{constructor(t,e){A(this,"provider");A(this,"blockNumber");A(this,"blockHash");A(this,"index");A(this,"hash");A(this,"type");A(this,"to");A(this,"from");A(this,"nonce");A(this,"gasLimit");A(this,"gasPrice");A(this,"maxPriorityFeePerGas");A(this,"maxFeePerGas");A(this,"maxFeePerBlobGas");A(this,"data");A(this,"value");A(this,"chainId");A(this,"signature");A(this,"accessList");A(this,"blobVersionedHashes");E(this,Dn);this.provider=e,this.blockNumber=t.blockNumber!=null?t.blockNumber:null,this.blockHash=t.blockHash!=null?t.blockHash:null,this.hash=t.hash,this.index=t.index,this.type=t.type,this.from=t.from,this.to=t.to||null,this.gasLimit=t.gasLimit,this.nonce=t.nonce,this.data=t.data,this.value=t.value,this.gasPrice=t.gasPrice,this.maxPriorityFeePerGas=t.maxPriorityFeePerGas!=null?t.maxPriorityFeePerGas:null,this.maxFeePerGas=t.maxFeePerGas!=null?t.maxFeePerGas:null,this.maxFeePerBlobGas=t.maxFeePerBlobGas!=null?t.maxFeePerBlobGas:null,this.chainId=t.chainId,this.signature=t.signature,this.accessList=t.accessList!=null?t.accessList:null,this.blobVersionedHashes=t.blobVersionedHashes!=null?t.blobVersionedHashes:null,d(this,Dn,-1)}toJSON(){const{blockNumber:t,blockHash:e,index:n,hash:s,type:i,to:o,from:a,nonce:c,data:u,signature:f,accessList:h,blobVersionedHashes:p}=this;return{_type:"TransactionResponse",accessList:h,blockNumber:t,blockHash:e,blobVersionedHashes:p,chainId:wt(this.chainId),data:u,from:a,gasLimit:wt(this.gasLimit),gasPrice:wt(this.gasPrice),hash:s,maxFeePerGas:wt(this.maxFeePerGas),maxPriorityFeePerGas:wt(this.maxPriorityFeePerGas),maxFeePerBlobGas:wt(this.maxFeePerBlobGas),nonce:c,signature:f,to:o,index:n,type:i,value:wt(this.value)}}async getBlock(){let t=this.blockNumber;if(t==null){const n=await this.getTransaction();n&&(t=n.blockNumber)}if(t==null)return null;const e=this.provider.getBlock(t);if(e==null)throw new Error("TODO");return e}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(this.blockNumber==null){const{tx:e,blockNumber:n}=await Zt({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return e==null||e.blockNumber==null?0:n-e.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(t,e){const n=t??1,s=e??0;let i=l(this,Dn),o=-1,a=i===-1;const c=async()=>{if(a)return null;const{blockNumber:p,nonce:g}=await Zt({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(g<this.nonce){i=p;return}if(a)return null;const w=await this.getTransaction();if(!(w&&w.blockNumber!=null))for(o===-1&&(o=i-3,o<l(this,Dn)&&(o=l(this,Dn)));o<=p;){if(a)return null;const m=await this.provider.getBlock(o,!0);if(m==null)return;for(const b of m)if(b===this.hash)return;for(let b=0;b<m.length;b++){const x=await m.getTransaction(b);if(x.from===this.from&&x.nonce===this.nonce){if(a)return null;const B=await this.provider.getTransactionReceipt(x.hash);if(B==null||p-B.blockNumber+1<n)return;let P="replaced";x.data===this.data&&x.to===this.to&&x.value===this.value?P="repriced":x.data==="0x"&&x.from===x.to&&x.value===Cf&&(P="cancelled"),v(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:P==="replaced"||P==="cancelled",reason:P,replacement:x.replaceableTransaction(i),hash:x.hash,receipt:B})}}o++}},u=p=>{if(p==null||p.status!==0)return p;v(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:p.to,from:p.from,data:""},receipt:p})},f=await this.provider.getTransactionReceipt(this.hash);if(n===0)return u(f);if(f){if(await f.confirmations()>=n)return u(f)}else if(await c(),n===0)return null;return await new Promise((p,g)=>{const w=[],m=()=>{w.forEach(x=>x())};if(w.push(()=>{a=!0}),s>0){const x=setTimeout(()=>{m(),g(mt("wait for transaction timeout","TIMEOUT"))},s);w.push(()=>{clearTimeout(x)})}const b=async x=>{if(await x.confirmations()>=n){m();try{p(u(x))}catch(B){g(B)}}};if(w.push(()=>{this.provider.off(this.hash,b)}),this.provider.on(this.hash,b),i>=0){const x=async()=>{try{await c()}catch(B){if(_t(B,"TRANSACTION_REPLACED")){m(),g(B);return}}a||this.provider.once("block",x)};w.push(()=>{this.provider.off("block",x)}),this.provider.once("block",x)}})}isMined(){return this.blockHash!=null}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}removedEvent(){return v(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),Of(this)}reorderedEvent(t){return v(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),v(!t||t.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),Tf(this,t)}replaceableTransaction(t){y(Number.isInteger(t)&&t>=0,"invalid startBlock","startBlock",t);const e=new Nc(this,this.provider);return d(e,Dn,t),e}};Dn=new WeakMap;let Bi=Nc;function jg(r){return{orphan:"drop-block",hash:r.hash,number:r.number}}function Tf(r,t){return{orphan:"reorder-transaction",tx:r,other:t}}function Of(r){return{orphan:"drop-transaction",tx:r}}function Zg(r){return{orphan:"drop-log",log:{transactionHash:r.transactionHash,blockHash:r.blockHash,blockNumber:r.blockNumber,address:r.address,data:r.data,topics:Object.freeze(r.topics.slice()),index:r.index}}}class yc extends _i{constructor(e,n,s){super(e,e.provider);A(this,"interface");A(this,"fragment");A(this,"args");const i=n.decodeEventLog(s,e.data,e.topics);H(this,{args:i,fragment:s,interface:n})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class Rf extends _i{constructor(e,n){super(e,e.provider);A(this,"error");H(this,{error:n})}}var Fs;class Wg extends kf{constructor(e,n,s){super(s,n);E(this,Fs);d(this,Fs,e)}get logs(){return super.logs.map(e=>{const n=e.topics.length?l(this,Fs).getEvent(e.topics[0]):null;if(n)try{return new yc(e,l(this,Fs),n)}catch(s){return new Rf(e,s)}return e})}}Fs=new WeakMap;var Ui;class wc extends Bi{constructor(e,n,s){super(s,n);E(this,Ui);d(this,Ui,e)}async wait(e,n){const s=await super.wait(e,n);return s==null?null:new Wg(l(this,Ui),this.provider,s)}}Ui=new WeakMap;class Sf extends iu{constructor(e,n,s,i){super(e,n,s);A(this,"log");H(this,{log:i})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class Yg extends Sf{constructor(t,e,n,s,i){super(t,e,n,new yc(i,t.interface,s));const o=t.interface.decodeEventLog(s,this.log.data,this.log.topics);H(this,{args:o,fragment:s})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const Ul=BigInt(0);function Uf(r){return r&&typeof r.call=="function"}function Ff(r){return r&&typeof r.estimateGas=="function"}function jo(r){return r&&typeof r.resolveName=="function"}function Lf(r){return r&&typeof r.sendTransaction=="function"}function Df(r){if(r!=null){if(jo(r))return r;if(r.provider)return r.provider}}var Fi;class Xg{constructor(t,e,n){E(this,Fi);A(this,"fragment");if(H(this,{fragment:e}),e.inputs.length<n.length)throw new Error("too many arguments");const s=Gr(t.runner,"resolveName"),i=jo(s)?s:null;d(this,Fi,async function(){const o=await Promise.all(e.inputs.map((a,c)=>n[c]==null?null:a.walkAsync(n[c],(f,h)=>f==="address"?Array.isArray(h)?Promise.all(h.map(p=>qt(p,i))):qt(h,i):h)));return t.interface.encodeFilterTopics(e,o)}())}getTopicFilter(){return l(this,Fi)}}Fi=new WeakMap;function Gr(r,t){return r==null?null:typeof r[t]=="function"?r:r.provider&&typeof r.provider[t]=="function"?r.provider:null}function fr(r){return r==null?null:r.provider||null}async function Mf(r,t){const e=Jt.dereference(r,"overrides");y(typeof e=="object","invalid overrides parameter","overrides",r);const n=Io(e);return y(n.to==null||(t||[]).indexOf("to")>=0,"cannot override to","overrides.to",n.to),y(n.data==null||(t||[]).indexOf("data")>=0,"cannot override data","overrides.data",n.data),n.from&&(n.from=n.from),n}async function qg(r,t,e){const n=Gr(r,"resolveName"),s=jo(n)?n:null;return await Promise.all(t.map((i,o)=>i.walkAsync(e[o],(a,c)=>(c=Jt.dereference(c,a),a==="address"?qt(c,s):c))))}function $g(r){const t=async function(o){const a=await Mf(o,["data"]);a.to=await r.getAddress(),a.from&&(a.from=await qt(a.from,Df(r.runner)));const c=r.interface,u=L(a.value||Ul,"overrides.value")===Ul,f=(a.data||"0x")==="0x";c.fallback&&!c.fallback.payable&&c.receive&&!f&&!u&&y(!1,"cannot send data to receive or send value to non-payable fallback","overrides",o),y(c.fallback||f,"cannot send data to receive-only contract","overrides.data",a.data);const h=c.receive||c.fallback&&c.fallback.payable;return y(h||u,"cannot send value to non-payable fallback","overrides.value",a.value),y(c.fallback||f,"cannot send data to receive-only contract","overrides.data",a.data),a},e=async function(o){const a=Gr(r.runner,"call");v(Uf(a),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const c=await t(o);try{return await a.call(c)}catch(u){throw tc(u)&&u.data?r.interface.makeError(u.data,c):u}},n=async function(o){const a=r.runner;v(Lf(a),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const c=await a.sendTransaction(await t(o)),u=fr(r.runner);return new wc(r.interface,u,c)},s=async function(o){const a=Gr(r.runner,"estimateGas");return v(Ff(a),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await a.estimateGas(await t(o))},i=async o=>await n(o);return H(i,{_contract:r,estimateGas:s,populateTransaction:t,send:n,staticCall:e}),i}function t0(r,t){const e=function(...u){const f=r.interface.getFunction(t,u);return v(f,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t,args:u}}),f},n=async function(...u){const f=e(...u);let h={};if(f.inputs.length+1===u.length&&(h=await Mf(u.pop()),h.from&&(h.from=await qt(h.from,Df(r.runner)))),f.inputs.length!==u.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");const p=await qg(r.runner,f.inputs,u);return Object.assign({},h,await Zt({to:r.getAddress(),data:r.interface.encodeFunctionData(f,p)}))},s=async function(...u){const f=await a(...u);return f.length===1?f[0]:f},i=async function(...u){const f=r.runner;v(Lf(f),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const h=await f.sendTransaction(await n(...u)),p=fr(r.runner);return new wc(r.interface,p,h)},o=async function(...u){const f=Gr(r.runner,"estimateGas");return v(Ff(f),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await f.estimateGas(await n(...u))},a=async function(...u){const f=Gr(r.runner,"call");v(Uf(f),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const h=await n(...u);let p="0x";try{p=await f.call(h)}catch(w){throw tc(w)&&w.data?r.interface.makeError(w.data,h):w}const g=e(...u);return r.interface.decodeFunctionResult(g,p)},c=async(...u)=>e(...u).constant?await s(...u):await i(...u);return H(c,{name:r.interface.getFunctionName(t),_contract:r,_key:t,getFragment:e,estimateGas:o,populateTransaction:n,send:i,staticCall:s,staticCallResult:a}),Object.defineProperty(c,"fragment",{configurable:!1,enumerable:!0,get:()=>{const u=r.interface.getFunction(t);return v(u,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t}}),u}}),c}function e0(r,t){const e=function(...s){const i=r.interface.getEvent(t,s);return v(i,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t,args:s}}),i},n=function(...s){return new Xg(r,e(...s),s)};return H(n,{name:r.interface.getEventName(t),_contract:r,_key:t,getFragment:e}),Object.defineProperty(n,"fragment",{configurable:!1,enumerable:!0,get:()=>{const s=r.interface.getEvent(t);return v(s,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t}}),s}}),n}const Bo=Symbol.for("_ethersInternal_contract"),Gf=new WeakMap;function n0(r,t){Gf.set(r[Bo],t)}function ue(r){return Gf.get(r[Bo])}function r0(r){return r&&typeof r=="object"&&"getTopicFilter"in r&&typeof r.getTopicFilter=="function"&&r.fragment}async function Ac(r,t){let e,n=null;if(Array.isArray(t)){const i=function(o){if(ct(o,32))return o;const a=r.interface.getEvent(o);return y(a,"unknown fragment","name",o),a.topicHash};e=t.map(o=>o==null?null:Array.isArray(o)?o.map(i):i(o))}else t==="*"?e=[null]:typeof t=="string"?ct(t,32)?e=[t]:(n=r.interface.getEvent(t),y(n,"unknown fragment","event",t),e=[n.topicHash]):r0(t)?e=await t.getTopicFilter():"fragment"in t?(n=t.fragment,e=[n.topicHash]):y(!1,"unknown event name","event",t);e=e.map(i=>{if(i==null)return null;if(Array.isArray(i)){const o=Array.from(new Set(i.map(a=>a.toLowerCase())).values());return o.length===1?o[0]:(o.sort(),o)}return i.toLowerCase()});const s=e.map(i=>i==null?"null":Array.isArray(i)?i.join("|"):i).join("&");return{fragment:n,tag:s,topics:e}}async function di(r,t){const{subs:e}=ue(r);return e.get((await Ac(r,t)).tag)||null}async function Fl(r,t,e){const n=fr(r.runner);v(n,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:t});const{fragment:s,tag:i,topics:o}=await Ac(r,e),{addr:a,subs:c}=ue(r);let u=c.get(i);if(!u){const h={address:a||r,topics:o},p=b=>{let x=s;if(x==null)try{x=r.interface.getEvent(b.topics[0])}catch{}if(x){const B=x,P=s?r.interface.decodeEventLog(s,b.data,b.topics):[];Qa(r,e,P,M=>new Yg(r,M,e,B,b))}else Qa(r,e,[],B=>new Sf(r,B,e,b))};let g=[];u={tag:i,listeners:[],start:()=>{g.length||g.push(n.on(h,p))},stop:async()=>{if(g.length==0)return;let b=g;g=[],await Promise.all(b),n.off(h,p)}},c.set(i,u)}return u}let Ha=Promise.resolve();async function s0(r,t,e,n){await Ha;const s=await di(r,t);if(!s)return!1;const i=s.listeners.length;return s.listeners=s.listeners.filter(({listener:o,once:a})=>{const c=Array.from(e);n&&c.push(n(a?null:o));try{o.call(r,...c)}catch{}return!a}),s.listeners.length===0&&(s.stop(),ue(r).subs.delete(s.tag)),i>0}async function Qa(r,t,e,n){try{await Ha}catch{}const s=s0(r,t,e,n);return Ha=s,await s}const no=["then"];var Xl;Xl=Bo;const yi=class yi{constructor(t,e,n,s){A(this,"target");A(this,"interface");A(this,"runner");A(this,"filters");A(this,Xl);A(this,"fallback");y(typeof t=="string"||Ju(t),"invalid value for Contract target","target",t),n==null&&(n=null);const i=Ga.from(e);H(this,{target:t,runner:n,interface:i}),Object.defineProperty(this,Bo,{value:{}});let o,a=null,c=null;if(s){const h=fr(n);c=new wc(this.interface,h,s)}let u=new Map;if(typeof t=="string")if(ct(t))a=t,o=Promise.resolve(t);else{const h=Gr(n,"resolveName");if(!jo(h))throw mt("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});o=h.resolveName(t).then(p=>{if(p==null)throw mt("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:t});return ue(this).addr=p,p})}else o=t.getAddress().then(h=>{if(h==null)throw new Error("TODO");return ue(this).addr=h,h});n0(this,{addrPromise:o,addr:a,deployTx:c,subs:u});const f=new Proxy({},{get:(h,p,g)=>{if(typeof p=="symbol"||no.indexOf(p)>=0)return Reflect.get(h,p,g);try{return this.getEvent(p)}catch(w){if(!_t(w,"INVALID_ARGUMENT")||w.argument!=="key")throw w}},has:(h,p)=>no.indexOf(p)>=0?Reflect.has(h,p):Reflect.has(h,p)||this.interface.hasEvent(String(p))});return H(this,{filters:f}),H(this,{fallback:i.receive||i.fallback?$g(this):null}),new Proxy(this,{get:(h,p,g)=>{if(typeof p=="symbol"||p in h||no.indexOf(p)>=0)return Reflect.get(h,p,g);try{return h.getFunction(p)}catch(w){if(!_t(w,"INVALID_ARGUMENT")||w.argument!=="key")throw w}},has:(h,p)=>typeof p=="symbol"||p in h||no.indexOf(p)>=0?Reflect.has(h,p):h.interface.hasFunction(p)})}connect(t){return new yi(this.target,this.interface,t)}attach(t){return new yi(t,this.interface,this.runner)}async getAddress(){return await ue(this).addrPromise}async getDeployedCode(){const t=fr(this.runner);v(t,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const e=await t.getCode(await this.getAddress());return e==="0x"?null:e}async waitForDeployment(){const t=this.deploymentTransaction();if(t)return await t.wait(),this;if(await this.getDeployedCode()!=null)return this;const n=fr(this.runner);return v(n!=null,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((s,i)=>{const o=async()=>{try{if(await this.getDeployedCode()!=null)return s(this);n.once("block",o)}catch(a){i(a)}};o()})}deploymentTransaction(){return ue(this).deployTx}getFunction(t){return typeof t!="string"&&(t=t.format()),t0(this,t)}getEvent(t){return typeof t!="string"&&(t=t.format()),e0(this,t)}async queryTransaction(t){throw new Error("@TODO")}async queryFilter(t,e,n){e==null&&(e=0),n==null&&(n="latest");const{addr:s,addrPromise:i}=ue(this),o=s||await i,{fragment:a,topics:c}=await Ac(this,t),u={address:o,topics:c,fromBlock:e,toBlock:n},f=fr(this.runner);return v(f,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await f.getLogs(u)).map(h=>{let p=a;if(p==null)try{p=this.interface.getEvent(h.topics[0])}catch{}if(p)try{return new yc(h,this.interface,p)}catch(g){return new Rf(h,g)}return new _i(h,f)})}async on(t,e){const n=await Fl(this,"on",t);return n.listeners.push({listener:e,once:!1}),n.start(),this}async once(t,e){const n=await Fl(this,"once",t);return n.listeners.push({listener:e,once:!0}),n.start(),this}async emit(t,...e){return await Qa(this,t,e,null)}async listenerCount(t){if(t){const s=await di(this,t);return s?s.listeners.length:0}const{subs:e}=ue(this);let n=0;for(const{listeners:s}of e.values())n+=s.length;return n}async listeners(t){if(t){const s=await di(this,t);return s?s.listeners.map(({listener:i})=>i):[]}const{subs:e}=ue(this);let n=[];for(const{listeners:s}of e.values())n=n.concat(s.map(({listener:i})=>i));return n}async off(t,e){const n=await di(this,t);if(!n)return this;if(e){const s=n.listeners.map(({listener:i})=>i).indexOf(e);s>=0&&n.listeners.splice(s,1)}return(e==null||n.listeners.length===0)&&(n.stop(),ue(this).subs.delete(n.tag)),this}async removeAllListeners(t){if(t){const e=await di(this,t);if(!e)return this;e.stop(),ue(this).subs.delete(e.tag)}else{const{subs:e}=ue(this);for(const{tag:n,stop:s}of e.values())s(),e.delete(n)}return this}async addListener(t,e){return await this.on(t,e)}async removeListener(t,e){return await this.off(t,e)}static buildClass(t){class e extends yi{constructor(s,i=null){super(s,t,i)}}return e}static from(t,e,n){return n==null&&(n=null),new this(t,e,n)}};let Va=yi;function i0(){return Va}class ls extends i0(){}function fa(r){return r.match(/^ipfs:\/\/ipfs\//i)?r=r.substring(12):r.match(/^ipfs:\/\//i)?r=r.substring(7):y(!1,"unsupported IPFS format","link",r),`https://gateway.ipfs.io/ipfs/${r}`}class o0{constructor(t){A(this,"name");H(this,{name:t})}connect(t){return this}supportsCoinType(t){return!1}async encodeAddress(t,e){throw new Error("unsupported coin")}async decodeAddress(t,e){throw new Error("unsupported coin")}}const Hf=new RegExp("^(ipfs)://(.*)$","i"),Ll=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),Hf,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];var Mn,Nr,Gn,Yr,So,Qf;const rs=class rs{constructor(t,e,n){E(this,Gn);A(this,"provider");A(this,"address");A(this,"name");E(this,Mn);E(this,Nr);H(this,{provider:t,address:e,name:n}),d(this,Mn,null),d(this,Nr,new ls(e,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],t))}async supportsWildcard(){return l(this,Mn)==null&&d(this,Mn,(async()=>{try{return await l(this,Nr).supportsInterface("0x9061b923")}catch(t){if(_t(t,"CALL_EXCEPTION"))return!1;throw d(this,Mn,null),t}})()),await l(this,Mn)}async getAddress(t){if(t==null&&(t=60),t===60)try{const i=await N(this,Gn,Yr).call(this,"addr(bytes32)");return i==null||i===Ai?null:i}catch(i){if(_t(i,"CALL_EXCEPTION"))return null;throw i}if(t>=0&&t<2147483648){let i=t+2147483648;const o=await N(this,Gn,Yr).call(this,"addr(bytes32,uint)",[i]);if(ct(o,20))return st(o)}let e=null;for(const i of this.provider.plugins)if(i instanceof o0&&i.supportsCoinType(t)){e=i;break}if(e==null)return null;const n=await N(this,Gn,Yr).call(this,"addr(bytes32,uint)",[t]);if(n==null||n==="0x")return null;const s=await e.decodeAddress(t,n);if(s!=null)return s;v(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${t})`,info:{coinType:t,data:n}})}async getText(t){const e=await N(this,Gn,Yr).call(this,"text(bytes32,string)",[t]);return e==null||e==="0x"?null:e}async getContentHash(){const t=await N(this,Gn,Yr).call(this,"contenthash(bytes32)");if(t==null||t==="0x")return null;const e=t.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(e){const s=e[1]==="e3010170"?"ipfs":"ipns",i=parseInt(e[4],16);if(e[5].length===i*2)return`${s}://${dh("0x"+e[2])}`}const n=t.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(n&&n[1].length===64)return`bzz://${n[1]}`;v(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:t}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){const t=[{type:"name",value:this.name}];try{const e=await this.getText("avatar");if(e==null)return t.push({type:"!avatar",value:""}),{url:null,linkage:t};t.push({type:"avatar",value:e});for(let n=0;n<Ll.length;n++){const s=e.match(Ll[n]);if(s==null)continue;const i=s[1].toLowerCase();switch(i){case"https":case"data":return t.push({type:"url",value:e}),{linkage:t,url:e};case"ipfs":{const o=fa(e);return t.push({type:"ipfs",value:e}),t.push({type:"url",value:o}),{linkage:t,url:o}}case"erc721":case"erc1155":{const o=i==="erc721"?"tokenURI(uint256)":"uri(uint256)";t.push({type:i,value:e});const a=await this.getAddress();if(a==null)return t.push({type:"!owner",value:""}),{url:null,linkage:t};const c=(s[2]||"").split("/");if(c.length!==2)return t.push({type:`!${i}caip`,value:s[2]||""}),{url:null,linkage:t};const u=c[1],f=new ls(c[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if(i==="erc721"){const m=await f.ownerOf(u);if(a!==m)return t.push({type:"!owner",value:m}),{url:null,linkage:t};t.push({type:"owner",value:m})}else if(i==="erc1155"){const m=await f.balanceOf(a,u);if(!m)return t.push({type:"!balance",value:"0"}),{url:null,linkage:t};t.push({type:"balance",value:m.toString()})}let h=await f[o](u);if(h==null||h==="0x")return t.push({type:"!metadata-url",value:""}),{url:null,linkage:t};t.push({type:"metadata-url-base",value:h}),i==="erc1155"&&(h=h.replace("{id}",Wn(u,32).substring(2)),t.push({type:"metadata-url-expanded",value:h})),h.match(/^ipfs:/i)&&(h=fa(h)),t.push({type:"metadata-url",value:h});let p={};const g=await new Yn(h).send();g.assertOk();try{p=g.bodyJson}catch{try{t.push({type:"!metadata",value:g.bodyText})}catch{const x=g.body;return x&&t.push({type:"!metadata",value:U(x)}),{url:null,linkage:t}}return{url:null,linkage:t}}if(!p)return t.push({type:"!metadata",value:""}),{url:null,linkage:t};t.push({type:"metadata",value:JSON.stringify(p)});let w=p.image;if(typeof w!="string")return t.push({type:"!imageUrl",value:""}),{url:null,linkage:t};if(!w.match(/^(https:\/\/|data:)/i)){if(w.match(Hf)==null)return t.push({type:"!imageUrl-ipfs",value:w}),{url:null,linkage:t};t.push({type:"imageUrl-ipfs",value:w}),w=fa(w)}return t.push({type:"url",value:w}),{linkage:t,url:w}}}}}catch{}return{linkage:t,url:null}}static async getEnsAddress(t){const e=await t.getNetwork(),n=e.getPlugin("org.ethers.plugins.network.Ens");return v(n,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:e}}),n.address}static async fromName(t,e){var s;let n=e;for(;;){if(n===""||n==="."||e!=="eth"&&n==="eth")return null;const i=await N(s=rs,So,Qf).call(s,t,n);if(i!=null){const o=new rs(t,i,e);return n!==e&&!await o.supportsWildcard()?null:o}n=n.split(".").slice(1).join(".")}}};Mn=new WeakMap,Nr=new WeakMap,Gn=new WeakSet,Yr=async function(t,e){e=(e||[]).slice();const n=l(this,Nr).interface;e.unshift(Da(this.name));let s=null;await this.supportsWildcard()&&(s=n.getFunction(t),v(s,"missing fragment","UNKNOWN_ERROR",{info:{funcName:t}}),e=[ig(this.name,255),n.encodeFunctionData(s,e)],t="resolve(bytes,bytes)"),e.push({enableCcipRead:!0});try{const i=await l(this,Nr)[t](...e);return s?n.decodeFunctionResult(s,i)[0]:i}catch(i){if(!_t(i,"CALL_EXCEPTION"))throw i}return null},So=new WeakSet,Qf=async function(t,e){const n=await rs.getEnsAddress(t);try{const i=await new ls(n,["function resolver(bytes32) view returns (address)"],t).resolver(Da(e),{enableCcipRead:!0});return i===Ai?null:i}catch(s){throw s}return null},E(rs,So);let Co=rs;const Dl=BigInt(0);function X(r,t){return function(e){return e==null?t:r(e)}}function Zo(r,t){return e=>{if(t&&e==null)return null;if(!Array.isArray(e))throw new Error("not an array");return e.map(n=>r(n))}}function Ji(r,t){return e=>{const n={};for(const s in r){let i=s;if(t&&s in t&&!(i in e)){for(const o of t[s])if(o in e){i=o;break}}try{const o=r[s](e[i]);o!==void 0&&(n[s]=o)}catch(o){const a=o instanceof Error?o.message:"not-an-error";v(!1,`invalid value for value.${s} (${a})`,"BAD_DATA",{value:e})}}return n}}function a0(r){switch(r){case!0:case"true":return!0;case!1:case"false":return!1}y(!1,`invalid boolean; ${JSON.stringify(r)}`,"value",r)}function ri(r){return y(ct(r,!0),"invalid data","value",r),r}function Ot(r){return y(ct(r,32),"invalid hash","value",r),r}const c0=Ji({address:st,blockHash:Ot,blockNumber:j,data:ri,index:j,removed:X(a0,!1),topics:Zo(Ot),transactionHash:Ot,transactionIndex:j},{index:["logIndex"]});function l0(r){return c0(r)}const u0=Ji({hash:X(Ot),parentHash:Ot,parentBeaconBlockRoot:X(Ot,null),number:j,timestamp:j,nonce:X(ri),difficulty:L,gasLimit:L,gasUsed:L,stateRoot:X(Ot,null),receiptsRoot:X(Ot,null),blobGasUsed:X(L,null),excessBlobGas:X(L,null),miner:X(st),prevRandao:X(Ot,null),extraData:ri,baseFeePerGas:X(L)},{prevRandao:["mixHash"]});function f0(r){const t=u0(r);return t.transactions=r.transactions.map(e=>typeof e=="string"?e:Vf(e)),t}const h0=Ji({transactionIndex:j,blockNumber:j,transactionHash:Ot,address:st,topics:Zo(Ot),data:ri,index:j,blockHash:Ot},{index:["logIndex"]});function d0(r){return h0(r)}const p0=Ji({to:X(st,null),from:X(st,null),contractAddress:X(st,null),index:j,root:X(U),gasUsed:L,blobGasUsed:X(L,null),logsBloom:X(ri),blockHash:Ot,hash:Ot,logs:Zo(d0),blockNumber:j,cumulativeGasUsed:L,effectiveGasPrice:X(L),blobGasPrice:X(L,null),status:X(j),type:X(j,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function g0(r){return p0(r)}function Vf(r){r.to&&L(r.to)===Dl&&(r.to="0x0000000000000000000000000000000000000000");const t=Ji({hash:Ot,index:X(j,void 0),type:e=>e==="0x"||e==null?0:j(e),accessList:X(Qr,null),blobVersionedHashes:X(Zo(Ot,!0),null),blockHash:X(Ot,null),blockNumber:X(j,null),transactionIndex:X(j,null),from:st,gasPrice:X(L),maxPriorityFeePerGas:X(L),maxFeePerGas:X(L),maxFeePerBlobGas:X(L,null),gasLimit:L,to:X(st,null),value:L,nonce:j,data:ri,creates:X(st,null),chainId:X(L,null)},{data:["input"],gasLimit:["gas"],index:["transactionIndex"]})(r);if(t.to==null&&t.creates==null&&(t.creates=cp(t)),(r.type===1||r.type===2)&&r.accessList==null&&(t.accessList=[]),r.signature?t.signature=De.from(r.signature):t.signature=De.from(r),t.chainId==null){const e=t.signature.legacyChainId;e!=null&&(t.chainId=e)}return t.blockHash&&L(t.blockHash)===Dl&&(t.blockHash=null),t}const m0="0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e";class zi{constructor(t){A(this,"name");H(this,{name:t})}clone(){return new zi(this.name)}}class Wo extends zi{constructor(e,n){e==null&&(e=0);super(`org.ethers.network.plugins.GasCost#${e||0}`);A(this,"effectiveBlock");A(this,"txBase");A(this,"txCreate");A(this,"txDataZero");A(this,"txDataNonzero");A(this,"txAccessListStorageKey");A(this,"txAccessListAddress");const s={effectiveBlock:e};function i(o,a){let c=(n||{})[o];c==null&&(c=a),y(typeof c=="number",`invalud value for ${o}`,"costs",n),s[o]=c}i("txBase",21e3),i("txCreate",32e3),i("txDataZero",4),i("txDataNonzero",16),i("txAccessListStorageKey",1900),i("txAccessListAddress",2400),H(this,s)}clone(){return new Wo(this.effectiveBlock,this)}}class Yo extends zi{constructor(e,n){super("org.ethers.plugins.network.Ens");A(this,"address");A(this,"targetNetwork");H(this,{address:e||m0,targetNetwork:n??1})}clone(){return new Yo(this.address,this.targetNetwork)}}var Li,Di;class y0 extends zi{constructor(e,n){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin");E(this,Li);E(this,Di);d(this,Li,e),d(this,Di,n)}get url(){return l(this,Li)}get processFunc(){return l(this,Di)}clone(){return this}}Li=new WeakMap,Di=new WeakMap;const ha=new Map;var Ls,Ds,Hn;const ss=class ss{constructor(t,e){E(this,Ls);E(this,Ds);E(this,Hn);d(this,Ls,t),d(this,Ds,L(e)),d(this,Hn,new Map)}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return l(this,Ls)}set name(t){d(this,Ls,t)}get chainId(){return l(this,Ds)}set chainId(t){d(this,Ds,L(t,"chainId"))}matches(t){if(t==null)return!1;if(typeof t=="string"){try{return this.chainId===L(t)}catch{}return this.name===t}if(typeof t=="number"||typeof t=="bigint"){try{return this.chainId===L(t)}catch{}return!1}if(typeof t=="object"){if(t.chainId!=null){try{return this.chainId===L(t.chainId)}catch{}return!1}return t.name!=null?this.name===t.name:!1}return!1}get plugins(){return Array.from(l(this,Hn).values())}attachPlugin(t){if(l(this,Hn).get(t.name))throw new Error(`cannot replace existing plugin: ${t.name} `);return l(this,Hn).set(t.name,t.clone()),this}getPlugin(t){return l(this,Hn).get(t)||null}getPlugins(t){return this.plugins.filter(e=>e.name.split("#")[0]===t)}clone(){const t=new ss(this.name,this.chainId);return this.plugins.forEach(e=>{t.attachPlugin(e.clone())}),t}computeIntrinsicGas(t){const e=this.getPlugin("org.ethers.plugins.network.GasCost")||new Wo;let n=e.txBase;if(t.to==null&&(n+=e.txCreate),t.data)for(let s=2;s<t.data.length;s+=2)t.data.substring(s,s+2)==="00"?n+=e.txDataZero:n+=e.txDataNonzero;if(t.accessList){const s=Qr(t.accessList);for(const i in s)n+=e.txAccessListAddress+e.txAccessListStorageKey*s[i].storageKeys.length}return n}static from(t){if(w0(),t==null)return ss.from("mainnet");if(typeof t=="number"&&(t=BigInt(t)),typeof t=="string"||typeof t=="bigint"){const e=ha.get(t);if(e)return e();if(typeof t=="bigint")return new ss("unknown",t);y(!1,"unknown network","network",t)}if(typeof t.clone=="function")return t.clone();if(typeof t=="object"){y(typeof t.name=="string"&&typeof t.chainId=="number","invalid network object name or chainId","network",t);const e=new ss(t.name,t.chainId);return(t.ensAddress||t.ensNetwork!=null)&&e.attachPlugin(new Yo(t.ensAddress,t.ensNetwork)),e}y(!1,"invalid network","network",t)}static register(t,e){typeof t=="number"&&(t=BigInt(t));const n=ha.get(t);n&&y(!1,`conflicting network for ${JSON.stringify(n.name)}`,"nameOrChainId",t),ha.set(t,e)}};Ls=new WeakMap,Ds=new WeakMap,Hn=new WeakMap;let qe=ss;function Ml(r,t){const e=String(r);if(!e.match(/^[0-9.]+$/))throw new Error(`invalid gwei value: ${r}`);const n=e.split(".");if(n.length===1&&n.push(""),n.length!==2)throw new Error(`invalid gwei value: ${r}`);for(;n[1].length<t;)n[1]+="0";if(n[1].length>9){let s=BigInt(n[1].substring(0,9));n[1].substring(9).match(/^0+$/)||s++,n[1]=s.toString()}return BigInt(n[0]+n[1])}function Gl(r){return new y0(r,async(t,e,n)=>{n.setHeader("User-Agent","ethers");let s;try{const[i,o]=await Promise.all([n.send(),t()]);s=i;const a=s.bodyJson.standard;return{gasPrice:o.gasPrice,maxFeePerGas:Ml(a.maxFee,9),maxPriorityFeePerGas:Ml(a.maxPriorityFee,9)}}catch(i){v(!1,`error encountered with polygon gas station (${JSON.stringify(n.url)})`,"SERVER_ERROR",{request:n,response:s,error:i})}})}let Hl=!1;function w0(){if(Hl)return;Hl=!0;function r(t,e,n){const s=function(){const i=new qe(t,e);return n.ensNetwork!=null&&i.attachPlugin(new Yo(null,n.ensNetwork)),i.attachPlugin(new Wo),(n.plugins||[]).forEach(o=>{i.attachPlugin(o)}),i};qe.register(t,s),qe.register(e,s),n.altNames&&n.altNames.forEach(i=>{qe.register(i,s)})}r("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),r("ropsten",3,{ensNetwork:3}),r("rinkeby",4,{ensNetwork:4}),r("goerli",5,{ensNetwork:5}),r("kovan",42,{ensNetwork:42}),r("sepolia",11155111,{ensNetwork:11155111}),r("holesky",17e3,{ensNetwork:17e3}),r("classic",61,{}),r("classicKotti",6,{}),r("arbitrum",42161,{ensNetwork:1}),r("arbitrum-goerli",421613,{}),r("arbitrum-sepolia",421614,{}),r("base",8453,{ensNetwork:1}),r("base-goerli",84531,{}),r("base-sepolia",84532,{}),r("bnb",56,{ensNetwork:1}),r("bnbt",97,{}),r("linea",59144,{ensNetwork:1}),r("linea-goerli",59140,{}),r("linea-sepolia",59141,{}),r("matic",137,{ensNetwork:1,plugins:[Gl("https://gasstation.polygon.technology/v2")]}),r("matic-amoy",80002,{}),r("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[Gl("https://gasstation-testnet.polygon.technology/v2")]}),r("optimism",10,{ensNetwork:1,plugins:[]}),r("optimism-goerli",420,{}),r("optimism-sepolia",11155420,{}),r("xdai",100,{ensNetwork:1})}function _a(r){return JSON.parse(JSON.stringify(r))}var dn,Ee,Qn,je,Ms,uo;class A0{constructor(t){E(this,Ms);E(this,dn);E(this,Ee);E(this,Qn);E(this,je);d(this,dn,t),d(this,Ee,null),d(this,Qn,4e3),d(this,je,-2)}get pollingInterval(){return l(this,Qn)}set pollingInterval(t){d(this,Qn,t)}start(){l(this,Ee)||(d(this,Ee,l(this,dn)._setTimeout(N(this,Ms,uo).bind(this),l(this,Qn))),N(this,Ms,uo).call(this))}stop(){l(this,Ee)&&(l(this,dn)._clearTimeout(l(this,Ee)),d(this,Ee,null))}pause(t){this.stop(),t&&d(this,je,-2)}resume(){this.start()}}dn=new WeakMap,Ee=new WeakMap,Qn=new WeakMap,je=new WeakMap,Ms=new WeakSet,uo=async function(){try{const t=await l(this,dn).getBlockNumber();if(l(this,je)===-2){d(this,je,t);return}if(t!==l(this,je)){for(let e=l(this,je)+1;e<=t;e++){if(l(this,Ee)==null)return;await l(this,dn).emit("block",e)}d(this,je,t)}}catch{}l(this,Ee)!=null&&d(this,Ee,l(this,dn)._setTimeout(N(this,Ms,uo).bind(this),l(this,Qn)))};var Pr,Ir,Vn;class bc{constructor(t){E(this,Pr);E(this,Ir);E(this,Vn);d(this,Pr,t),d(this,Vn,!1),d(this,Ir,e=>{this._poll(e,l(this,Pr))})}async _poll(t,e){throw new Error("sub-classes must override this")}start(){l(this,Vn)||(d(this,Vn,!0),l(this,Ir).call(this,-2),l(this,Pr).on("block",l(this,Ir)))}stop(){l(this,Vn)&&(d(this,Vn,!1),l(this,Pr).off("block",l(this,Ir)))}pause(t){this.stop()}resume(){this.start()}}Pr=new WeakMap,Ir=new WeakMap,Vn=new WeakMap;var Gs,pn;class b0 extends bc{constructor(e,n){super(e);E(this,Gs);E(this,pn);d(this,Gs,n),d(this,pn,-2)}pause(e){e&&d(this,pn,-2),super.pause(e)}async _poll(e,n){const s=await n.getBlock(l(this,Gs));s!=null&&(l(this,pn)===-2?d(this,pn,s.number):s.number>l(this,pn)&&(n.emit(l(this,Gs),s.number),d(this,pn,s.number)))}}Gs=new WeakMap,pn=new WeakMap;var Uo;class E0 extends bc{constructor(e,n){super(e);E(this,Uo);d(this,Uo,_a(n))}async _poll(e,n){throw new Error("@TODO")}}Uo=new WeakMap;var Hs;class x0 extends bc{constructor(e,n){super(e);E(this,Hs);d(this,Hs,n)}async _poll(e,n){const s=await n.getTransactionReceipt(l(this,Hs));s&&n.emit(l(this,Hs),s)}}Hs=new WeakMap;var gn,Qs,Vs,_n,xe,Fo,_f;class Ec{constructor(t,e){E(this,Fo);E(this,gn);E(this,Qs);E(this,Vs);E(this,_n);E(this,xe);d(this,gn,t),d(this,Qs,_a(e)),d(this,Vs,N(this,Fo,_f).bind(this)),d(this,_n,!1),d(this,xe,-2)}start(){l(this,_n)||(d(this,_n,!0),l(this,xe)===-2&&l(this,gn).getBlockNumber().then(t=>{d(this,xe,t)}),l(this,gn).on("block",l(this,Vs)))}stop(){l(this,_n)&&(d(this,_n,!1),l(this,gn).off("block",l(this,Vs)))}pause(t){this.stop(),t&&d(this,xe,-2)}resume(){this.start()}}gn=new WeakMap,Qs=new WeakMap,Vs=new WeakMap,_n=new WeakMap,xe=new WeakMap,Fo=new WeakSet,_f=async function(t){if(l(this,xe)===-2)return;const e=_a(l(this,Qs));e.fromBlock=l(this,xe)+1,e.toBlock=t;const n=await l(this,gn).getLogs(e);if(n.length===0){l(this,xe)<t-60&&d(this,xe,t-60);return}for(const s of n)l(this,gn).emit(l(this,Qs),s),d(this,xe,s.blockNumber)};const v0=BigInt(2),N0=10;function ro(r){return r&&typeof r.then=="function"}function fo(r,t){return r+":"+JSON.stringify(t,(e,n)=>{if(n==null)return"null";if(typeof n=="bigint")return`bigint:${n.toString()}`;if(typeof n=="string")return n.toLowerCase();if(typeof n=="object"&&!Array.isArray(n)){const s=Object.keys(n);return s.sort(),s.reduce((i,o)=>(i[o]=n[o],i),{})}return n})}class Jf{constructor(t){A(this,"name");H(this,{name:t})}start(){}stop(){}pause(t){}resume(){}}function P0(r){return JSON.parse(JSON.stringify(r))}function Ja(r){return r=Array.from(new Set(r).values()),r.sort(),r}async function da(r,t){if(r==null)throw new Error("invalid event");if(Array.isArray(r)&&(r={topics:r}),typeof r=="string")switch(r){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:r,tag:r}}if(ct(r,32)){const e=r.toLowerCase();return{type:"transaction",tag:fo("tx",{hash:e}),hash:e}}if(r.orphan){const e=r;return{type:"orphan",tag:fo("orphan",e),filter:P0(e)}}if(r.address||r.topics){const e=r,n={topics:(e.topics||[]).map(s=>s==null?null:Array.isArray(s)?Ja(s.map(i=>i.toLowerCase())):s.toLowerCase())};if(e.address){const s=[],i=[],o=a=>{ct(a)?s.push(a):i.push((async()=>{s.push(await qt(a,t))})())};Array.isArray(e.address)?e.address.forEach(o):o(e.address),i.length&&await Promise.all(i),n.address=Ja(s.map(a=>a.toLowerCase()))}return{filter:n,tag:fo("event",n),type:"event"}}y(!1,"unknown ProviderEvent","event",r)}function pa(){return new Date().getTime()}const I0={cacheTimeout:250,pollingInterval:4e3};var Mt,Jn,Gt,_s,pe,Br,zn,mn,Mi,ve,Js,zs,Y,le,za,Ka,pi,ja,gi,ho;class B0{constructor(t,e){E(this,Y);E(this,Mt);E(this,Jn);E(this,Gt);E(this,_s);E(this,pe);E(this,Br);E(this,zn);E(this,mn);E(this,Mi);E(this,ve);E(this,Js);E(this,zs);if(d(this,zs,Object.assign({},I0,e||{})),t==="any")d(this,Br,!0),d(this,pe,null);else if(t){const n=qe.from(t);d(this,Br,!1),d(this,pe,Promise.resolve(n)),setTimeout(()=>{this.emit("network",n,null)},0)}else d(this,Br,!1),d(this,pe,null);d(this,mn,-1),d(this,zn,new Map),d(this,Mt,new Map),d(this,Jn,new Map),d(this,Gt,null),d(this,_s,!1),d(this,Mi,1),d(this,ve,new Map),d(this,Js,!1)}get pollingInterval(){return l(this,zs).pollingInterval}get provider(){return this}get plugins(){return Array.from(l(this,Jn).values())}attachPlugin(t){if(l(this,Jn).get(t.name))throw new Error(`cannot replace existing plugin: ${t.name} `);return l(this,Jn).set(t.name,t.connect(this)),this}getPlugin(t){return l(this,Jn).get(t)||null}get disableCcipRead(){return l(this,Js)}set disableCcipRead(t){d(this,Js,!!t)}async ccipReadFetch(t,e,n){if(this.disableCcipRead||n.length===0||t.to==null)return null;const s=t.to.toLowerCase(),i=e.toLowerCase(),o=[];for(let a=0;a<n.length;a++){const c=n[a],u=c.replace("{sender}",s).replace("{data}",i),f=new Yn(u);c.indexOf("{data}")===-1&&(f.body={data:i,sender:s}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:f,index:a,urls:n});let h="unknown error";const p=await f.send();try{const g=p.bodyJson;if(g.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:f,result:g}),g.data;g.message&&(h=g.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:f,result:g})}catch{}v(p.statusCode<400||p.statusCode>=500,`response not found during CCIP fetch: ${h}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:t,info:{url:c,errorMessage:h}}),o.push(h)}v(!1,`error encountered during CCIP fetch: ${o.map(a=>JSON.stringify(a)).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:t,info:{urls:n,errorMessages:o}})}_wrapBlock(t,e){return new Kg(f0(t),this)}_wrapLog(t,e){return new _i(l0(t),this)}_wrapTransactionReceipt(t,e){return new kf(g0(t),this)}_wrapTransactionResponse(t,e){return new Bi(Vf(t),this)}_detectNetwork(){v(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(t){v(!1,`unsupported method: ${t.method}`,"UNSUPPORTED_OPERATION",{operation:t.method,info:t})}async getBlockNumber(){const t=j(await N(this,Y,le).call(this,{method:"getBlockNumber"}),"%response");return l(this,mn)>=0&&d(this,mn,t),t}_getAddress(t){return qt(t,this)}_getBlockTag(t){if(t==null)return"latest";switch(t){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return t}if(ct(t))return ct(t,32)?t:ts(t);if(typeof t=="bigint"&&(t=j(t,"blockTag")),typeof t=="number")return t>=0?ts(t):l(this,mn)>=0?ts(l(this,mn)+t):this.getBlockNumber().then(e=>ts(e+t));y(!1,"invalid blockTag","blockTag",t)}_getFilter(t){const e=(t.topics||[]).map(c=>c==null?null:Array.isArray(c)?Ja(c.map(u=>u.toLowerCase())):c.toLowerCase()),n="blockHash"in t?t.blockHash:void 0,s=(c,u,f)=>{let h;switch(c.length){case 0:break;case 1:h=c[0];break;default:c.sort(),h=c}if(n&&(u!=null||f!=null))throw new Error("invalid filter");const p={};return h&&(p.address=h),e.length&&(p.topics=e),u&&(p.fromBlock=u),f&&(p.toBlock=f),n&&(p.blockHash=n),p};let i=[];if(t.address)if(Array.isArray(t.address))for(const c of t.address)i.push(this._getAddress(c));else i.push(this._getAddress(t.address));let o;"fromBlock"in t&&(o=this._getBlockTag(t.fromBlock));let a;return"toBlock"in t&&(a=this._getBlockTag(t.toBlock)),i.filter(c=>typeof c!="string").length||o!=null&&typeof o!="string"||a!=null&&typeof a!="string"?Promise.all([Promise.all(i),o,a]).then(c=>s(c[0],c[1],c[2])):s(i,o,a)}_getTransactionRequest(t){const e=Io(t),n=[];if(["to","from"].forEach(s=>{if(e[s]==null)return;const i=qt(e[s],this);ro(i)?n.push(async function(){e[s]=await i}()):e[s]=i}),e.blockTag!=null){const s=this._getBlockTag(e.blockTag);ro(s)?n.push(async function(){e.blockTag=await s}()):e.blockTag=s}return n.length?async function(){return await Promise.all(n),e}():e}async getNetwork(){if(l(this,pe)==null){const s=(async()=>{try{const i=await this._detectNetwork();return this.emit("network",i,null),i}catch(i){throw l(this,pe)===s&&d(this,pe,null),i}})();return d(this,pe,s),(await s).clone()}const t=l(this,pe),[e,n]=await Promise.all([t,this._detectNetwork()]);return e.chainId!==n.chainId&&(l(this,Br)?(this.emit("network",n,e),l(this,pe)===t&&d(this,pe,Promise.resolve(n))):v(!1,`network changed: ${e.chainId} => ${n.chainId} `,"NETWORK_ERROR",{event:"changed"})),e.clone()}async getFeeData(){const t=await this.getNetwork(),e=async()=>{const{_block:s,gasPrice:i,priorityFee:o}=await Zt({_block:N(this,Y,ja).call(this,"latest",!1),gasPrice:(async()=>{try{const f=await N(this,Y,le).call(this,{method:"getGasPrice"});return L(f,"%response")}catch{}return null})(),priorityFee:(async()=>{try{const f=await N(this,Y,le).call(this,{method:"getPriorityFee"});return L(f,"%response")}catch{}return null})()});let a=null,c=null;const u=this._wrapBlock(s,t);return u&&u.baseFeePerGas&&(c=o??BigInt("1000000000"),a=u.baseFeePerGas*v0+c),new Sl(i,a,c)},n=t.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(n){const s=new Yn(n.url),i=await n.processFunc(e,this,s);return new Sl(i.gasPrice,i.maxFeePerGas,i.maxPriorityFeePerGas)}return await e()}async estimateGas(t){let e=this._getTransactionRequest(t);return ro(e)&&(e=await e),L(await N(this,Y,le).call(this,{method:"estimateGas",transaction:e}),"%response")}async call(t){const{tx:e,blockTag:n}=await Zt({tx:this._getTransactionRequest(t),blockTag:this._getBlockTag(t.blockTag)});return await N(this,Y,Ka).call(this,N(this,Y,za).call(this,e,n,t.enableCcipRead?0:-1))}async getBalance(t,e){return L(await N(this,Y,pi).call(this,{method:"getBalance"},t,e),"%response")}async getTransactionCount(t,e){return j(await N(this,Y,pi).call(this,{method:"getTransactionCount"},t,e),"%response")}async getCode(t,e){return U(await N(this,Y,pi).call(this,{method:"getCode"},t,e))}async getStorage(t,e,n){const s=L(e,"position");return U(await N(this,Y,pi).call(this,{method:"getStorage",position:s},t,n))}async broadcastTransaction(t){const{blockNumber:e,hash:n,network:s}=await Zt({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:t}),network:this.getNetwork()}),i=No.from(t);if(i.hash!==n)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(i,s).replaceableTransaction(e)}async getBlock(t,e){const{network:n,params:s}=await Zt({network:this.getNetwork(),params:N(this,Y,ja).call(this,t,!!e)});return s==null?null:this._wrapBlock(s,n)}async getTransaction(t){const{network:e,params:n}=await Zt({network:this.getNetwork(),params:N(this,Y,le).call(this,{method:"getTransaction",hash:t})});return n==null?null:this._wrapTransactionResponse(n,e)}async getTransactionReceipt(t){const{network:e,params:n}=await Zt({network:this.getNetwork(),params:N(this,Y,le).call(this,{method:"getTransactionReceipt",hash:t})});if(n==null)return null;if(n.gasPrice==null&&n.effectiveGasPrice==null){const s=await N(this,Y,le).call(this,{method:"getTransaction",hash:t});if(s==null)throw new Error("report this; could not find tx or effectiveGasPrice");n.effectiveGasPrice=s.gasPrice}return this._wrapTransactionReceipt(n,e)}async getTransactionResult(t){const{result:e}=await Zt({network:this.getNetwork(),result:N(this,Y,le).call(this,{method:"getTransactionResult",hash:t})});return e==null?null:U(e)}async getLogs(t){let e=this._getFilter(t);ro(e)&&(e=await e);const{network:n,params:s}=await Zt({network:this.getNetwork(),params:N(this,Y,le).call(this,{method:"getLogs",filter:e})});return s.map(i=>this._wrapLog(i,n))}_getProvider(t){v(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(t){return await Co.fromName(this,t)}async getAvatar(t){const e=await this.getResolver(t);return e?await e.getAvatar():null}async resolveName(t){const e=await this.getResolver(t);return e?await e.getAddress():null}async lookupAddress(t){t=st(t);const e=Da(t.substring(2).toLowerCase()+".addr.reverse");try{const n=await Co.getEnsAddress(this),i=await new ls(n,["function resolver(bytes32) view returns (address)"],this).resolver(e);if(i==null||i===Ai)return null;const a=await new ls(i,["function name(bytes32) view returns (string)"],this).name(e);return await this.resolveName(a)!==t?null:a}catch(n){if(_t(n,"BAD_DATA")&&n.value==="0x"||_t(n,"CALL_EXCEPTION"))return null;throw n}return null}async waitForTransaction(t,e,n){const s=e??1;return s===0?this.getTransactionReceipt(t):new Promise(async(i,o)=>{let a=null;const c=async u=>{try{const f=await this.getTransactionReceipt(t);if(f!=null&&u-f.blockNumber+1>=s){i(f),a&&(clearTimeout(a),a=null);return}}catch(f){console.log("EEE",f)}this.once("block",c)};n!=null&&(a=setTimeout(()=>{a!=null&&(a=null,this.off("block",c),o(mt("timeout","TIMEOUT",{reason:"timeout"})))},n)),c(await this.getBlockNumber())})}async waitForBlock(t){v(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(t){const e=l(this,ve).get(t);e&&(e.timer&&clearTimeout(e.timer),l(this,ve).delete(t))}_setTimeout(t,e){e==null&&(e=0);const n=ai(this,Mi)._++,s=()=>{l(this,ve).delete(n),t()};if(this.paused)l(this,ve).set(n,{timer:null,func:s,time:e});else{const i=setTimeout(s,e);l(this,ve).set(n,{timer:i,func:s,time:pa()})}return n}_forEachSubscriber(t){for(const e of l(this,Mt).values())t(e.subscriber)}_getSubscriber(t){switch(t.type){case"debug":case"error":case"network":return new Jf(t.type);case"block":{const e=new A0(this);return e.pollingInterval=this.pollingInterval,e}case"safe":case"finalized":return new b0(this,t.type);case"event":return new Ec(this,t.filter);case"transaction":return new x0(this,t.hash);case"orphan":return new E0(this,t.filter)}throw new Error(`unsupported event: ${t.type}`)}_recoverSubscriber(t,e){for(const n of l(this,Mt).values())if(n.subscriber===t){n.started&&n.subscriber.stop(),n.subscriber=e,n.started&&e.start(),l(this,Gt)!=null&&e.pause(l(this,Gt));break}}async on(t,e){const n=await N(this,Y,ho).call(this,t);return n.listeners.push({listener:e,once:!1}),n.started||(n.subscriber.start(),n.started=!0,l(this,Gt)!=null&&n.subscriber.pause(l(this,Gt))),this}async once(t,e){const n=await N(this,Y,ho).call(this,t);return n.listeners.push({listener:e,once:!0}),n.started||(n.subscriber.start(),n.started=!0,l(this,Gt)!=null&&n.subscriber.pause(l(this,Gt))),this}async emit(t,...e){const n=await N(this,Y,gi).call(this,t,e);if(!n||n.listeners.length===0)return!1;const s=n.listeners.length;return n.listeners=n.listeners.filter(({listener:i,once:o})=>{const a=new iu(this,o?null:i,t);try{i.call(this,...e,a)}catch{}return!o}),n.listeners.length===0&&(n.started&&n.subscriber.stop(),l(this,Mt).delete(n.tag)),s>0}async listenerCount(t){if(t){const n=await N(this,Y,gi).call(this,t);return n?n.listeners.length:0}let e=0;for(const{listeners:n}of l(this,Mt).values())e+=n.length;return e}async listeners(t){if(t){const n=await N(this,Y,gi).call(this,t);return n?n.listeners.map(({listener:s})=>s):[]}let e=[];for(const{listeners:n}of l(this,Mt).values())e=e.concat(n.map(({listener:s})=>s));return e}async off(t,e){const n=await N(this,Y,gi).call(this,t);if(!n)return this;if(e){const s=n.listeners.map(({listener:i})=>i).indexOf(e);s>=0&&n.listeners.splice(s,1)}return(!e||n.listeners.length===0)&&(n.started&&n.subscriber.stop(),l(this,Mt).delete(n.tag)),this}async removeAllListeners(t){if(t){const{tag:e,started:n,subscriber:s}=await N(this,Y,ho).call(this,t);n&&s.stop(),l(this,Mt).delete(e)}else for(const[e,{started:n,subscriber:s}]of l(this,Mt))n&&s.stop(),l(this,Mt).delete(e);return this}async addListener(t,e){return await this.on(t,e)}async removeListener(t,e){return this.off(t,e)}get destroyed(){return l(this,_s)}destroy(){this.removeAllListeners();for(const t of l(this,ve).keys())this._clearTimeout(t);d(this,_s,!0)}get paused(){return l(this,Gt)!=null}set paused(t){!!t!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(t){if(d(this,mn,-1),l(this,Gt)!=null){if(l(this,Gt)==!!t)return;v(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber(e=>e.pause(t)),d(this,Gt,!!t);for(const e of l(this,ve).values())e.timer&&clearTimeout(e.timer),e.time=pa()-e.time}resume(){if(l(this,Gt)!=null){this._forEachSubscriber(t=>t.resume()),d(this,Gt,null);for(const t of l(this,ve).values()){let e=t.time;e<0&&(e=0),t.time=pa(),setTimeout(t.func,e)}}}}Mt=new WeakMap,Jn=new WeakMap,Gt=new WeakMap,_s=new WeakMap,pe=new WeakMap,Br=new WeakMap,zn=new WeakMap,mn=new WeakMap,Mi=new WeakMap,ve=new WeakMap,Js=new WeakMap,zs=new WeakMap,Y=new WeakSet,le=async function(t){const e=l(this,zs).cacheTimeout;if(e<0)return await this._perform(t);const n=fo(t.method,t);let s=l(this,zn).get(n);return s||(s=this._perform(t),l(this,zn).set(n,s),setTimeout(()=>{l(this,zn).get(n)===s&&l(this,zn).delete(n)},e)),await s},za=async function(t,e,n){v(n<N0,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},t,{blockTag:e,enableCcipRead:!0})});const s=Io(t);try{return U(await this._perform({method:"call",transaction:s,blockTag:e}))}catch(i){if(!this.disableCcipRead&&tc(i)&&i.data&&n>=0&&e==="latest"&&s.to!=null&&yt(i.data,0,4)==="0x556f1830"){const o=i.data,a=await qt(s.to,this);let c;try{c=R0(yt(i.data,4))}catch(h){v(!1,h.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:s,info:{data:o}})}v(c.sender.toLowerCase()===a.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:o,reason:"OffchainLookup",transaction:s,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:c.errorArgs}});const u=await this.ccipReadFetch(s,c.calldata,c.urls);v(u!=null,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:s,info:{data:i.data,errorArgs:c.errorArgs}});const f={to:a,data:Et([c.selector,O0([u,c.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:f});try{const h=await N(this,Y,za).call(this,f,e,n+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},f),result:h}),h}catch(h){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},f),error:h}),h}}throw i}},Ka=async function(t){const{value:e}=await Zt({network:this.getNetwork(),value:t});return e},pi=async function(t,e,n){let s=this._getAddress(e),i=this._getBlockTag(n);return(typeof s!="string"||typeof i!="string")&&([s,i]=await Promise.all([s,i])),await N(this,Y,Ka).call(this,N(this,Y,le).call(this,Object.assign(t,{address:s,blockTag:i})))},ja=async function(t,e){if(ct(t,32))return await N(this,Y,le).call(this,{method:"getBlock",blockHash:t,includeTransactions:e});let n=this._getBlockTag(t);return typeof n!="string"&&(n=await n),await N(this,Y,le).call(this,{method:"getBlock",blockTag:n,includeTransactions:e})},gi=async function(t,e){let n=await da(t,this);return n.type==="event"&&e&&e.length>0&&e[0].removed===!0&&(n=await da({orphan:"drop-log",log:e[0]},this)),l(this,Mt).get(n.tag)||null},ho=async function(t){const e=await da(t,this),n=e.tag;let s=l(this,Mt).get(n);return s||(s={subscriber:this._getSubscriber(e),tag:n,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},l(this,Mt).set(n,s)),s};function C0(r,t){try{const e=Za(r,t);if(e)return mo(e)}catch{}return null}function Za(r,t){if(r==="0x")return null;try{const e=j(yt(r,t,t+32)),n=j(yt(r,e,e+32));return yt(r,e+32,e+32+n)}catch{}return null}function Ql(r){const t=Yt(r);if(t.length>32)throw new Error("internal; should not happen");const e=new Uint8Array(32);return e.set(t,32-t.length),e}function k0(r){if(r.length%32===0)return r;const t=new Uint8Array(Math.ceil(r.length/32)*32);return t.set(r),t}const T0=new Uint8Array([]);function O0(r){const t=[];let e=0;for(let n=0;n<r.length;n++)t.push(T0),e+=32;for(let n=0;n<r.length;n++){const s=q(r[n]);t[n]=Ql(e),t.push(Ql(s.length)),t.push(k0(s)),e+=32+Math.ceil(s.length/32)*32}return Et(t)}const Vl="0x0000000000000000000000000000000000000000000000000000000000000000";function R0(r){const t={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};v(is(r)>=5*32,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const e=yt(r,0,32);v(yt(e,0,12)===yt(Vl,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),t.sender=yt(e,12);try{const n=[],s=j(yt(r,32,64)),i=j(yt(r,s,s+32)),o=yt(r,s+32);for(let a=0;a<i;a++){const c=C0(o,a*32);if(c==null)throw new Error("abort");n.push(c)}t.urls=n}catch{v(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const n=Za(r,64);if(n==null)throw new Error("abort");t.calldata=n}catch{v(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}v(yt(r,100,128)===yt(Vl,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),t.selector=yt(r,96,100);try{const n=Za(r,128);if(n==null)throw new Error("abort");t.extraData=n}catch{v(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return t.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map(n=>t[n]),t}function Kr(r,t){if(r.provider)return r.provider;v(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:t})}async function _l(r,t){let e=Io(t);if(e.to!=null&&(e.to=qt(e.to,r)),e.from!=null){const n=e.from;e.from=Promise.all([r.getAddress(),qt(n,r)]).then(([s,i])=>(y(s.toLowerCase()===i.toLowerCase(),"transaction from mismatch","tx.from",i),s))}else e.from=r.getAddress();return await Zt(e)}class S0{constructor(t){A(this,"provider");H(this,{provider:t||null})}async getNonce(t){return Kr(this,"getTransactionCount").getTransactionCount(await this.getAddress(),t)}async populateCall(t){return await _l(this,t)}async populateTransaction(t){const e=Kr(this,"populateTransaction"),n=await _l(this,t);n.nonce==null&&(n.nonce=await this.getNonce("pending")),n.gasLimit==null&&(n.gasLimit=await this.estimateGas(n));const s=await this.provider.getNetwork();if(n.chainId!=null){const o=L(n.chainId);y(o===s.chainId,"transaction chainId mismatch","tx.chainId",t.chainId)}else n.chainId=s.chainId;const i=n.maxFeePerGas!=null||n.maxPriorityFeePerGas!=null;if(n.gasPrice!=null&&(n.type===2||i)?y(!1,"eip-1559 transaction do not support gasPrice","tx",t):(n.type===0||n.type===1)&&i&&y(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",t),(n.type===2||n.type==null)&&n.maxFeePerGas!=null&&n.maxPriorityFeePerGas!=null)n.type=2;else if(n.type===0||n.type===1){const o=await e.getFeeData();v(o.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),n.gasPrice==null&&(n.gasPrice=o.gasPrice)}else{const o=await e.getFeeData();if(n.type==null)if(o.maxFeePerGas!=null&&o.maxPriorityFeePerGas!=null)if(n.type=2,n.gasPrice!=null){const a=n.gasPrice;delete n.gasPrice,n.maxFeePerGas=a,n.maxPriorityFeePerGas=a}else n.maxFeePerGas==null&&(n.maxFeePerGas=o.maxFeePerGas),n.maxPriorityFeePerGas==null&&(n.maxPriorityFeePerGas=o.maxPriorityFeePerGas);else o.gasPrice!=null?(v(!i,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),n.gasPrice==null&&(n.gasPrice=o.gasPrice),n.type=0):v(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else(n.type===2||n.type===3)&&(n.maxFeePerGas==null&&(n.maxFeePerGas=o.maxFeePerGas),n.maxPriorityFeePerGas==null&&(n.maxPriorityFeePerGas=o.maxPriorityFeePerGas))}return await Zt(n)}async estimateGas(t){return Kr(this,"estimateGas").estimateGas(await this.populateCall(t))}async call(t){return Kr(this,"call").call(await this.populateCall(t))}async resolveName(t){return await Kr(this,"resolveName").resolveName(t)}async sendTransaction(t){const e=Kr(this,"sendTransaction"),n=await this.populateTransaction(t);delete n.from;const s=No.from(n);return await e.broadcastTransaction(await this.signTransaction(s))}}function U0(r){return JSON.parse(JSON.stringify(r))}var jt,Ze,Cr,Kn,kr,Ks,Xn,Wa,Ya;class zf{constructor(t){E(this,Xn);E(this,jt);E(this,Ze);E(this,Cr);E(this,Kn);E(this,kr);E(this,Ks);d(this,jt,t),d(this,Ze,null),d(this,Cr,N(this,Xn,Wa).bind(this)),d(this,Kn,!1),d(this,kr,null),d(this,Ks,!1)}_subscribe(t){throw new Error("subclasses must override this")}_emitResults(t,e){throw new Error("subclasses must override this")}_recover(t){throw new Error("subclasses must override this")}start(){l(this,Kn)||(d(this,Kn,!0),N(this,Xn,Wa).call(this,-2))}stop(){l(this,Kn)&&(d(this,Kn,!1),d(this,Ks,!0),N(this,Xn,Ya).call(this),l(this,jt).off("block",l(this,Cr)))}pause(t){t&&N(this,Xn,Ya).call(this),l(this,jt).off("block",l(this,Cr))}resume(){this.start()}}jt=new WeakMap,Ze=new WeakMap,Cr=new WeakMap,Kn=new WeakMap,kr=new WeakMap,Ks=new WeakMap,Xn=new WeakSet,Wa=async function(t){try{l(this,Ze)==null&&d(this,Ze,this._subscribe(l(this,jt)));let e=null;try{e=await l(this,Ze)}catch(i){if(!_t(i,"UNSUPPORTED_OPERATION")||i.operation!=="eth_newFilter")throw i}if(e==null){d(this,Ze,null),l(this,jt)._recoverSubscriber(this,this._recover(l(this,jt)));return}const n=await l(this,jt).getNetwork();if(l(this,kr)||d(this,kr,n),l(this,kr).chainId!==n.chainId)throw new Error("chaid changed");if(l(this,Ks))return;const s=await l(this,jt).send("eth_getFilterChanges",[e]);await this._emitResults(l(this,jt),s)}catch(e){console.log("@TODO",e)}l(this,jt).once("block",l(this,Cr))},Ya=function(){const t=l(this,Ze);t&&(d(this,Ze,null),t.then(e=>{l(this,jt).destroyed||l(this,jt).send("eth_uninstallFilter",[e])}))};var Tr;class F0 extends zf{constructor(e,n){super(e);E(this,Tr);d(this,Tr,U0(n))}_recover(e){return new Ec(e,l(this,Tr))}async _subscribe(e){return await e.send("eth_newFilter",[l(this,Tr)])}async _emitResults(e,n){for(const s of n)e.emit(l(this,Tr),e._wrapLog(s,e._network))}}Tr=new WeakMap;class L0 extends zf{async _subscribe(t){return await t.send("eth_newPendingTransactionFilter",[])}async _emitResults(t,e){for(const n of e)t.emit("pending",n)}}const D0="bigint,boolean,function,number,string,symbol".split(/,/g);function po(r){if(r==null||D0.indexOf(typeof r)>=0||typeof r.getAddress=="function")return r;if(Array.isArray(r))return r.map(po);if(typeof r=="object")return Object.keys(r).reduce((t,e)=>(t[e]=r[e],t),{});throw new Error(`should not happen: ${r} (${typeof r})`)}function M0(r){return new Promise(t=>{setTimeout(t,r)})}function jr(r){return r&&r.toLowerCase()}function Jl(r){return r&&typeof r.pollingInterval=="number"}const Kf={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class ga extends S0{constructor(e,n){super(e);A(this,"address");n=st(n),H(this,{address:n})}connect(e){v(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(e){return await this.populateCall(e)}async sendUncheckedTransaction(e){const n=po(e),s=[];if(n.from){const o=n.from;s.push((async()=>{const a=await qt(o,this.provider);y(a!=null&&a.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",e),n.from=a})())}else n.from=this.address;if(n.gasLimit==null&&s.push((async()=>{n.gasLimit=await this.provider.estimateGas({...n,from:this.address})})()),n.to!=null){const o=n.to;s.push((async()=>{n.to=await qt(o,this.provider)})())}s.length&&await Promise.all(s);const i=this.provider.getRpcTransaction(n);return this.provider.send("eth_sendTransaction",[i])}async sendTransaction(e){const n=await this.provider.getBlockNumber(),s=await this.sendUncheckedTransaction(e);return await new Promise((i,o)=>{const a=[1e3,100];let c=0;const u=async()=>{try{const f=await this.provider.getTransaction(s);if(f!=null){i(f.replaceableTransaction(n));return}}catch(f){if(_t(f,"CANCELLED")||_t(f,"BAD_DATA")||_t(f,"NETWORK_ERROR")){f.info==null&&(f.info={}),f.info.sendTransactionHash=s,o(f);return}if(_t(f,"INVALID_ARGUMENT")&&(c++,f.info==null&&(f.info={}),f.info.sendTransactionHash=s,c>10)){o(f);return}this.provider.emit("error",mt("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:f}))}this.provider._setTimeout(()=>{u()},a.pop()||4e3)};u()})}async signTransaction(e){const n=po(e);if(n.from){const i=await qt(n.from,this.provider);y(i!=null&&i.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",e),n.from=i}else n.from=this.address;const s=this.provider.getRpcTransaction(n);return await this.provider.send("eth_signTransaction",[s])}async signMessage(e){const n=typeof e=="string"?En(e):e;return await this.provider.send("personal_sign",[U(n),this.address.toLowerCase()])}async signTypedData(e,n,s){const i=po(s),o=await Po.resolveNames(e,n,i,async a=>{const c=await qt(a);return y(c!=null,"TypedData does not support null address","value",a),c});return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(Po.getPayload(o.domain,n,o.value))])}async unlock(e){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),e,null])}async _legacySignMessage(e){const n=typeof e=="string"?En(e):e;return await this.provider.send("eth_sign",[this.address.toLowerCase(),U(n)])}}var Or,js,yn,We,Fe,Ne,ne,Gi,Xa;class G0 extends B0{constructor(e,n){super(e,n);E(this,Gi);E(this,Or);E(this,js);E(this,yn);E(this,We);E(this,Fe);E(this,Ne);E(this,ne);d(this,js,1),d(this,Or,Object.assign({},Kf,n||{})),d(this,yn,[]),d(this,We,null),d(this,Ne,null),d(this,ne,null);{let i=null;const o=new Promise(a=>{i=a});d(this,Fe,{promise:o,resolve:i})}const s=this._getOption("staticNetwork");typeof s=="boolean"?(y(!s||e!=="any","staticNetwork cannot be used on special network 'any'","options",n),s&&e!=null&&d(this,Ne,qe.from(e))):s&&(y(e==null||s.matches(e),"staticNetwork MUST match network object","options",n),d(this,Ne,s))}_getOption(e){return l(this,Or)[e]}get _network(){return v(l(this,Ne),"network is not available yet","NETWORK_ERROR"),l(this,Ne)}async _perform(e){if(e.method==="call"||e.method==="estimateGas"){let s=e.transaction;if(s&&s.type!=null&&L(s.type)&&s.maxFeePerGas==null&&s.maxPriorityFeePerGas==null){const i=await this.getFeeData();i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null&&(e=Object.assign({},e,{transaction:Object.assign({},s,{type:void 0})}))}}const n=this.getRpcRequest(e);return n!=null?await this.send(n.method,n.args):super._perform(e)}async _detectNetwork(){const e=this._getOption("staticNetwork");if(e)if(e===!0){if(l(this,Ne))return l(this,Ne)}else return e;return l(this,ne)?await l(this,ne):this.ready?(d(this,ne,(async()=>{try{const n=qe.from(L(await this.send("eth_chainId",[])));return d(this,ne,null),n}catch(n){throw d(this,ne,null),n}})()),await l(this,ne)):(d(this,ne,(async()=>{const n={id:ai(this,js)._++,method:"eth_chainId",params:[],jsonrpc:"2.0"};this.emit("debug",{action:"sendRpcPayload",payload:n});let s;try{s=(await this._send(n))[0],d(this,ne,null)}catch(i){throw d(this,ne,null),this.emit("debug",{action:"receiveRpcError",error:i}),i}if(this.emit("debug",{action:"receiveRpcResult",result:s}),"result"in s)return qe.from(L(s.result));throw this.getRpcError(n,s)})()),await l(this,ne))}_start(){l(this,Fe)==null||l(this,Fe).resolve==null||(l(this,Fe).resolve(),d(this,Fe,null),(async()=>{for(;l(this,Ne)==null&&!this.destroyed;)try{d(this,Ne,await this._detectNetwork())}catch(e){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",mt("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:e}})),await M0(1e3)}N(this,Gi,Xa).call(this)})())}async _waitUntilReady(){if(l(this,Fe)!=null)return await l(this,Fe).promise}_getSubscriber(e){return e.type==="pending"?new L0(this):e.type==="event"?this._getOption("polling")?new Ec(this,e.filter):new F0(this,e.filter):e.type==="orphan"&&e.filter.orphan==="drop-log"?new Jf("orphan"):super._getSubscriber(e)}get ready(){return l(this,Fe)==null}getRpcTransaction(e){const n={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(s=>{if(e[s]==null)return;let i=s;s==="gasLimit"&&(i="gas"),n[i]=ts(L(e[s],`tx.${s}`))}),["from","to","data"].forEach(s=>{e[s]!=null&&(n[s]=U(e[s]))}),e.accessList&&(n.accessList=Qr(e.accessList)),e.blobVersionedHashes&&(n.blobVersionedHashes=e.blobVersionedHashes.map(s=>s.toLowerCase())),n}getRpcRequest(e){switch(e.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[jr(e.address),e.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[jr(e.address),e.blockTag]};case"getCode":return{method:"eth_getCode",args:[jr(e.address),e.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[jr(e.address),"0x"+e.position.toString(16),e.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[e.signedTransaction]};case"getBlock":if("blockTag"in e)return{method:"eth_getBlockByNumber",args:[e.blockTag,!!e.includeTransactions]};if("blockHash"in e)return{method:"eth_getBlockByHash",args:[e.blockHash,!!e.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[e.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[e.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(e.transaction),e.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(e.transaction)]};case"getLogs":return e.filter&&e.filter.address!=null&&(Array.isArray(e.filter.address)?e.filter.address=e.filter.address.map(jr):e.filter.address=jr(e.filter.address)),{method:"eth_getLogs",args:[e.filter]}}return null}getRpcError(e,n){const{method:s}=e,{error:i}=n;if(s==="eth_estimateGas"&&i.message){const c=i.message;if(!c.match(/revert/i)&&c.match(/insufficient funds/i))return mt("insufficient funds","INSUFFICIENT_FUNDS",{transaction:e.params[0],info:{payload:e,error:i}})}if(s==="eth_call"||s==="eth_estimateGas"){const c=qa(i),u=Ii.getBuiltinCallException(s==="eth_call"?"call":"estimateGas",e.params[0],c?c.data:null);return u.info={error:i,payload:e},u}const o=JSON.stringify(Q0(i));if(typeof i.message=="string"&&i.message.match(/user denied|ethers-user-denied/i))return mt("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[s]||"unknown",reason:"rejected",info:{payload:e,error:i}});if(s==="eth_sendRawTransaction"||s==="eth_sendTransaction"){const c=e.params[0];if(o.match(/insufficient funds|base fee exceeds gas limit/i))return mt("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:c,info:{error:i}});if(o.match(/nonce/i)&&o.match(/too low/i))return mt("nonce has already been used","NONCE_EXPIRED",{transaction:c,info:{error:i}});if(o.match(/replacement transaction/i)&&o.match(/underpriced/i))return mt("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:c,info:{error:i}});if(o.match(/only replay-protected/i))return mt("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:s,info:{transaction:c,info:{error:i}}})}let a=!!o.match(/the method .* does not exist/i);return a||i&&i.details&&i.details.startsWith("Unauthorized method:")&&(a=!0),a?mt("unsupported operation","UNSUPPORTED_OPERATION",{operation:e.method,info:{error:i,payload:e}}):mt("could not coalesce error","UNKNOWN_ERROR",{error:i,payload:e})}send(e,n){if(this.destroyed)return Promise.reject(mt("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:e}));const s=ai(this,js)._++,i=new Promise((o,a)=>{l(this,yn).push({resolve:o,reject:a,payload:{method:e,params:n,id:s,jsonrpc:"2.0"}})});return N(this,Gi,Xa).call(this),i}async getSigner(e){e==null&&(e=0);const n=this.send("eth_accounts",[]);if(typeof e=="number"){const i=await n;if(e>=i.length)throw new Error("no such account");return new ga(this,i[e])}const{accounts:s}=await Zt({network:this.getNetwork(),accounts:n});e=st(e);for(const i of s)if(st(i)===e)return new ga(this,e);throw new Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map(n=>new ga(this,n))}destroy(){l(this,We)&&(clearTimeout(l(this,We)),d(this,We,null));for(const{payload:e,reject:n}of l(this,yn))n(mt("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:e.method}));d(this,yn,[]),super.destroy()}}Or=new WeakMap,js=new WeakMap,yn=new WeakMap,We=new WeakMap,Fe=new WeakMap,Ne=new WeakMap,ne=new WeakMap,Gi=new WeakSet,Xa=function(){if(l(this,We))return;const e=this._getOption("batchMaxCount")===1?0:this._getOption("batchStallTime");d(this,We,setTimeout(()=>{d(this,We,null);const n=l(this,yn);for(d(this,yn,[]);n.length;){const s=[n.shift()];for(;n.length&&s.length!==l(this,Or).batchMaxCount;)if(s.push(n.shift()),JSON.stringify(s.map(o=>o.payload)).length>l(this,Or).batchMaxSize){n.unshift(s.pop());break}(async()=>{const i=s.length===1?s[0].payload:s.map(o=>o.payload);this.emit("debug",{action:"sendRpcPayload",payload:i});try{const o=await this._send(i);this.emit("debug",{action:"receiveRpcResult",result:o});for(const{resolve:a,reject:c,payload:u}of s){if(this.destroyed){c(mt("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:u.method}));continue}const f=o.filter(h=>h.id===u.id)[0];if(f==null){const h=mt("missing response for request","BAD_DATA",{value:o,info:{payload:u}});this.emit("error",h),c(h);continue}if("error"in f){c(this.getRpcError(u,f));continue}a(f.result)}}catch(o){this.emit("debug",{action:"receiveRpcError",error:o});for(const{reject:a}of s)a(o)}})()}},e))};var jn;class H0 extends G0{constructor(e,n){super(e,n);E(this,jn);let s=this._getOption("pollingInterval");s==null&&(s=Kf.pollingInterval),d(this,jn,s)}_getSubscriber(e){const n=super._getSubscriber(e);return Jl(n)&&(n.pollingInterval=l(this,jn)),n}get pollingInterval(){return l(this,jn)}set pollingInterval(e){if(!Number.isInteger(e)||e<0)throw new Error("invalid interval");d(this,jn,e),this._forEachSubscriber(n=>{Jl(n)&&(n.pollingInterval=l(this,jn))})}}jn=new WeakMap;function qa(r){if(r==null)return null;if(typeof r.message=="string"&&r.message.match(/revert/i)&&ct(r.data))return{message:r.message,data:r.data};if(typeof r=="object"){for(const t in r){const e=qa(r[t]);if(e)return e}return null}if(typeof r=="string")try{return qa(JSON.parse(r))}catch{}return null}function $a(r,t){if(r!=null){if(typeof r.message=="string"&&t.push(r.message),typeof r=="object")for(const e in r)$a(r[e],t);if(typeof r=="string")try{return $a(JSON.parse(r),t)}catch{}}}function Q0(r){const t=[];return $a(r,t),t}var Zs;class V0 extends H0{constructor(e,n,s){const i=Object.assign({},s??{},{batchMaxCount:1});y(e&&e.request,"invalid EIP-1193 provider","ethereum",e);super(n,i);E(this,Zs);d(this,Zs,async(o,a)=>{const c={method:o,params:a};this.emit("debug",{action:"sendEip1193Request",payload:c});try{const u=await e.request(c);return this.emit("debug",{action:"receiveEip1193Result",result:u}),u}catch(u){const f=new Error(u.message);throw f.code=u.code,f.data=u.data,f.payload=c,this.emit("debug",{action:"receiveEip1193Error",error:f}),f}})}async send(e,n){return await this._start(),await super.send(e,n)}async _send(e){y(!Array.isArray(e),"EIP-1193 does not support batch request","payload",e);try{const n=await l(this,Zs).call(this,e.method,e.params||[]);return[{id:e.id,result:n}]}catch(n){return[{id:e.id,error:{code:n.code,data:n.data,message:n.message}}]}}getRpcError(e,n){switch(n=JSON.parse(JSON.stringify(n)),n.error.code||-1){case 4001:n.error.message=`ethers-user-denied: ${n.error.message}`;break;case 4200:n.error.message=`ethers-unsupported: ${n.error.message}`;break}return super.getRpcError(e,n)}async hasSigner(e){e==null&&(e=0);const n=await this.send("eth_accounts",[]);return typeof e=="number"?n.length>e:(e=e.toLowerCase(),n.filter(s=>s.toLowerCase()===e).length!==0)}async getSigner(e){if(e==null&&(e=0),!await this.hasSigner(e))try{await l(this,Zs).call(this,"eth_requestAccounts",[])}catch(n){const s=n.payload;throw this.getRpcError(s,{id:s.id,error:n})}return await super.getSigner(e)}}Zs=new WeakMap;function _0(r){let t,e,n,s,i,o,a,c,u,f,h="Instead of simply storing a link to an image, AINFTs represent the algorithm used to generate the image. The image can be generated and verified by anyone, anywhere, at any time.",p,g,w="Explore our collection, read our whitepaper to dive deep into the technology, or check out our GitHub to see how it all works under the hood. Join us in shaping the future of digital ownership and artificial intelligence!",m,b,x='<div id="aiNftCarousel" class="carousel slide" data-bs-ride="carousel"><div class="carousel-inner"><div class="carousel-item active"><img src="examples/1.png" class="d-block w-100" alt="AINFT Example 1"/></div> <div class="carousel-item"><img src="examples/2.png" class="d-block w-100" alt="AINFT Example 2"/></div> <div class="carousel-item"><img src="examples/3.png" class="d-block w-100" alt="AINFT Example 3"/></div> <div class="carousel-item"><img src="examples/4.png" class="d-block w-100" alt="AINFT Example 4"/></div> <div class="carousel-item"><img src="examples/5.png" class="d-block w-100" alt="AINFT Example 5"/></div></div> <button class="carousel-control-prev" type="button" data-bs-target="#aiNftCarousel" data-bs-slide="prev"><span class="carousel-control-prev-icon" aria-hidden="true"></span> <span class="visually-hidden">Previous</span></button> <button class="carousel-control-next" type="button" data-bs-target="#aiNftCarousel" data-bs-slide="next"><span class="carousel-control-next-icon" aria-hidden="true"></span> <span class="visually-hidden">Next</span></button></div>',B,P,M=`<div class="col-4 mb-3"><a href="https://opensea.io/collection/ainft-21" class="btn btn-custom-primary btn-lg w-100 rounded-3 d-flex flex-column align-items-center justify-content-center svelte-1rxiwzv" style="height: 120px;"><img src="https://storage.googleapis.com/opensea-static/Logomark/Logomark-Transparent%20White.png" alt="OpenSea Logo" class="btn-icon mb-2 svelte-1rxiwzv" style="width: 40px; height: 40px;"/>
                View on OpenSea</a></div> <div class="col-4 mb-3"><a href="http://ainft.website/paper.pdf" class="btn btn-custom-secondary btn-lg w-100 rounded-3 d-flex flex-column align-items-center justify-content-center svelte-1rxiwzv" style="height: 120px;"><i class="bi bi-file-earmark-text btn-icon mb-2 svelte-1rxiwzv"></i>
                Read Paper</a></div> <div class="col-4 mb-3"><a href="https://github.com/basilroy76/AINFT" class="btn btn-custom-dark btn-lg w-100 rounded-3 d-flex flex-column align-items-center justify-content-center svelte-1rxiwzv" style="height: 120px;"><i class="bi bi-github btn-icon mb-2 svelte-1rxiwzv"></i>
                GitHub Repo</a></div>`;return{c(){t=z("div"),e=z("div"),n=z("div"),s=z("h1"),i=Ht(r[0]),o=ht(),a=z("h3"),c=Ht(r[1]),u=ht(),f=z("p"),f.textContent=h,p=ht(),g=z("p"),g.textContent=w,m=ht(),b=z("div"),b.innerHTML=x,B=ht(),P=z("div"),P.innerHTML=M,this.h()},l(O){t=K(O,"DIV",{class:!0});var C=pt(t);e=K(C,"DIV",{class:!0});var k=pt(e);n=K(k,"DIV",{class:!0});var T=pt(n);s=K(T,"H1",{class:!0});var V=pt(s);i=Qt(V,r[0]),V.forEach(_),o=dt(T),a=K(T,"H3",{class:!0});var D=pt(a);c=Qt(D,r[1]),D.forEach(_),u=dt(T),f=K(T,"P",{"data-svelte-h":!0}),ie(f)!=="svelte-16vfgv8"&&(f.textContent=h),p=dt(T),g=K(T,"P",{"data-svelte-h":!0}),ie(g)!=="svelte-2wngvj"&&(g.textContent=w),T.forEach(_),m=dt(k),b=K(k,"DIV",{class:!0,"data-svelte-h":!0}),ie(b)!=="svelte-1bfa0bd"&&(b.innerHTML=x),k.forEach(_),B=dt(C),P=K(C,"DIV",{class:!0,"data-svelte-h":!0}),ie(P)!=="svelte-1fooaji"&&(P.innerHTML=M),C.forEach(_),this.h()},h(){G(s,"class","display-4 mb-0 svelte-1rxiwzv"),G(a,"class","text-light mb-3 svelte-1rxiwzv"),G(n,"class","col-md-6 dark-bg svelte-1rxiwzv"),G(b,"class","col-md-6"),G(e,"class","row"),G(P,"class","row mt-3"),G(t,"class","container mt-2")},m(O,C){Vt(O,t,C),S(t,e),S(e,n),S(n,s),S(s,i),S(n,o),S(n,a),S(a,c),S(n,u),S(n,f),S(n,p),S(n,g),S(e,m),S(e,b),S(t,B),S(t,P)},p(O,[C]){C&1&&wn(i,O[0]),C&2&&wn(c,O[1])},i:Ws,o:Ws,d(O){O&&_(t)}}}function J0(r,t,e){let{title:n="AINFT"}=t,{description:s="A new kind of NFT"}=t,{examples:i=["1.png","2.png","3.png","4.png","5.png"]}=t,{links:o=[{name:"View on OpenSea",url:"https://opensea.io",icon:"https://storage.googleapis.com/opensea-static/Logomark/Logomark-Transparent%20White.png"},{name:"Read Whitepaper",url:"path/to/whitepaper.pdf",icon:"bi bi-file-earmark-text"},{name:"GitHub Repository",url:"https://github.com/basilroy76/AINFT",icon:"bi bi-github"}]}=t;return r.$$set=a=>{"title"in a&&e(0,n=a.title),"description"in a&&e(1,s=a.description),"examples"in a&&e(2,i=a.examples),"links"in a&&e(3,o=a.links)},[n,s,i,o]}class z0 extends $l{constructor(t){super(),tu(this,t,J0,_0,ql,{title:0,description:1,examples:2,links:3})}}function zl(r,t,e){const n=r.slice();return n[20]=t[e],n}function Kl(r){let t,e;return{c(){t=z("div"),e=new sh(!1),this.h()},l(n){t=K(n,"DIV",{class:!0,role:!0});var s=pt(t);e=ih(s,!1),s.forEach(_),this.h()},h(){e.a=null,G(t,"class","alert alert-danger"),G(t,"role","alert")},m(n,s){Vt(n,t,s),e.m(r[7],t)},p(n,s){s&128&&e.p(n[7])},d(n){n&&_(t)}}}function K0(r){let t,e="Wallet connected to Polygon!";return{c(){t=z("p"),t.textContent=e,this.h()},l(n){t=K(n,"P",{class:!0,"data-svelte-h":!0}),ie(t)!=="svelte-1byursf"&&(t.textContent=e),this.h()},h(){G(t,"class","alert alert-success")},m(n,s){Vt(n,t,s)},p:Ws,d(n){n&&_(t)}}}function j0(r){let t,e="Connect Wallet to Polygon",n,s;return{c(){t=z("button"),t.textContent=e,this.h()},l(i){t=K(i,"BUTTON",{class:!0,"data-svelte-h":!0}),ie(t)!=="svelte-g5tn7c"&&(t.textContent=e),this.h()},h(){G(t,"class","btn btn-custom-primary mb-3 svelte-bx08dq")},m(i,o){Vt(i,t,o),n||(s=Xr(t,"click",r[11]),n=!0)},p:Ws,d(i){i&&_(t),n=!1,s()}}}function jl(r){let t,e;return{c(){t=z("div"),e=Ht(r[8]),this.h()},l(n){t=K(n,"DIV",{class:!0,role:!0});var s=pt(t);e=Qt(s,r[8]),s.forEach(_),this.h()},h(){G(t,"class","alert alert-success"),G(t,"role","alert")},m(n,s){Vt(n,t,s),S(t,e)},p(n,s){s&256&&wn(e,n[8])},d(n){n&&_(t)}}}function Zl(r){let t,e,n="Your Minted NFTs:",s,i,o="Note: images may take up to 10 minutes to appear, depending on the number of minted NFTS. You may have to refresh the metadata on opensea to see the image",a,c,u=Oc(r[5]),f=[];for(let h=0;h<u.length;h+=1)f[h]=Wl(zl(r,u,h));return{c(){t=z("div"),e=z("h2"),e.textContent=n,s=ht(),i=z("p"),i.textContent=o,a=ht(),c=z("div");for(let h=0;h<f.length;h+=1)f[h].c();this.h()},l(h){t=K(h,"DIV",{class:!0});var p=pt(t);e=K(p,"H2",{class:!0,"data-svelte-h":!0}),ie(e)!=="svelte-1ovc9h5"&&(e.textContent=n),s=dt(p),i=K(p,"P",{"data-svelte-h":!0}),ie(i)!=="svelte-qva84q"&&(i.textContent=o),a=dt(p),c=K(p,"DIV",{class:!0});var g=pt(c);for(let w=0;w<f.length;w+=1)f[w].l(g);g.forEach(_),p.forEach(_),this.h()},h(){G(e,"class","mb-3 svelte-bx08dq"),G(c,"class","row"),G(t,"class","mt-4")},m(h,p){Vt(h,t,p),S(t,e),S(t,s),S(t,i),S(t,a),S(t,c);for(let g=0;g<f.length;g+=1)f[g]&&f[g].m(c,null)},p(h,p){if(p&544){u=Oc(h[5]);let g;for(g=0;g<u.length;g+=1){const w=zl(h,u,g);f[g]?f[g].p(w,p):(f[g]=Wl(w),f[g].c(),f[g].m(c,null))}for(;g<f.length;g+=1)f[g].d(1);f.length=u.length}},d(h){h&&_(t),oh(f,h)}}}function Z0(r){let t,e='<div class="spinner-border text-light" role="status"><span class="visually-hidden">Loading...</span></div>';return{c(){t=z("div"),t.innerHTML=e,this.h()},l(n){t=K(n,"DIV",{class:!0,style:!0,"data-svelte-h":!0}),ie(t)!=="svelte-x7ihkc"&&(t.innerHTML=e),this.h()},h(){G(t,"class","card-img-top d-flex justify-content-center align-items-center"),ch(t,"height","200px")},m(n,s){Vt(n,t,s)},p:Ws,d(n){n&&_(t)}}}function W0(r){let t,e,n;return{c(){t=z("img"),this.h()},l(s){t=K(s,"IMG",{src:!0,class:!0,alt:!0}),this.h()},h(){ya(t.src,e=`http://dpsdac3mr9egm.cloudfront.net/${r[20]}.png`)||G(t,"src",e),G(t,"class","card-img-top"),G(t,"alt",n=`NFT #${r[20]}`)},m(s,i){Vt(s,t,i)},p(s,i){i&32&&!ya(t.src,e=`http://dpsdac3mr9egm.cloudfront.net/${s[20]}.png`)&&G(t,"src",e),i&32&&n!==(n=`NFT #${s[20]}`)&&G(t,"alt",n)},d(s){s&&_(t)}}}function Wl(r){let t,e,n,s,i,o,a,c=r[20]+"",u,f,h;function p(m,b){return m[9][m[20]]?W0:Z0}let g=p(r),w=g(r);return{c(){t=z("div"),e=z("div"),w.c(),n=ht(),s=z("div"),i=z("p"),o=z("a"),a=Ht("Token ID: "),u=Ht(c),h=ht(),this.h()},l(m){t=K(m,"DIV",{class:!0});var b=pt(t);e=K(b,"DIV",{class:!0});var x=pt(e);w.l(x),n=dt(x),s=K(x,"DIV",{class:!0});var B=pt(s);i=K(B,"P",{class:!0});var P=pt(i);o=K(P,"A",{href:!0});var M=pt(o);a=Qt(M,"Token ID: "),u=Qt(M,c),M.forEach(_),P.forEach(_),B.forEach(_),x.forEach(_),h=dt(b),b.forEach(_),this.h()},h(){G(o,"href",f="https://opensea.io/assets/matic/0xaf63754ffdccefd9d18cf3e1dd96fd013572164a/"+r[20]),G(i,"class","card-text text-white"),G(s,"class","card-body"),G(e,"class","card dark-bg border-white svelte-bx08dq"),G(t,"class","col-md-4 mb-3")},m(m,b){Vt(m,t,b),S(t,e),w.m(e,null),S(e,n),S(e,s),S(s,i),S(i,o),S(o,a),S(o,u),S(t,h)},p(m,b){g===(g=p(m))&&w?w.p(m,b):(w.d(1),w=g(m),w&&(w.c(),w.m(e,n))),b&32&&c!==(c=m[20]+"")&&wn(u,c),b&32&&f!==(f="https://opensea.io/assets/matic/0xaf63754ffdccefd9d18cf3e1dd96fd013572164a/"+m[20])&&G(o,"href",f)},d(m){m&&_(t),w.d()}}}function Yl(r){let t,e,n="View collection on OpenSea",s,i;return{c(){t=z("div"),e=z("button"),e.textContent=n,this.h()},l(o){t=K(o,"DIV",{class:!0});var a=pt(t);e=K(a,"BUTTON",{class:!0,"data-svelte-h":!0}),ie(e)!=="svelte-2tvhhd"&&(e.textContent=n),a.forEach(_),this.h()},h(){G(e,"class","btn btn-custom-info mb-4 svelte-bx08dq"),G(t,"class","row")},m(o,a){Vt(o,t,a),S(t,e),s||(i=Xr(e,"click",r[15]),s=!0)},p:Ws,d(o){o&&_(t),s=!1,i()}}}function Y0(r){let t,e,n,s,i="",o,a,c,u,f,h,p,g="Mint AINFTs with Metamask",w,m,b,x,B,P,M,O,C,k,T="Quantity to mint (0-50):",V,D,W,it,lt,Nt,I,F,J,nt,tt,ut,ot,Ct,ae,ge,me=r[3]!==1?"s":"",He,ce,$n,ye,Ie,tr,zt,te='<div class="d-flex justify-content-center align-middle">As seen on</div> <div class="d-flex justify-content-center align-middle"><a href="https://nftcalendar.io/"><img width="150" height="150" src="nft_calendar.svg"/></a></div>',kt,Vr,ii;u=new z0({});let St=r[7]&&Kl(r);function Pc(Q,at){return Q[1]?K0:j0}let Ki=Pc(r),Be=Ki(r),Ut=r[8]&&jl(r),Ft=r[6]&&Zl(r),Lt=r[0]&&Yl(r);return{c(){t=z("link"),e=z("link"),n=z("link"),s=z("script"),s.innerHTML=i,a=ht(),c=z("main"),Xf(u.$$.fragment),f=ht(),h=z("main"),p=z("h1"),p.textContent=g,w=ht(),St&&St.c(),m=ht(),Be.c(),b=ht(),x=z("p"),B=Ht("Mint Price: "),P=Ht(r[2]),M=Ht(" MATIC"),O=ht(),C=z("div"),k=z("label"),k.textContent=T,V=ht(),D=z("input"),W=ht(),it=z("span"),lt=Ht(r[3]),Nt=ht(),I=z("p"),F=Ht("Total Price: "),J=Ht(r[4]),nt=Ht(" MATIC"),tt=ht(),ut=z("div"),ot=z("button"),Ct=Ht("Mint "),ae=Ht(r[3]),ge=Ht(" AINFT"),He=Ht(me),$n=ht(),Ut&&Ut.c(),ye=ht(),Ft&&Ft.c(),Ie=ht(),Lt&&Lt.c(),tr=ht(),zt=z("div"),zt.innerHTML=te,this.h()},l(Q){const at=qf("svelte-1hl5gko",document.head);t=K(at,"LINK",{href:!0,rel:!0}),e=K(at,"LINK",{rel:!0,href:!0}),n=K(at,"LINK",{href:!0,rel:!0}),s=K(at,"SCRIPT",{src:!0,"data-svelte-h":!0}),ie(s)!=="svelte-1g0jysp"&&(s.innerHTML=i),at.forEach(_),a=dt(Q),c=K(Q,"MAIN",{class:!0});var Ic=pt(c);$f(u.$$.fragment,Ic),Ic.forEach(_),f=dt(Q),h=K(Q,"MAIN",{class:!0});var xt=pt(h);p=K(xt,"H1",{class:!0,"data-svelte-h":!0}),ie(p)!=="svelte-zlc3f4"&&(p.textContent=g),w=dt(xt),St&&St.l(xt),m=dt(xt),Be.l(xt),b=dt(xt),x=K(xt,"P",{class:!0});var ji=pt(x);B=Qt(ji,"Mint Price: "),P=Qt(ji,r[2]),M=Qt(ji," MATIC"),ji.forEach(_),O=dt(xt),C=K(xt,"DIV",{class:!0});var _r=pt(C);k=K(_r,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),ie(k)!=="svelte-1uw4weq"&&(k.textContent=T),V=dt(_r),D=K(_r,"INPUT",{type:!0,class:!0,id:!0,min:!0,max:!0,step:!0}),W=dt(_r),it=K(_r,"SPAN",{class:!0});var Bc=pt(it);lt=Qt(Bc,r[3]),Bc.forEach(_),_r.forEach(_),Nt=dt(xt),I=K(xt,"P",{class:!0});var Zi=pt(I);F=Qt(Zi,"Total Price: "),J=Qt(Zi,r[4]),nt=Qt(Zi," MATIC"),Zi.forEach(_),tt=dt(xt),ut=K(xt,"DIV",{class:!0});var Cc=pt(ut);ot=K(Cc,"BUTTON",{class:!0});var oi=pt(ot);Ct=Qt(oi,"Mint "),ae=Qt(oi,r[3]),ge=Qt(oi," AINFT"),He=Qt(oi,me),oi.forEach(_),Cc.forEach(_),$n=dt(xt),Ut&&Ut.l(xt),ye=dt(xt),Ft&&Ft.l(xt),Ie=dt(xt),Lt&&Lt.l(xt),xt.forEach(_),tr=dt(Q),zt=K(Q,"DIV",{class:!0,"data-svelte-h":!0}),ie(zt)!=="svelte-1xamonc"&&(zt.innerHTML=te),this.h()},h(){G(t,"href","https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"),G(t,"rel","stylesheet"),G(e,"rel","stylesheet"),G(e,"href","https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css"),G(n,"href","https://fonts.googleapis.com/css2?family=Exo+2:wght@400;700&family=Merriweather:wght@400;700&display=swap"),G(n,"rel","stylesheet"),ya(s.src,o="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js")||G(s,"src",o),G(c,"class","container mt-2 dark-bg text-white svelte-bx08dq"),G(p,"class","text-center mb-4 svelte-bx08dq"),G(x,"class","mb-3"),G(k,"for","quantity"),G(k,"class","form-label"),G(D,"type","range"),G(D,"class","form-range"),G(D,"id","quantity"),G(D,"min","0"),G(D,"max","50"),G(D,"step","1"),G(it,"class","badge bg-secondary"),G(C,"class","mb-3"),G(I,"class","mb-3"),G(ot,"class","btn btn-custom-secondary mb-4 svelte-bx08dq"),ot.disabled=ce=r[3]===0||r[10],G(ut,"class","row"),G(h,"class","container mt-2 dark-bg text-white svelte-bx08dq"),G(zt,"class","row text-white mt-3")},m(Q,at){S(document.head,t),S(document.head,e),S(document.head,n),S(document.head,s),Vt(Q,a,at),Vt(Q,c,at),th(u,c,null),Vt(Q,f,at),Vt(Q,h,at),S(h,p),S(h,w),St&&St.m(h,null),S(h,m),Be.m(h,null),S(h,b),S(h,x),S(x,B),S(x,P),S(x,M),S(h,O),S(h,C),S(C,k),S(C,V),S(C,D),Tc(D,r[3]),S(C,W),S(C,it),S(it,lt),S(h,Nt),S(h,I),S(I,F),S(I,J),S(I,nt),S(h,tt),S(h,ut),S(ut,ot),S(ot,Ct),S(ot,ae),S(ot,ge),S(ot,He),S(h,$n),Ut&&Ut.m(h,null),S(h,ye),Ft&&Ft.m(h,null),S(h,Ie),Lt&&Lt.m(h,null),Vt(Q,tr,at),Vt(Q,zt,at),kt=!0,Vr||(ii=[Xr(D,"change",r[14]),Xr(D,"input",r[14]),Xr(D,"input",r[12]),Xr(ot,"click",r[13])],Vr=!0)},p(Q,[at]){Q[7]?St?St.p(Q,at):(St=Kl(Q),St.c(),St.m(h,m)):St&&(St.d(1),St=null),Ki===(Ki=Pc(Q))&&Be?Be.p(Q,at):(Be.d(1),Be=Ki(Q),Be&&(Be.c(),Be.m(h,b))),(!kt||at&4)&&wn(P,Q[2]),at&8&&Tc(D,Q[3]),(!kt||at&8)&&wn(lt,Q[3]),(!kt||at&16)&&wn(J,Q[4]),(!kt||at&8)&&wn(ae,Q[3]),(!kt||at&8)&&me!==(me=Q[3]!==1?"s":"")&&wn(He,me),(!kt||at&1032&&ce!==(ce=Q[3]===0||Q[10]))&&(ot.disabled=ce),Q[8]?Ut?Ut.p(Q,at):(Ut=jl(Q),Ut.c(),Ut.m(h,ye)):Ut&&(Ut.d(1),Ut=null),Q[6]?Ft?Ft.p(Q,at):(Ft=Zl(Q),Ft.c(),Ft.m(h,Ie)):Ft&&(Ft.d(1),Ft=null),Q[0]?Lt?Lt.p(Q,at):(Lt=Yl(Q),Lt.c(),Lt.m(h,null)):Lt&&(Lt.d(1),Lt=null)},i(Q){kt||(eh(u.$$.fragment,Q),kt=!0)},o(Q){nh(u.$$.fragment,Q),kt=!1},d(Q){Q&&(_(a),_(c),_(f),_(h),_(tr),_(zt)),_(t),_(e),_(n),_(s),rh(u),St&&St.d(),Be.d(),Ut&&Ut.d(),Ft&&Ft.d(),Lt&&Lt.d(),Vr=!1,Wf(ii)}}}const X0="0xaf63754ffdccefd9d18cf3e1dd96fd013572164a",ma="0x89";function q0(r,t,e){let n,s,i,o=!1,a="0",c=1,u="0",f=[],h=!1,p="",g="",w={},m=!1;const b=[{type:"constructor",inputs:[{name:"initialOwner",type:"address",internalType:"address"}],stateMutability:"nonpayable"},{type:"function",name:"approve",inputs:[{name:"to",type:"address",internalType:"address"},{name:"tokenId",type:"uint256",internalType:"uint256"}],outputs:[],stateMutability:"payable"},{type:"function",name:"availableQuantity",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"balanceOf",inputs:[{name:"owner",type:"address",internalType:"address"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"baseURI",inputs:[],outputs:[{name:"",type:"string",internalType:"string"}],stateMutability:"view"},{type:"function",name:"getApproved",inputs:[{name:"tokenId",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"mint",inputs:[{name:"quantity",type:"uint256",internalType:"uint256"}],outputs:[],stateMutability:"payable"},{type:"function",name:"isApprovedForAll",inputs:[{name:"owner",type:"address",internalType:"address"},{name:"operator",type:"address",internalType:"address"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"mintRate",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"event",name:"Transfer",inputs:[{name:"from",type:"address",indexed:!0,internalType:"address"},{name:"to",type:"address",indexed:!0,internalType:"address"},{name:"tokenId",type:"uint256",indexed:!0,internalType:"uint256"}],anonymous:!1}];async function x(){if(typeof window.ethereum<"u")try{if(await window.ethereum.request({method:"eth_requestAccounts"}),await window.ethereum.request({method:"eth_chainId"})!==ma)try{await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:ma}]})}catch(V){if(V.code===4902)try{await window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:ma,chainName:"Polygon Mainnet",nativeCurrency:{name:"MATIC",symbol:"MATIC",decimals:18},rpcUrls:["https://polygon-rpc.com/"],blockExplorerUrls:["https://polygonscan.com/"]}]})}catch{throw e(7,p="Failed to add Polygon network"),new Error(p)}else throw e(7,p="Failed to switch to Polygon network"),new Error(p)}n=new V0(window.ethereum),e(0,s=await n.getSigner()),i=new ls(X0,b,s),e(1,o=!0);const T=await i.mintRate();e(2,a=Uh(T)),B()}catch(k){console.error("Failed to connect wallet:",k),e(7,p=`Failed to connect wallet: ${k.message}`)}else console.error("MetaMask is not installed"),e(7,p='MetaMask is not installed. <a href="https://metamask.io/download/" target="_blank" rel="noopener noreferrer">Click here to install MetaMask</a>')}function B(){e(4,u=(parseFloat(a)*c).toFixed(20))}async function P(){if(!o){e(7,p="Please connect your wallet first");return}try{e(8,g="Calling mint function..."),e(10,m=!0),e(5,f=[]),console.log("Sending matic"),console.log(Vc(u));{const V=(await(await i.mint(c,{value:Vc(u)})).wait()).logs.filter(D=>D.eventName==="Transfer"&&D.args.from==="0x0000000000000000000000000000000000000000");e(5,f=V.map(D=>D.args.tokenId.toString()))}f.forEach(k=>{e(9,w[k]=!1,w)}),e(6,h=!0),e(8,g="NFT(s) minted successfully!"),e(10,m=!1),e(7,p=""),f.forEach(k=>M(k))}catch(k){console.error("Failed to mint NFT:",k),e(7,p="Failed to mint NFT. Please try again."),e(8,g="")}}async function M(k){const T=`http://dpsdac3mr9egm.cloudfront.net/${k}.png`;let V=0;const D=100,W=1e4,it=()=>new Promise(Nt=>{const I=new Image;I.onload=()=>Nt(!0),I.onerror=()=>Nt(!1),I.src=T}),lt=async()=>{if(V>=D){console.error(`Failed to load image for token ID ${k} after ${D} attempts`);return}await it()?e(9,w[k]=!0,w):(V++,setTimeout(lt,W))};lt()}Yf(()=>{x()});function O(){c=ah(this.value),e(3,c)}const C=()=>window.open(`https://opensea.io/${s.address}`);return B(),[s,o,a,c,u,f,h,p,g,w,m,x,B,P,O,C]}class rm extends $l{constructor(t){super(),tu(this,t,q0,Y0,ql,{})}}export{rm as component};
